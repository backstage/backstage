<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-features/kubernetes/configuration" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Configuring Kubernetes integration | Backstage Software Catalog and Developer Platform</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://backstage.io/img/sharing-opengraph.png"><meta data-rh="true" name="twitter:image" content="https://backstage.io/img/sharing-opengraph.png"><meta data-rh="true" property="og:url" content="https://backstage.io/docs/next/features/kubernetes/configuration"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Configuring Kubernetes integration | Backstage Software Catalog and Developer Platform"><meta data-rh="true" name="description" content="Configuring the Kubernetes integration for Backstage expose your entity&#x27;s objects"><meta data-rh="true" property="og:description" content="Configuring the Kubernetes integration for Backstage expose your entity&#x27;s objects"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://backstage.io/docs/next/features/kubernetes/configuration"><link data-rh="true" rel="alternate" href="https://backstage.io/docs/next/features/kubernetes/configuration" hreflang="en"><link data-rh="true" rel="alternate" href="https://backstage.io/docs/next/features/kubernetes/configuration" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://JCMFNHCHI8-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Core Features","item":"https://backstage.io/docs/next/core-features/generated-index"},{"@type":"ListItem","position":2,"name":"Kubernetes","item":"https://backstage.io/docs/next/kubernetes/generated-index"},{"@type":"ListItem","position":3,"name":"Configuration","item":"https://backstage.io/docs/next/features/kubernetes/configuration"}]}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Backstage Software Catalog and Developer Platform RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Backstage Software Catalog and Developer Platform Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-KSEVGGNCJW"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-KSEVGGNCJW",{})</script>



<link rel="search" type="application/opensearchdescription+xml" title="Backstage Software Catalog and Developer Platform" href="/opensearch.xml">




<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pushfeedback@latest/dist/pushfeedback/pushfeedback.css">


<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=IBM+Plex+Mono:500,700&display=swap">
<script src="https://buttons.github.io/buttons.js"></script>
<script src="https://unpkg.com/medium-zoom@1.0.6/dist/medium-zoom.min.js"></script>
<script src="/js/medium-zoom.js"></script>
<script src="/js/dismissable-banner.js"></script>
<script src="/js/scroll-nav-to-view-in-docs.js"></script><link rel="stylesheet" href="/assets/css/styles.a6a6a0a6.css">
<script src="/assets/js/runtime~main.43487e4c.js" defer="defer"></script>
<script src="/assets/js/main.8d0200c2.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"dark"),document.documentElement.setAttribute("data-theme-choice",t||"dark")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo-black.svg" alt="Backstage Software Catalog and Developer Platform" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="Backstage Software Catalog and Developer Platform" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a class="navbar__item navbar__link" href="/docs/overview/what-is-backstage">Docs</a><a class="navbar__item navbar__link" href="/plugins">Plugins</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Reference</a><ul class="dropdown__menu"><li><a href="https://backstage.io/api/stable" target="_self" rel="noopener noreferrer" class="dropdown__link">Stable (v1.47.0)<svg width="12" height="12" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li><a href="https://backstage.io/api/next" target="_self" rel="noopener noreferrer" class="dropdown__link">Next<svg width="12" height="12" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><a class="navbar__item navbar__link" href="/docs/releases/v1.47.0">Releases</a><a class="navbar__item navbar__link" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/demos">Demos</a><a class="navbar__item navbar__link" href="/community">Community</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/backstage/backstage" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><a href="https://discord.gg/backstage-687207715902193673" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-discord-link" aria-label="Discord community"></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/next/features/kubernetes/configuration">Next</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/next/features/kubernetes/configuration">Next</a></li><li><a class="dropdown__link" href="/docs/features/kubernetes/configuration">Stable</a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Meta+k)" aria-keyshortcuts="Meta+k"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 24 24" aria-hidden="true"><circle cx="11" cy="11" r="8" stroke="currentColor" fill="none" stroke-width="1.4"></circle><path d="m21 21-4.3-4.3" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/next/overview/generated-index"><span title="Overview" class="categoryLinkLabel_W154">Overview</span></a><button aria-label="Expand sidebar category &#x27;Overview&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/next/getting-started/generated-index"><span title="Getting Started" class="categoryLinkLabel_W154">Getting Started</span></a><button aria-label="Expand sidebar category &#x27;Getting Started&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" href="/docs/next/core-features/generated-index"><span title="Core Features" class="categoryLinkLabel_W154">Core Features</span></a><button aria-label="Collapse sidebar category &#x27;Core Features&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/docs/next/auth-and-identity/generated-index"><span title="Auth and Identity" class="categoryLinkLabel_W154">Auth and Identity</span></a><button aria-label="Expand sidebar category &#x27;Auth and Identity&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" tabindex="0" href="/docs/next/kubernetes/generated-index"><span title="Kubernetes" class="categoryLinkLabel_W154">Kubernetes</span></a><button aria-label="Collapse sidebar category &#x27;Kubernetes&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/features/kubernetes/"><span title="Overview" class="linkLabel_WmDU">Overview</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/features/kubernetes/installation"><span title="Installation" class="linkLabel_WmDU">Installation</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/next/features/kubernetes/configuration"><span title="Configuration" class="linkLabel_WmDU">Configuration</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/features/kubernetes/authentication"><span title="Kubernetes Authentication" class="linkLabel_WmDU">Kubernetes Authentication</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/features/kubernetes/authentication-strategies"><span title="Authentication Strategies" class="linkLabel_WmDU">Authentication Strategies</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/features/kubernetes/troubleshooting"><span title="Troubleshooting" class="linkLabel_WmDU">Troubleshooting</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/features/kubernetes/proxy"><span title="Proxy" class="linkLabel_WmDU">Proxy</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/docs/next/notifications/generated-index"><span title="Notifications" class="categoryLinkLabel_W154">Notifications</span></a><button aria-label="Expand sidebar category &#x27;Notifications&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/docs/next/permissions/generated-index"><span title="Permissions" class="categoryLinkLabel_W154">Permissions</span></a><button aria-label="Expand sidebar category &#x27;Permissions&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/docs/next/search/generated-index"><span title="Search" class="categoryLinkLabel_W154">Search</span></a><button aria-label="Expand sidebar category &#x27;Search&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/docs/next/software-catalog/generated-index"><span title="Software Catalog" class="categoryLinkLabel_W154">Software Catalog</span></a><button aria-label="Expand sidebar category &#x27;Software Catalog&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/docs/next/software-templates/generated-index"><span title="Software Templates" class="categoryLinkLabel_W154">Software Templates</span></a><button aria-label="Expand sidebar category &#x27;Software Templates&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/docs/next/techdocs/generated-index"><span title="TechDocs" class="categoryLinkLabel_W154">TechDocs</span></a><button aria-label="Expand sidebar category &#x27;TechDocs&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/next/integrations/generated-index"><span title="Integrations" class="categoryLinkLabel_W154">Integrations</span></a><button aria-label="Expand sidebar category &#x27;Integrations&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/next/plugins/generated-index"><span title="Plugins" class="categoryLinkLabel_W154">Plugins</span></a><button aria-label="Expand sidebar category &#x27;Plugins&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/next/configuration/generated-index"><span title="Configuration" class="categoryLinkLabel_W154">Configuration</span></a><button aria-label="Expand sidebar category &#x27;Configuration&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/next/framework/generated-index"><span title="Framework" class="categoryLinkLabel_W154">Framework</span></a><button aria-label="Expand sidebar category &#x27;Framework&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/next/tutorials/generated-index"><span title="Tutorials" class="categoryLinkLabel_W154">Tutorials</span></a><button aria-label="Expand sidebar category &#x27;Tutorials&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/next/faq/generated-index"><span title="FAQ" class="categoryLinkLabel_W154">FAQ</span></a><button aria-label="Expand sidebar category &#x27;FAQ&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/next/contribute/generated-index"><span title="Contribute" class="categoryLinkLabel_W154">Contribute</span></a><button aria-label="Expand sidebar category &#x27;Contribute&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/next/references/generated-index"><span title="References" class="categoryLinkLabel_W154">References</span></a><button aria-label="Expand sidebar category &#x27;References&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_xLCN"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is unreleased documentation for <!-- -->Backstage Software Catalog and Developer Platform<!-- --> <b>Next</b> version.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/docs/features/kubernetes/configuration">latest version</a></b> (<!-- -->Stable<!-- -->).</div></div><div class="docItemContainer_jfFK"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/docs/next/core-features/generated-index"><span>Core Features</span></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/docs/next/kubernetes/generated-index"><span>Kubernetes</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Configuration</span></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: Next</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Configuring Kubernetes integration</h1></header><div class="row"><div class="col col--12 markdown"><p>Configuring the Backstage Kubernetes integration involves two steps:</p>
<ol>
<li class="">Enabling the backend to collect objects from your Kubernetes cluster(s).</li>
<li class="">Surfacing your Kubernetes objects in catalog entities</li>
</ol>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="configuring-kubernetes-clusters">Configuring Kubernetes Clusters<a href="#configuring-kubernetes-clusters" class="hash-link" aria-label="Direct link to Configuring Kubernetes Clusters" title="Direct link to Configuring Kubernetes Clusters" translate="no">​</a></h2>
<p>The following is a full example entry in <code>app-config.yaml</code>:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#232323"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#232323"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token key atrule">kubernetes</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">frontend</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token key atrule">podDelete</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token key atrule">enabled</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">serviceLocatorMethod</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;multiTenant&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">clusterLocatorMethods</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;config&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token key atrule">clusters</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">url</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> http</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain">//127.0.0.1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token number" style="color:rgb(181, 206, 168)">9999</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">          </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> minikube</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">          </span><span class="token key atrule">authProvider</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;serviceAccount&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">          </span><span class="token key atrule">skipTLSVerify</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token boolean important">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">          </span><span class="token key atrule">skipMetricsLookup</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">          </span><span class="token key atrule">serviceAccountToken</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain">K8S_MINIKUBE_TOKEN</span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">          </span><span class="token key atrule">dashboardUrl</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> http</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain">//127.0.0.1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token number" style="color:rgb(181, 206, 168)">64713</span><span class="token plain"> </span><span class="token comment" style="color:rgb(106, 153, 85)"># url copied from running the command: minikube service kubernetes-dashboard -n kubernetes-dashboard</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">          </span><span class="token key atrule">dashboardApp</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> standard</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">          </span><span class="token key atrule">caData</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain">K8S_CONFIG_CA_DATA</span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">          </span><span class="token key atrule">caFile</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;&#x27;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(106, 153, 85)"># local path to CA file</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">          </span><span class="token key atrule">customResources</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">group</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;argoproj.io&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">              </span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;v1alpha1&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">              </span><span class="token key atrule">plural</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;rollouts&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">url</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> http</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain">//127.0.0.2</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token number" style="color:rgb(181, 206, 168)">9999</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">          </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> aws</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">cluster</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">          </span><span class="token key atrule">title</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;My AWS Cluster Number One&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">          </span><span class="token key atrule">authProvider</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;aws&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;gke&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token key atrule">projectId</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;gke-clusters&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token key atrule">region</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;europe-west1&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token key atrule">skipTLSVerify</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token key atrule">skipMetricsLookup</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token key atrule">exposeDashboard</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="frontend-optional"><code>frontend</code> (optional)<a href="#frontend-optional" class="hash-link" aria-label="Direct link to frontend-optional" title="Direct link to frontend-optional" translate="no">​</a></h3>
<p>This is an array used to configure some frontend features.</p>
<p>Valid values are:</p>
<ul>
<li class=""><code>podDelete</code></li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="poddelete-optional"><code>podDelete</code> (optional)<a href="#poddelete-optional" class="hash-link" aria-label="Direct link to poddelete-optional" title="Direct link to poddelete-optional" translate="no">​</a></h4>
<p>This configures the behavior of the delete pod button in the container panel.</p>
<p>Valid configurations are:</p>
<ul>
<li class=""><code>enabled</code></li>
</ul>
<h5 class="anchor anchorTargetStickyNavbar_Vzrq" id="enabled"><code>enabled</code><a href="#enabled" class="hash-link" aria-label="Direct link to enabled" title="Direct link to enabled" translate="no">​</a></h5>
<p>This configuration controls the visibility of this feature.</p>
<p>Valid values are:</p>
<ul>
<li class=""><code>true</code></li>
<li class=""><code>false</code></li>
</ul>
<p>The default value is <code>false</code>.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="internationalization">Internationalization<a href="#internationalization" class="hash-link" aria-label="Direct link to Internationalization" title="Direct link to Internationalization" translate="no">​</a></h4>
<p>To customize or translate text in some of the components, use the following approach:</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#232323"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#232323"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token keyword module" style="color:rgb(86, 156, 214)">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token imports"> createTranslationMessages </span><span class="token imports punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"> </span><span class="token keyword module" style="color:rgb(86, 156, 214)">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;@backstage/core-plugin-api/alpha&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword module" style="color:rgb(86, 156, 214)">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token imports"> kubernetesReactTranslationRef </span><span class="token imports punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"> </span><span class="token keyword module" style="color:rgb(86, 156, 214)">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;@backstage/plugin-kubernetes-react/alpha&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword module" style="color:rgb(86, 156, 214)">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token imports"> kubernetesTranslationRef </span><span class="token imports punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"> </span><span class="token keyword module" style="color:rgb(86, 156, 214)">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;@backstage/plugin-kubernetes/alpha&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword module" style="color:rgb(86, 156, 214)">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token imports"> kubernetesClusterTranslationRef </span><span class="token imports punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"> </span><span class="token keyword module" style="color:rgb(86, 156, 214)">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;@backstage/plugin-kubernetes-cluster/alpha&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">const</span><span class="token plain"> app </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">createApp</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token literal-property property">__experimentalTranslations</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token literal-property property">resources</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token function" style="color:rgb(220, 220, 170)">createTranslationMessages</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token literal-property property">ref</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> kubernetesReactTranslationRef</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token literal-property property">messages</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">          </span><span class="token string-property property">&quot;podDrawer.buttons.delete&quot;</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;Restart Pod&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token function" style="color:rgb(220, 220, 170)">createTranslationMessages</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token literal-property property">ref</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> kubernetesTranslationRef</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token literal-property property">messages</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">          </span><span class="token string-property property">&#x27;kubernetesContentPage.permissionAlert.title&#x27;</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;Insufficient permissions&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">          </span><span class="token string-property property">&#x27;kubernetesContentPage.permissionAlert.message&#x27;</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;You do not have permissions to view Kubernetes objects.&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token function" style="color:rgb(220, 220, 170)">createTranslationMessages</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token literal-property property">ref</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> kubernetesClusterTranslationRef</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token literal-property property">messages</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">          </span><span class="token string-property property">&#x27;kubernetesClusterContentPage.permissionAlert.title&#x27;</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;Insufficient permissions&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">          </span><span class="token string-property property">&#x27;kubernetesClusterContentPage.permissionAlert.message&#x27;</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;You do not have permissions to view Kubernetes objects.&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token spread operator" style="color:rgb(212, 212, 212)">...</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="servicelocatormethod"><code>serviceLocatorMethod</code><a href="#servicelocatormethod" class="hash-link" aria-label="Direct link to servicelocatormethod" title="Direct link to servicelocatormethod" translate="no">​</a></h3>
<p>This configures how to determine which clusters a component is running in.</p>
<p>Valid values are:</p>
<ul>
<li class="">
<p><code>multiTenant</code> - This configuration assumes that all components run on all the
provided clusters.</p>
</li>
<li class="">
<p><code>singleTenant</code> - This configuration assumes that current component run on one cluster in provided clusters.</p>
</li>
<li class="">
<p><code>catalogRelation</code> - This configuration assumes that the current component runs only on all clusters it is dependant on.</p>
</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="clusterlocatormethods"><code>clusterLocatorMethods</code><a href="#clusterlocatormethods" class="hash-link" aria-label="Direct link to clusterlocatormethods" title="Direct link to clusterlocatormethods" translate="no">​</a></h3>
<p>This is an array used to determine where to retrieve cluster configuration from.</p>
<p>Valid cluster locator methods are:</p>
<ul>
<li class=""><a href="#catalog" class=""><code>catalog</code></a></li>
<li class=""><a href="#config" class=""><code>config</code></a></li>
<li class=""><a href="#gke" class=""><code>gke</code></a></li>
<li class=""><a href="#localkubectlproxy" class=""><code>localKubectlProxy</code></a></li>
<li class=""><a href="#custom-kubernetesclusterssupplier" class="">custom <code>KubernetesClustersSupplier</code></a></li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="catalog"><code>catalog</code><a href="#catalog" class="hash-link" aria-label="Direct link to catalog" title="Direct link to catalog" translate="no">​</a></h4>
<p>This cluster locator method will gather
<a href="https://backstage.io/docs/features/software-catalog/system-model#resource" target="_blank" rel="noopener noreferrer" class="">Resources</a>
of
<a href="https://backstage.io/docs/features/software-catalog/descriptor-format#spectype-required-4" target="_blank" rel="noopener noreferrer" class="">type</a>
<code>kubernetes-cluster</code> from the catalog and treat them as clusters for the
purposes of the Kubernetes plugin. In order for a resource to be detected by
this method, it must also have the following
<a href="https://backstage.io/docs/features/software-catalog/descriptor-format#annotations-optional" target="_blank" rel="noopener noreferrer" class="">annotations</a>
(as seen
<a href="https://github.com/backstage/backstage/blob/86baccb2d7d378baed74eaebf017c60b410986e5/plugins/kubernetes-backend/src/cluster-locator/CatalogClusterLocator.ts#L51-L61" target="_blank" rel="noopener noreferrer" class="">here</a>
in the code):</p>
<ul>
<li class=""><a href="https://backstage.io/docs/reference/plugin-kubernetes-common.annotation_kubernetes_api_server/" target="_blank" rel="noopener noreferrer" class=""><code>kubernetes.io/api-server</code></a>,
denoting the base URL of the Kubernetes control plane</li>
<li class=""><a href="https://backstage.io/docs/reference/plugin-kubernetes-common.annotation_kubernetes_api_server_ca/" target="_blank" rel="noopener noreferrer" class=""><code>kubernetes.io/api-server-certificate-authority</code></a>,
containing a base64-encoded certificate authority bundle in PEM format;
Backstage will check that the control plane presents a certificate signed by
this authority.</li>
<li class=""><a href="https://backstage.io/docs/reference/plugin-kubernetes-common.annotation_kubernetes_auth_provider/" target="_blank" rel="noopener noreferrer" class=""><code>kubernetes.io/auth-provider</code></a>,
denoting the strategy to use to authenticate with the control plane.</li>
</ul>
<p>There are many other annotations that can be applied to a cluster resource to
configure the way Backstage communicates, documented
<a href="https://backstage.io/docs/reference/plugin-kubernetes-common#variables" target="_blank" rel="noopener noreferrer" class="">here</a>
in the API reference. Here is a YAML snippet illustrating an example of a
cluster in the catalog:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#232323"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#232323"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> backstage.io/v1alpha1</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> Resource</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">cluster</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">annotations</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token key atrule">kubernetes.io/api-server</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;https://127.0.0.1:53725&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token key atrule">kubernetes.io/api-server-certificate-authority</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token comment" style="color:rgb(106, 153, 85)"># base64-encoded CA</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token key atrule">kubernetes.io/auth-provider</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;oidc&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token key atrule">kubernetes.io/oidc-token-provider</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;microsoft&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token key atrule">kubernetes.io/skip-metrics-lookup</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;true&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> kubernetes</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">cluster</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">owner</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> user</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain">guest</span><br></span></code></pre></div></div>
<p>Note that it is insecure to store a Kubernetes service account token in an
annotation on a catalog entity (where it could easily be accidentally revealed
by the catalog API) -- therefore there is no annotation corresponding to the
<a href="#clustersserviceaccounttoken-optional" class=""><code>serviceAccountToken</code> field</a> used by
the <a href="#config" class=""><code>config</code></a> cluster locator. Accordingly, the catalog cluster
locator does not support the <a href="#clustersauthprovider" class=""><code>serviceAccount</code></a> auth
strategy.</p>
<p>This method can be quite helpful when used in combination with an ingestion
procedure like the
<a href="https://backstage.io/api/stable/classes/_backstage_plugin-catalog-backend-module-gcp.index.GkeEntityProvider.html" target="_blank" rel="noopener noreferrer" class=""><code>GkeEntityProvider</code></a>
(installation documented
<a href="https://github.com/backstage/backstage/tree/master/plugins/catalog-backend-module-gcp#installation" target="_blank" rel="noopener noreferrer" class="">here</a>)
or the
<a href="https://backstage.io/api/stable/classes/_backstage_plugin-catalog-backend-module-aws.index.AwsEKSClusterProcessor.html" target="_blank" rel="noopener noreferrer" class=""><code>AwsEKSClusterProcessor</code></a>
to automatically update the set of clusters tracked by Backstage.</p>
<p>For this method to work any entity that would be using this <code>Resource</code> to help drive the Kubernetes details in the Catalog&#x27;s Entity pages needs to have a <code>dependsOn</code> relationship setup. Here&#x27;s a quick example:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#232323"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#232323"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> backstage.io/v1alpha1</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> Component</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">annotations</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token key atrule">backstage.io/kubernetes-id</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> dice</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">roller</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token key atrule">backstage.io/kubernetes-namespace</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> dice</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">roller</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> It rolls dice</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">tags</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> go</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> service</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">lifecycle</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> production</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">owner</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> guest</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">dependsOn</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;resource:my-cluster&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><br></span></code></pre></div></div>
<p>This example assumes it&#x27;s using the default namespace, if that&#x27;s not the case for you then make sure to include it like this: <code>resource:my-namespace/my-cluster</code>.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="config"><code>config</code><a href="#config" class="hash-link" aria-label="Direct link to config" title="Direct link to config" translate="no">​</a></h4>
<p>This cluster locator method will read cluster information from your app-config
(see below).</p>
<h5 class="anchor anchorTargetStickyNavbar_Vzrq" id="clusters"><code>clusters</code><a href="#clusters" class="hash-link" aria-label="Direct link to clusters" title="Direct link to clusters" translate="no">​</a></h5>
<p>Used by the <code>config</code> cluster locator method to construct Kubernetes clients.</p>
<h5 class="anchor anchorTargetStickyNavbar_Vzrq" id="clustersurl"><code>clusters.\*.url</code><a href="#clustersurl" class="hash-link" aria-label="Direct link to clustersurl" title="Direct link to clustersurl" translate="no">​</a></h5>
<p>The base URL to the Kubernetes control plane. Can be found by using the
&quot;Kubernetes master&quot; result from running the <code>kubectl cluster-info</code> command.</p>
<h5 class="anchor anchorTargetStickyNavbar_Vzrq" id="clustersname"><code>clusters.\*.name</code><a href="#clustersname" class="hash-link" aria-label="Direct link to clustersname" title="Direct link to clustersname" translate="no">​</a></h5>
<p>A name to represent this cluster, this must be unique within the <code>clusters</code>
array. Users will see this value in the Software Catalog Kubernetes plugin.</p>
<h5 class="anchor anchorTargetStickyNavbar_Vzrq" id="clusterstitle"><code>clusters.\*.title</code><a href="#clusterstitle" class="hash-link" aria-label="Direct link to clusterstitle" title="Direct link to clusterstitle" translate="no">​</a></h5>
<p>A human-readable name for the cluster. This value will override the <code>name</code> field
for the purposes of display in the catalog.</p>
<h5 class="anchor anchorTargetStickyNavbar_Vzrq" id="clustersauthprovider"><code>clusters.\*.authProvider</code><a href="#clustersauthprovider" class="hash-link" aria-label="Direct link to clustersauthprovider" title="Direct link to clustersauthprovider" translate="no">​</a></h5>
<p>This determines how the Kubernetes client authenticates with the Kubernetes
cluster. Valid values are:</p>





































<table><thead><tr><th>Value</th><th>Description</th></tr></thead><tbody><tr><td><code>aks</code></td><td>This will use a user&#x27;s AKS access token from the <a href="https://backstage.io/docs/auth/microsoft/provider" target="_blank" rel="noopener noreferrer" class="">Microsoft auth provider</a> to access the Kubernetes API on AKS clusters.</td></tr><tr><td><code>aws</code></td><td>This will use AWS credentials to access resources in EKS clusters</td></tr><tr><td><code>azure</code></td><td>This will use <a href="https://docs.microsoft.com/en-us/azure/active-directory/managed-identities-azure-resources/overview" target="_blank" rel="noopener noreferrer" class="">Azure Identity</a> to access resources in clusters</td></tr><tr><td><code>google</code></td><td>This will use a user&#x27;s Google access token from the <a href="https://backstage.io/docs/auth/google/provider" target="_blank" rel="noopener noreferrer" class="">Google auth provider</a> to access the Kubernetes API on GKE clusters.</td></tr><tr><td><code>googleServiceAccount</code></td><td>This will use the Google Cloud service account credentials to access resources in clusters</td></tr><tr><td><code>oidc</code></td><td>This will use <a href="https://kubernetes.io/docs/reference/access-authn-authz/authentication/#openid-connect-tokens" target="_blank" rel="noopener noreferrer" class="">Oidc Tokens</a> to authenticate to the Kubernetes API. When this is used the <code>oidcTokenProvider</code> field should also be set. Please note the cluster must support OIDC, at the time of writing AKS clusters do not support OIDC.</td></tr><tr><td><code>serviceAccount</code></td><td>This will use a Kubernetes <a href="https://kubernetes.io/docs/reference/access-authn-authz/service-accounts-admin/" target="_blank" rel="noopener noreferrer" class="">service account</a> to access the Kubernetes API. When this is used the <code>serviceAccountToken</code> field should also be set, or else Backstage should be running in-cluster.</td></tr></tbody></table>
<p>Check the <a href="https://backstage.io/docs/features/kubernetes/authentication" target="_blank" rel="noopener noreferrer" class="">Kubernetes Authentication</a> section for additional explanation.</p>
<h5 class="anchor anchorTargetStickyNavbar_Vzrq" id="clustersskiptlsverify"><code>clusters.\*.skipTLSVerify</code><a href="#clustersskiptlsverify" class="hash-link" aria-label="Direct link to clustersskiptlsverify" title="Direct link to clustersskiptlsverify" translate="no">​</a></h5>
<p>This determines whether the Kubernetes client verifies the TLS certificate
presented by the API server. Defaults to <code>false</code>.</p>
<h5 class="anchor anchorTargetStickyNavbar_Vzrq" id="clustersskipmetricslookup"><code>clusters.\*.skipMetricsLookup</code><a href="#clustersskipmetricslookup" class="hash-link" aria-label="Direct link to clustersskipmetricslookup" title="Direct link to clustersskipmetricslookup" translate="no">​</a></h5>
<p>This determines whether the Kubernetes client looks up resource metrics
CPU/Memory for pods returned by the API server. Defaults to <code>false</code>.</p>
<h5 class="anchor anchorTargetStickyNavbar_Vzrq" id="clustersserviceaccounttoken-optional"><code>clusters.\*.serviceAccountToken</code> (optional)<a href="#clustersserviceaccounttoken-optional" class="hash-link" aria-label="Direct link to clustersserviceaccounttoken-optional" title="Direct link to clustersserviceaccounttoken-optional" translate="no">​</a></h5>
<p>The service account token to be used when using the <code>serviceAccount</code> auth
provider. Note that, unless you have an effective credential rotation procedure
in place or have a single Kubernetes cluster running both Backstage and all your
services, this auth provider is probably not ideal for production.</p>
<p>Assuming you have already created a service account named <code>SERVICE_ACCOUNT_NAME</code>
in namespace <code>NAMESPACE</code> and it has adequate
<a href="#role-based-access-control" class="">permissions</a>, here are some sample procedures to
procure a long-lived service account token for use with this provider:</p>
<ul>
<li class="">
<p>On versions of Kubernetes <a href="https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.24.md#no-really-you-must-read-this-before-you-upgrade-1" target="_blank" rel="noopener noreferrer" class="">prior to 1.24</a>,
you could get an (automatically-generated) token for a service account with:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#232323"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#232323"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">kubectl </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">-n</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token plain">NAMESPACE</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain"> get secret </span><span class="token variable" style="color:rgb(156, 220, 254)">$(</span><span class="token variable" style="color:rgb(156, 220, 254)">kubectl </span><span class="token variable parameter variable" style="color:rgb(156, 220, 254)">-n</span><span class="token variable" style="color:rgb(156, 220, 254)"> </span><span class="token variable operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token variable" style="color:rgb(156, 220, 254)">NAMESPACE</span><span class="token variable operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token variable" style="color:rgb(156, 220, 254)"> get sa </span><span class="token variable operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token variable" style="color:rgb(156, 220, 254)">SERVICE_ACCOUNT_NAME</span><span class="token variable operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token variable" style="color:rgb(156, 220, 254)"> </span><span class="token variable parameter variable" style="color:rgb(156, 220, 254)">-o</span><span class="token variable operator" style="color:rgb(212, 212, 212)">=</span><span class="token variable" style="color:rgb(156, 220, 254)">json </span><span class="token variable punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token variable" style="color:rgb(156, 220, 254)"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token variable" style="color:rgb(156, 220, 254)"></span><span class="token variable operator" style="color:rgb(212, 212, 212)">|</span><span class="token variable" style="color:rgb(156, 220, 254)"> jq </span><span class="token variable parameter variable" style="color:rgb(156, 220, 254)">-r</span><span class="token variable" style="color:rgb(156, 220, 254)"> </span><span class="token variable string" style="color:rgb(206, 145, 120)">&#x27;.secrets[0].name&#x27;</span><span class="token variable" style="color:rgb(156, 220, 254)">)</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">-o</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain">json </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> jq </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">-r</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;.data[&quot;token&quot;]&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> base64 </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">--decode</span><br></span></code></pre></div></div>
</li>
<li class="">
<p>For Kubernetes 1.24+, as described in <a href="https://kubernetes.io/docs/concepts/configuration/secret/#service-account-token-secrets" target="_blank" rel="noopener noreferrer" class="">this guide</a>,
you can obtain a long-lived token by creating a secret:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#232323"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#232323"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">kubectl apply </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">-f</span><span class="token plain"> - </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;&lt;</span><span class="token string" style="color:rgb(206, 145, 120)">EOF</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token string" style="color:rgb(206, 145, 120)">apiVersion: v1</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token string" style="color:rgb(206, 145, 120)">kind: Secret</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token string" style="color:rgb(206, 145, 120)">metadata:</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token string" style="color:rgb(206, 145, 120)">  name: &lt;SECRET_NAME&gt;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token string" style="color:rgb(206, 145, 120)">  namespace: &lt;NAMESPACE&gt;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token string" style="color:rgb(206, 145, 120)">  annotations:</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token string" style="color:rgb(206, 145, 120)">    kubernetes.io/service-account.name: &lt;SERVICE_ACCOUNT_NAME&gt;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token string" style="color:rgb(206, 145, 120)">type: kubernetes.io/service-account-token</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token string" style="color:rgb(206, 145, 120)">EOF</span><br></span></code></pre></div></div>
<p>waiting for the token controller to populate a token, and retrieving it with:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#232323"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#232323"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">kubectl </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">-n</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token plain">NAMESPACE</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain"> get secret </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token plain">SECRET_NAME</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">-o</span><span class="token plain"> go-template</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;{{.data.token | base64decode}}&#x27;</span><br></span></code></pre></div></div>
</li>
</ul>
<p>If a cluster has <code>authProvider: serviceAccount</code> and the <code>serviceAccountToken</code>
field is omitted, Backstage will ignore the configured URL and certificate data,
instead attempting to access the Kubernetes API via an in-cluster client as in
<a href="https://github.com/kubernetes-client/javascript/blob/master/examples/in-cluster.js" target="_blank" rel="noopener noreferrer" class="">this example</a>.</p>
<h5 class="anchor anchorTargetStickyNavbar_Vzrq" id="clustersoidctokenprovider-optional"><code>clusters.\*.oidcTokenProvider</code> (optional)<a href="#clustersoidctokenprovider-optional" class="hash-link" aria-label="Direct link to clustersoidctokenprovider-optional" title="Direct link to clustersoidctokenprovider-optional" translate="no">​</a></h5>
<p>This field is to be used when using the <code>oidc</code> auth provider. It will use the id tokens
from a configured <a href="https://backstage.io/docs/auth/" target="_blank" rel="noopener noreferrer" class="">backstage auth provider</a> to
authenticate to the cluster. The selected <code>oidcTokenProvider</code> needs to be properly
configured under <code>auth</code> for this to work.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#232323"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#232323"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token key atrule">kubernetes</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">clusterLocatorMethods</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;config&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token key atrule">clusters</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> test</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">cluster</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">          </span><span class="token key atrule">url</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> http</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain">//localhost</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token number" style="color:rgb(181, 206, 168)">8080</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">          </span><span class="token key atrule">authProvider</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> oidc</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">          </span><span class="token key atrule">oidcTokenProvider</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> okta </span><span class="token comment" style="color:rgb(106, 153, 85)"># This value needs to match a config under auth.providers</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token key atrule">auth</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">providers</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token key atrule">okta</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token key atrule">development</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token key atrule">clientId</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain">AUTH_OKTA_CLIENT_ID</span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token key atrule">clientSecret</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain">AUTH_OKTA_CLIENT_SECRET</span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token key atrule">audience</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain">AUTH_OKTA_AUDIENCE</span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><br></span></code></pre></div></div>
<p>The following values are supported out-of-the-box by the frontend: <code>gitlab</code> (the
application whose <code>clientId</code> is used by the auth provider should be granted the
<code>openid</code> scope), <code>google</code>, <code>microsoft</code>, <code>okta</code>, <code>onelogin</code>.</p>
<p>Take note that <code>oidcTokenProvider</code> is just the issuer for the token, you can use any
of these with an OIDC enabled cluster, like using <code>microsoft</code> as the issuer for a EKS
cluster.</p>
<h5 class="anchor anchorTargetStickyNavbar_Vzrq" id="clustersdashboardurl-optional"><code>clusters.\*.dashboardUrl</code> (optional)<a href="#clustersdashboardurl-optional" class="hash-link" aria-label="Direct link to clustersdashboardurl-optional" title="Direct link to clustersdashboardurl-optional" translate="no">​</a></h5>
<p>Specifies the link to the Kubernetes dashboard managing this cluster.</p>
<p>Note that you should specify the app used for the dashboard using the
<code>dashboardApp</code> property, in order to properly format links to kubernetes
resources, otherwise it will assume that you&#x27;re running the standard one.</p>
<p>Note also that this attribute is optional for some kinds of dashboards, such as
GKE, which requires additional parameters specified in the <code>dashboardParameters</code>
option.</p>
<h5 class="anchor anchorTargetStickyNavbar_Vzrq" id="clustersdashboardapp-optional"><code>clusters.\*.dashboardApp</code> (optional)<a href="#clustersdashboardapp-optional" class="hash-link" aria-label="Direct link to clustersdashboardapp-optional" title="Direct link to clustersdashboardapp-optional" translate="no">​</a></h5>
<p>Specifies the app that provides the Kubernetes dashboard.</p>
<p>This will be used for formatting links to kubernetes objects inside the
dashboard.</p>
<p>The supported dashboards are: <code>aks</code>, <code>eks</code>, <code>gke</code>, <code>headlamp</code>, <code>openshift</code>, <code>rancher</code>, <code>standard</code>. However, not all of them are implemented yet, so please contribute!</p>
<p>Note that it will default to the regular dashboard provided by the Kubernetes
project (<code>standard</code>), that can run in any Kubernetes cluster.</p>
<p>Note that for the <code>gke</code> app, you must provide additional information in the
<code>dashboardParameters</code> option.</p>
<p>Note that you can add your own formatter by registering it to the
<code>clusterLinksFormatters</code> dictionary, in the app project.</p>
<p>Example:</p>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#232323"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#232323"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"> clusterLinksFormatters </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;@backstage/plugin-kubernetes&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">clusterLinksFormatters</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token function-variable function" style="color:rgb(220, 220, 170)">myDashboard</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">options</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=&gt;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">...</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><br></span></code></pre></div></div>
<p>See also
<a href="https://github.com/backstage/backstage/tree/master/plugins/kubernetes/src/utils/clusterLinks/formatters" target="_blank" rel="noopener noreferrer" class="">https://github.com/backstage/backstage/tree/master/plugins/kubernetes/src/utils/clusterLinks/formatters</a>
for real examples.</p>
<h5 class="anchor anchorTargetStickyNavbar_Vzrq" id="clustersdashboardparameters-optional"><code>clusters.\*.dashboardParameters</code> (optional)<a href="#clustersdashboardparameters-optional" class="hash-link" aria-label="Direct link to clustersdashboardparameters-optional" title="Direct link to clustersdashboardparameters-optional" translate="no">​</a></h5>
<p>Specifies additional information for the selected <code>dashboardApp</code> formatter.</p>
<p>Note that, even though <code>dashboardParameters</code> is optional, it might be mandatory
for some dashboards, such as GKE.</p>
<h6 class="anchor anchorTargetStickyNavbar_Vzrq" id="required-parameters-for-gke">required parameters for GKE<a href="#required-parameters-for-gke" class="hash-link" aria-label="Direct link to required parameters for GKE" title="Direct link to required parameters for GKE" translate="no">​</a></h6>





















<table><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td><code>projectId</code></td><td>the ID of the GCP project containing your Kubernetes clusters</td></tr><tr><td><code>region</code></td><td>the region of GCP containing your Kubernetes clusters</td></tr><tr><td><code>clusterName</code></td><td>the name of your kubernetes cluster, within your <code>projectId</code> GCP project</td></tr></tbody></table>
<p>Note that the GKE cluster locator can automatically provide the values for the
<code>dashboardApp</code> and <code>dashboardParameters</code> options if you set the
<code>exposeDashboard</code> property to <code>true</code>.</p>
<p>Example:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#232323"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#232323"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token key atrule">kubernetes</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">serviceLocatorMethod</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;multiTenant&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">clusterLocatorMethods</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;config&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token key atrule">clusters</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">url</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> http</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain">//127.0.0.1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token number" style="color:rgb(181, 206, 168)">9999</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">          </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">cluster</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">          </span><span class="token key atrule">dashboardApp</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> gke</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">          </span><span class="token key atrule">dashboardParameters</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            </span><span class="token key atrule">projectId</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">project</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            </span><span class="token key atrule">region</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> us</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">east1</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            </span><span class="token key atrule">clusterName</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">cluster</span><br></span></code></pre></div></div>
<h5 class="anchor anchorTargetStickyNavbar_Vzrq" id="clusterscadata-optional"><code>clusters.\*.caData</code> (optional)<a href="#clusterscadata-optional" class="hash-link" aria-label="Direct link to clusterscadata-optional" title="Direct link to clusterscadata-optional" translate="no">​</a></h5>
<p>Base64-encoded certificate authority bundle in PEM format. The Kubernetes client
will verify that the TLS certificate presented by the API server is signed by
this CA.</p>
<p>This value could be obtained via inspecting the <code>kubeconfig</code> file (usually
at <code>~/.kube/config</code>) under <code>clusters[*].cluster.certificate-authority-data</code>. For
GKE, execute the following command to obtain the value</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#232323"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#232323"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">gcloud container clusters describe &lt;YOUR_CLUSTER_NAME&gt; \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    --zone=&lt;YOUR_COMPUTE_ZONE&gt; \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    --format=&quot;value(masterAuth.clusterCaCertificate)&quot;</span><br></span></code></pre></div></div>
<p>See also
<a href="https://cloud.google.com/kubernetes-engine/docs/how-to/api-server-authentication#environments-without-gcloud" target="_blank" rel="noopener noreferrer" class="">https://cloud.google.com/kubernetes-engine/docs/how-to/api-server-authentication#environments-without-gcloud</a>
for complete docs about GKE without <code>gcloud</code>.</p>
<h5 class="anchor anchorTargetStickyNavbar_Vzrq" id="clusterscafile-optional"><code>clusters.\*.caFile</code> (optional)<a href="#clusterscafile-optional" class="hash-link" aria-label="Direct link to clusterscafile-optional" title="Direct link to clusterscafile-optional" translate="no">​</a></h5>
<p>Filesystem path (on the host where the Backstage process is running) to a
certificate authority bundle in PEM format. The Kubernetes client will verify
that the TLS certificate presented by the API server is signed by this CA. Note
that only clusters defined in the app-config via the <a href="#config" class=""><code>config</code></a>
cluster locator method can be configured in this way.</p>
<h5 class="anchor anchorTargetStickyNavbar_Vzrq" id="clusterscustomresources-optional"><code>clusters.\*.customResources</code> (optional)<a href="#clusterscustomresources-optional" class="hash-link" aria-label="Direct link to clusterscustomresources-optional" title="Direct link to clusterscustomresources-optional" translate="no">​</a></h5>
<p>Configures which <a href="https://kubernetes.io/docs/concepts/extend-kubernetes/api-extension/custom-resources/" target="_blank" rel="noopener noreferrer" class="">custom resources</a> to look for when returning an entity&#x27;s
Kubernetes resources belonging to the cluster. Same specification as <a href="#customresources-optional" class=""><code>customResources</code></a></p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="headlamp"><code>headlamp</code><a href="#headlamp" class="hash-link" aria-label="Direct link to headlamp" title="Direct link to headlamp" translate="no">​</a></h4>
<p>When using <code>headlamp</code> as your dashboard, you have two configuration options:</p>
<ol>
<li class="">External Headlamp instance:</li>
</ol>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#232323"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#232323"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token key atrule">kubernetes</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">clusterLocatorMethods</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;config&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token key atrule">clusters</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">url</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> http</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain">//127.0.0.1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token number" style="color:rgb(181, 206, 168)">9999</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">          </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">cluster</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">          </span><span class="token key atrule">dashboardUrl</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> http</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain">//headlamp.example.com </span><span class="token comment" style="color:rgb(106, 153, 85)"># Your Headlamp instance URL</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">          </span><span class="token key atrule">dashboardApp</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;headlamp&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">          </span><span class="token key atrule">dashboardParameters</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            </span><span class="token key atrule">clusterName</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;my-cluster&#x27;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(106, 153, 85)"># Optional, defaults to &#x27;default&#x27;</span><br></span></code></pre></div></div>
<ol start="2">
<li class="">Internal Headlamp (When using the Headlamp plugin for Backstage):</li>
</ol>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#232323"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#232323"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token key atrule">kubernetes</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">clusterLocatorMethods</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;config&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token key atrule">clusters</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">url</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> http</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain">//127.0.0.1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token number" style="color:rgb(181, 206, 168)">9999</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">          </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">cluster</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">          </span><span class="token key atrule">dashboardApp</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;headlamp&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">          </span><span class="token key atrule">dashboardParameters</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            </span><span class="token key atrule">internal</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            </span><span class="token key atrule">headlampRoute</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;/headlamp&#x27;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(106, 153, 85)"># Optional, defaults to &#x27;/headlamp&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            </span><span class="token key atrule">clusterName</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;my-cluster&#x27;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(106, 153, 85)"># Optional, defaults to &#x27;default&#x27;</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="gke"><code>gke</code><a href="#gke" class="hash-link" aria-label="Direct link to gke" title="Direct link to gke" translate="no">​</a></h4>
<p>This cluster locator is designed to work with Kubernetes clusters running in
<a href="https://cloud.google.com/kubernetes-engine" target="_blank" rel="noopener noreferrer" class="">GKE</a>. It will configure the Kubernetes backend plugin to make requests to
clusters running within a Google Cloud project.</p>
<p>This cluster locator method will use the <code>google</code> authentication mechanism.</p>
<p>The Google Cloud service account to use can be configured through the
<code>GOOGLE_APPLICATION_CREDENTIALS</code> environment variable. Consult the <a href="https://cloud.google.com/docs/authentication/production#linux-or-macos" target="_blank" rel="noopener noreferrer" class="">Google Cloud
docs</a> for more information.</p>
<p>For example:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#232323"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#232323"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;gke&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">projectId</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;gke-clusters&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">region</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;europe-west1&#x27;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(106, 153, 85)"># optional</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">authProvider</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;google&#x27;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(106, 153, 85)"># optional</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">skipTLSVerify</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token boolean important">false</span><span class="token plain"> </span><span class="token comment" style="color:rgb(106, 153, 85)"># optional</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">skipMetricsLookup</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token boolean important">false</span><span class="token plain"> </span><span class="token comment" style="color:rgb(106, 153, 85)"># optional</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">exposeDashboard</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token boolean important">false</span><span class="token plain"> </span><span class="token comment" style="color:rgb(106, 153, 85)"># optional</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">matchingResourceLabels</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token comment" style="color:rgb(106, 153, 85)"># optional</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">key</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;environment&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;production&#x27;</span><br></span></code></pre></div></div>
<p>Will configure the Kubernetes plugin to connect to all GKE clusters in the
project <code>gke-clusters</code> in the region <code>europe-west1</code>.</p>
<p>Note that the GKE cluster locator can automatically provide the values for the
<code>dashboardApp</code> and <code>dashboardParameters</code> options if you enable the
<code>exposeDashboard</code> option.</p>
<h5 class="anchor anchorTargetStickyNavbar_Vzrq" id="projectid"><code>projectId</code><a href="#projectid" class="hash-link" aria-label="Direct link to projectid" title="Direct link to projectid" translate="no">​</a></h5>
<p>The Google Cloud project to look for Kubernetes clusters in.</p>
<h5 class="anchor anchorTargetStickyNavbar_Vzrq" id="region-optional"><code>region</code> (optional)<a href="#region-optional" class="hash-link" aria-label="Direct link to region-optional" title="Direct link to region-optional" translate="no">​</a></h5>
<p>The Google Cloud region to look for Kubernetes clusters in. Defaults to all
regions.</p>
<h5 class="anchor anchorTargetStickyNavbar_Vzrq" id="authprovider-optional"><code>authProvider</code> (optional)<a href="#authprovider-optional" class="hash-link" aria-label="Direct link to authprovider-optional" title="Direct link to authprovider-optional" translate="no">​</a></h5>
<p>Set the authentication method for discovering clusters and gathering information
about resources.</p>
<p>Defaults to <code>google</code> which leverages the logged in user&#x27;s Google OAuth credentials.</p>
<p>Set to <code>googleServiceAccount</code> to leverage
Application Default Credentials (<a href="https://cloud.google.com/docs/authentication/application-default-credentials" target="_blank" rel="noopener noreferrer" class="">https://cloud.google.com/docs/authentication/application-default-credentials</a>).
To use a service account JSON key (not recommended), set the <code>GOOGLE_APPLICATION_CREDENTIALS</code> environment variable
on the Backstage backend to the path of the service account key file.</p>
<h5 class="anchor anchorTargetStickyNavbar_Vzrq" id="skiptlsverify-optional"><code>skipTLSVerify</code> (optional)<a href="#skiptlsverify-optional" class="hash-link" aria-label="Direct link to skiptlsverify-optional" title="Direct link to skiptlsverify-optional" translate="no">​</a></h5>
<p>This determines whether the Kubernetes client verifies the TLS certificate
presented by the API server. Defaults to <code>false</code>.</p>
<h5 class="anchor anchorTargetStickyNavbar_Vzrq" id="skipmetricslookup-optional"><code>skipMetricsLookup</code> (optional)<a href="#skipmetricslookup-optional" class="hash-link" aria-label="Direct link to skipmetricslookup-optional" title="Direct link to skipmetricslookup-optional" translate="no">​</a></h5>
<p>This determines whether the Kubernetes client looks up resource metrics
CPU/Memory for pods returned by the API server. Defaults to <code>false</code>.</p>
<h5 class="anchor anchorTargetStickyNavbar_Vzrq" id="exposedashboard-optional"><code>exposeDashboard</code> (optional)<a href="#exposedashboard-optional" class="hash-link" aria-label="Direct link to exposedashboard-optional" title="Direct link to exposedashboard-optional" translate="no">​</a></h5>
<p>This determines whether the <code>dashboardApp</code> and <code>dashboardParameters</code> should be
automatically configured in order to expose the GKE dashboard from the
Kubernetes plugin.</p>
<p>Defaults to <code>false</code>.</p>
<h5 class="anchor anchorTargetStickyNavbar_Vzrq" id="matchingresourcelabels-optional"><code>matchingResourceLabels</code> (optional)<a href="#matchingresourcelabels-optional" class="hash-link" aria-label="Direct link to matchingresourcelabels-optional" title="Direct link to matchingresourcelabels-optional" translate="no">​</a></h5>
<p>Array of key value labels used to filter out clusters which don&#x27;t have the matching
<a href="https://cloud.google.com/resource-manager/docs/creating-managing-labels" target="_blank" rel="noopener noreferrer" class="">resource labels</a>.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="localkubectlproxy"><code>localKubectlProxy</code><a href="#localkubectlproxy" class="hash-link" aria-label="Direct link to localkubectlproxy" title="Direct link to localkubectlproxy" translate="no">​</a></h4>
<p>This cluster locator method will assume a locally running <a href="https://kubernetes.io/docs/tasks/extend-kubernetes/http-proxy-access-api/#using-kubectl-to-start-a-proxy-server" target="_blank" rel="noopener noreferrer" class=""><code>kubectl proxy</code></a> process using the default port (8001).</p>
<p>NOTE: This cluster locator method is for local development only and should not be used in production.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="custom-kubernetesclusterssupplier">Custom <code>KubernetesClustersSupplier</code><a href="#custom-kubernetesclusterssupplier" class="hash-link" aria-label="Direct link to custom-kubernetesclusterssupplier" title="Direct link to custom-kubernetesclusterssupplier" translate="no">​</a></h4>
<p>If the configuration-based cluster locators do not work for your use-case,
it is also possible to implement a
<a class="" href="/docs/next/features/kubernetes/installation#custom-cluster-discovery">custom <code>KubernetesClustersSupplier</code></a>.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="customresources-optional"><code>customResources</code> (optional)<a href="#customresources-optional" class="hash-link" aria-label="Direct link to customresources-optional" title="Direct link to customresources-optional" translate="no">​</a></h3>
<p>Configures which <a href="https://kubernetes.io/docs/concepts/extend-kubernetes/api-extension/custom-resources/" target="_blank" rel="noopener noreferrer" class="">custom resources</a> to look for by default when returning an entity&#x27;s
Kubernetes resources.</p>
<p><strong>Notes:</strong></p>
<ul>
<li class="">The optional <code>kubernetes.customResources</code> property is overrode by <code>customResources</code> at the <a href="#clusterscustomresources-optional" class="">clusters level</a>.</li>
</ul>
<p>Defaults to empty array. Example:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#232323"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#232323"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token punctuation" style="color:rgb(212, 212, 212)">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token key atrule">kubernetes</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">customResources</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">group</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;argoproj.io&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;v1alpha1&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token key atrule">plural</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;rollouts&#x27;</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="customresourcesgroup"><code>customResources.\*.group</code><a href="#customresourcesgroup" class="hash-link" aria-label="Direct link to customresourcesgroup" title="Direct link to customresourcesgroup" translate="no">​</a></h4>
<p>The custom resource&#x27;s group.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="customresourcesapiversion"><code>customResources.\*.apiVersion</code><a href="#customresourcesapiversion" class="hash-link" aria-label="Direct link to customresourcesapiversion" title="Direct link to customresourcesapiversion" translate="no">​</a></h4>
<p>The custom resource&#x27;s <code>apiVersion</code>.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="customresourcesplural"><code>customResources.\*.plural</code><a href="#customresourcesplural" class="hash-link" aria-label="Direct link to customresourcesplural" title="Direct link to customresourcesplural" translate="no">​</a></h4>
<p>The plural representing the custom resource.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="apiversionoverrides-optional"><code>apiVersionOverrides</code> (optional)<a href="#apiversionoverrides-optional" class="hash-link" aria-label="Direct link to apiversionoverrides-optional" title="Direct link to apiversionoverrides-optional" translate="no">​</a></h3>
<p>Overrides for the API versions used to make requests for the corresponding
objects. If using a legacy Kubernetes version, you may use this config to
override the default API versions to ones that are supported by your cluster.</p>
<p>Example:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#232323"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#232323"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token punctuation" style="color:rgb(212, 212, 212)">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token key atrule">kubernetes</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">apiVersionOverrides</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token key atrule">cronjobs</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;v1beta1&#x27;</span><br></span></code></pre></div></div>
<p>For more information on which API versions are supported by your cluster, please
view the Kubernetes API docs for your Kubernetes version (e.g.
<a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.22/#-strong-api-groups-strong-" target="_blank" rel="noopener noreferrer" class="">API Groups for v1.22</a>
)</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="objecttypes-optional"><code>objectTypes</code> (optional)<a href="#objecttypes-optional" class="hash-link" aria-label="Direct link to objecttypes-optional" title="Direct link to objecttypes-optional" translate="no">​</a></h3>
<p>Overrides for the Kubernetes object types fetched from the cluster. The default object types are:</p>
<ul>
<li class=""><code>pods</code></li>
<li class=""><code>services</code></li>
<li class=""><code>configmaps</code></li>
<li class=""><code>limitranges</code></li>
<li class=""><code>resourcequotas</code></li>
<li class=""><code>deployments</code></li>
<li class=""><code>replicasets</code></li>
<li class=""><code>horizontalpodautoscalers</code></li>
<li class=""><code>jobs</code></li>
<li class=""><code>cronjobs</code></li>
<li class=""><code>ingresses</code></li>
<li class=""><code>statefulsets</code></li>
<li class=""><code>daemonsets</code></li>
</ul>
<p>You may use this config to override the default object types if you only want specific ones.
However, the only additional object type to fetch at the moment is <code>secrets</code>.</p>
<p>Example:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#232323"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#232323"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token punctuation" style="color:rgb(212, 212, 212)">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token key atrule">kubernetes</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">objectTypes</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> configmaps</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> deployments</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> limitranges</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> pods</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> services</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> statefulsets</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> secrets</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="role-based-access-control">Role Based Access Control<a href="#role-based-access-control" class="hash-link" aria-label="Direct link to Role Based Access Control" title="Direct link to Role Based Access Control" translate="no">​</a></h3>
<p>The current RBAC permissions required are read-only cluster wide, the below
Kubernetes manifest describes which objects are required and will ensure
the plugin functions correctly:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#232323"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#232323"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token punctuation" style="color:rgb(212, 212, 212)">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> rbac.authorization.k8s.io/v1</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> ClusterRole</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> backstage</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">read</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">only</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token key atrule">rules</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">apiGroups</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;*&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token key atrule">resources</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> pods</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> pods/log</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> configmaps</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> services</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> deployments</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> replicasets</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> horizontalpodautoscalers</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> ingresses</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> statefulsets</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> limitranges</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> resourcequotas</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> daemonsets</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token key atrule">verbs</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> get</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> list</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> watch</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">apiGroups</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> batch</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token key atrule">resources</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> jobs</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> cronjobs</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token key atrule">verbs</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> get</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> list</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> watch</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">apiGroups</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> metrics.k8s.io</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token key atrule">resources</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> pods</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token key atrule">verbs</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> get</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> list</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="surfacing-your-kubernetes-components-as-part-of-an-entity">Surfacing your Kubernetes components as part of an entity<a href="#surfacing-your-kubernetes-components-as-part-of-an-entity" class="hash-link" aria-label="Direct link to Surfacing your Kubernetes components as part of an entity" title="Direct link to Surfacing your Kubernetes components as part of an entity" translate="no">​</a></h2>
<p>There are two ways to surface your Kubernetes components as part of an entity.
The label selector takes precedence over the annotation/service id.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="common-backstageiokubernetes-id-label">Common <code>backstage.io/kubernetes-id</code> label<a href="#common-backstageiokubernetes-id-label" class="hash-link" aria-label="Direct link to common-backstageiokubernetes-id-label" title="Direct link to common-backstageiokubernetes-id-label" translate="no">​</a></h3>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="adding-the-entity-annotation">Adding the entity annotation<a href="#adding-the-entity-annotation" class="hash-link" aria-label="Direct link to Adding the entity annotation" title="Direct link to Adding the entity annotation" translate="no">​</a></h4>
<p>In order for Backstage to detect that an entity has Kubernetes components, the
following annotation should be added to the entity&#x27;s <code>catalog-info.yaml</code>:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#232323"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#232323"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token key atrule">annotations</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">&#x27;backstage.io/kubernetes-id&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> dice</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">roller</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="adding-the-namespace-annotation">Adding the namespace annotation<a href="#adding-the-namespace-annotation" class="hash-link" aria-label="Direct link to Adding the namespace annotation" title="Direct link to Adding the namespace annotation" translate="no">​</a></h4>
<p>Entities can have the <code>backstage.io/kubernetes-namespace</code> annotation, this will cause the entity&#x27;s Kubernetes resources
to be looked up via that namespace.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#232323"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#232323"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token key atrule">annotations</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">&#x27;backstage.io/kubernetes-namespace&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> dice</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">space</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="labeling-kubernetes-components">Labeling Kubernetes components<a href="#labeling-kubernetes-components" class="hash-link" aria-label="Direct link to Labeling Kubernetes components" title="Direct link to Labeling Kubernetes components" translate="no">​</a></h4>
<p>In order for Kubernetes components to show up in the software catalog as a part
of an entity, Kubernetes components themselves can have the following label:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#232323"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#232323"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token key atrule">&#x27;backstage.io/kubernetes-id&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> &lt;BACKSTAGE_ENTITY_NAME</span><span class="token punctuation" style="color:rgb(212, 212, 212)">&gt;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="label-selector-query-annotation">Label selector query annotation<a href="#label-selector-query-annotation" class="hash-link" aria-label="Direct link to Label selector query annotation" title="Direct link to Label selector query annotation" translate="no">​</a></h3>
<p>You can write your own custom label selector query that Backstage will use to
lookup the objects (similar to <code>kubectl --selector=&quot;your query here&quot;</code>). Review
the
<a href="https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/" target="_blank" rel="noopener noreferrer" class="">labels and selectors Kubernetes documentation</a>
for more info.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#232323"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#232323"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token key atrule">&#x27;backstage.io/kubernetes-label-selector&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;app=my-app,component=front-end&#x27;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="cluster-selection-annotation">Cluster Selection annotation<a href="#cluster-selection-annotation" class="hash-link" aria-label="Direct link to Cluster Selection annotation" title="Direct link to Cluster Selection annotation" translate="no">​</a></h3>
<p>This is applicable only for <code>singleTenant</code> serviceLocatorMethod.</p>
<p>You can now select <code>single</code> kubernetes cluster that the entity is part-of from all your defined kubernetes clusters. To apply this use the following annotation.</p>
<p>SingleTenant Cluster:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#232323"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#232323"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token key atrule">&#x27;backstage.io/kubernetes-cluster&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> dice</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">cluster</span><br></span></code></pre></div></div>
<p>In the example above, we configured the &quot;backstage.io/kubernetes-cluster&quot; annotation on the entity <code>catalog-info.yaml</code> file to specify that the current component is running in a single cluster called &quot;dice-cluster&quot;, so this cluster must have been specified in the <code>app-config.yaml</code>, under the Kubernetes clusters configuration (for more details, see <a href="#configuring-kubernetes-clusters" class=""><code>Configuring Kubernetes clusters</code></a>).</p>
<p>If you do not specify the annotation, by default Backstage fetches from all defined Kubernetes clusters.</p></div></div></div><div class="row"><div class="col col--12"><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/backstage/backstage/edit/master/docs/features/kubernetes/configuration.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></div></div></article><div class="row"><div class="col col--12"><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/next/features/kubernetes/installation"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Installation</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/next/features/kubernetes/authentication"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Kubernetes Authentication</div></a></nav></div></div></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#configuring-kubernetes-clusters" class="table-of-contents__link toc-highlight">Configuring Kubernetes Clusters</a><ul><li><a href="#frontend-optional" class="table-of-contents__link toc-highlight"><code>frontend</code> (optional)</a></li><li><a href="#servicelocatormethod" class="table-of-contents__link toc-highlight"><code>serviceLocatorMethod</code></a></li><li><a href="#clusterlocatormethods" class="table-of-contents__link toc-highlight"><code>clusterLocatorMethods</code></a></li><li><a href="#customresources-optional" class="table-of-contents__link toc-highlight"><code>customResources</code> (optional)</a></li><li><a href="#apiversionoverrides-optional" class="table-of-contents__link toc-highlight"><code>apiVersionOverrides</code> (optional)</a></li><li><a href="#objecttypes-optional" class="table-of-contents__link toc-highlight"><code>objectTypes</code> (optional)</a></li><li><a href="#role-based-access-control" class="table-of-contents__link toc-highlight">Role Based Access Control</a></li></ul></li><li><a href="#surfacing-your-kubernetes-components-as-part-of-an-entity" class="table-of-contents__link toc-highlight">Surfacing your Kubernetes components as part of an entity</a><ul><li><a href="#common-backstageiokubernetes-id-label" class="table-of-contents__link toc-highlight">Common <code>backstage.io/kubernetes-id</code> label</a></li><li><a href="#label-selector-query-annotation" class="table-of-contents__link toc-highlight">Label selector query annotation</a></li><li><a href="#cluster-selection-annotation" class="table-of-contents__link toc-highlight">Cluster Selection annotation</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title"></div><ul class="footer__items clean-list"><li class="footer__item">
                <a href="/" aria-label="Backstage Home">
                  <div class="footerLogo"></div>
                </a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/overview/what-is-backstage">What is Backstage?</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started/">Getting started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/features/software-catalog/">Software Catalog</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/plugins/create-a-plugin">Create a Plugin</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/dls/design">Designing for Backstage</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.gg/backstage-687207715902193673" target="_blank" rel="noopener noreferrer" class="footer__link-item">Support chatroom</a></li><li class="footer__item"><a href="https://github.com/backstage/backstage/blob/master/CONTRIBUTING.md" target="_blank" rel="noopener noreferrer" class="footer__link-item">Contributing</a></li><li class="footer__item"><a href="https://backstage.io/docs/getting-started/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Adopting</a></li><li class="footer__item"><a href="https://spoti.fi/backstagenewsletter" target="_blank" rel="noopener noreferrer" class="footer__link-item">Subscribe to our newsletter</a></li><li class="footer__item"><a href="https://www.cncf.io/projects/" target="_blank" rel="noopener noreferrer" class="footer__link-item">CNCF Incubation</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/backstage/" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item"><a href="https://github.com/cncf/artwork/tree/main/projects/backstage" target="_blank" rel="noopener noreferrer" class="footer__link-item">Assets</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright"><p style="text-align:center"><a href="https://spotify.github.io/">Made with ❤️ at Spotify</a></p><p class="copyright">Copyright © 2026 Backstage Project Authors. All rights reserved. The Linux Foundation has registered trademarks and uses trademarks. For a list of trademarks of The Linux Foundation, please see our Trademark Usage page: <a href="https://www.linuxfoundation.org/trademark-usage">https://www.linuxfoundation.org/trademark-usage</p></div></div></div></footer></div>
<script type="module" src="https://cdn.jsdelivr.net/npm/pushfeedback@latest/dist/pushfeedback/pushfeedback.esm.js"></script>
<script>const feedbackButton=document.createElement("feedback-button");feedbackButton.setAttribute("project","q8w1i6cair"),feedbackButton.setAttribute("modal-position","bottom-right"),feedbackButton.setAttribute("button-style","dark"),feedbackButton.setAttribute("button-position","bottom-right"),feedbackButton.setAttribute("hide-icon","true"),feedbackButton.setAttribute("custom-font","true"),feedbackButton.setAttribute("rating-mode","stars"),feedbackButton.setAttribute("id","default"),feedbackButton.textContent="Feedback",document.body.appendChild(feedbackButton)</script></body>
</html>