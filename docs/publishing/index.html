<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-stable docs-doc-page docs-doc-id-publishing" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">publishing | Backstage Software Catalog and Developer Platform</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://backstage.io/img/sharing-opengraph.png"><meta data-rh="true" name="twitter:image" content="https://backstage.io/img/sharing-opengraph.png"><meta data-rh="true" property="og:url" content="https://backstage.io/docs/publishing"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="stable"><meta data-rh="true" name="docusaurus_tag" content="docs-default-stable"><meta data-rh="true" name="docsearch:version" content="stable"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-stable"><meta data-rh="true" property="og:title" content="publishing | Backstage Software Catalog and Developer Platform"><meta data-rh="true" name="description" content="npm"><meta data-rh="true" property="og:description" content="npm"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://backstage.io/docs/publishing"><link data-rh="true" rel="alternate" href="https://backstage.io/docs/publishing" hreflang="en"><link data-rh="true" rel="alternate" href="https://backstage.io/docs/publishing" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://JCMFNHCHI8-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Backstage Software Catalog and Developer Platform RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Backstage Software Catalog and Developer Platform Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-KSEVGGNCJW"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-KSEVGGNCJW",{})</script>



<link rel="search" type="application/opensearchdescription+xml" title="Backstage Software Catalog and Developer Platform" href="/opensearch.xml">




<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pushfeedback@latest/dist/pushfeedback/pushfeedback.css">


<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=IBM+Plex+Mono:500,700&display=swap">
<script src="https://buttons.github.io/buttons.js"></script>
<script src="https://unpkg.com/medium-zoom@1.0.6/dist/medium-zoom.min.js"></script>
<script src="/js/medium-zoom.js"></script>
<script src="/js/dismissable-banner.js"></script>
<script src="/js/scroll-nav-to-view-in-docs.js"></script><link rel="stylesheet" href="/assets/css/styles.a6a6a0a6.css">
<script src="/assets/js/runtime~main.43487e4c.js" defer="defer"></script>
<script src="/assets/js/main.8d0200c2.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"dark"),document.documentElement.setAttribute("data-theme-choice",t||"dark")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo-black.svg" alt="Backstage Software Catalog and Developer Platform" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="Backstage Software Catalog and Developer Platform" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a class="navbar__item navbar__link" href="/docs/overview/what-is-backstage">Docs</a><a class="navbar__item navbar__link" href="/plugins">Plugins</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Reference</a><ul class="dropdown__menu"><li><a href="https://backstage.io/api/stable" target="_self" rel="noopener noreferrer" class="dropdown__link">Stable (v1.47.0)<svg width="12" height="12" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li><a href="https://backstage.io/api/next" target="_self" rel="noopener noreferrer" class="dropdown__link">Next<svg width="12" height="12" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><a class="navbar__item navbar__link" href="/docs/releases/v1.47.0">Releases</a><a class="navbar__item navbar__link" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/demos">Demos</a><a class="navbar__item navbar__link" href="/community">Community</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/backstage/backstage" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><a href="https://discord.gg/backstage-687207715902193673" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-discord-link" aria-label="Discord community"></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/publishing">Stable</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/next/publishing">Next</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/publishing">Stable</a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Meta+k)" aria-keyshortcuts="Meta+k"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 24 24" aria-hidden="true"><circle cx="11" cy="11" r="8" stroke="currentColor" fill="none" stroke-width="1.4"></circle><path d="m21 21-4.3-4.3" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><main class="docMainContainer_TBSr docMainContainerEnhanced_lQrH"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_xLCN"><div class="docItemContainer_jfFK"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>publishing</h1></header><div class="row"><div class="col col--12 markdown"><h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="npm">npm<a href="#npm" class="hash-link" aria-label="Direct link to npm" title="Direct link to npm" translate="no">​</a></h2>
<p>npm packages are published through CI/CD in the
<a href="https://github.com/backstage/backstage/blob/master/.github/workflows/deploy_packages.yml" target="_blank" rel="noopener noreferrer" class=""><code>.github/workflows/deploy_packages.yml</code></a>
workflow. Every commit that is merged to master will be checked for new versions
of all public packages, and any new versions will automatically be published to
npm.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="creating-a-new-release">Creating a new release<a href="#creating-a-new-release" class="hash-link" aria-label="Direct link to Creating a new release" title="Direct link to Creating a new release" translate="no">​</a></h3>
<p>Releases are handled by changesets and trigger whenever the &quot;Version Packages&quot;
PR is merged. This is typically done every Tuesday around noon CET.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="next-line-release-process">Next Line Release Process<a href="#next-line-release-process" class="hash-link" aria-label="Direct link to Next Line Release Process" title="Direct link to Next Line Release Process" translate="no">​</a></h2>
<ul>
<li class="">PR Checks: Notify the teams &amp; ensure there are no outstanding PRs pending to be merged for this version. This should be done in time to ensure a smooth release day. If there are any, reach out to maintainers and relevant owners of the affected code reminding them of the deadline for the release.</li>
<li class="">Lock main branch
<ul>
<li class="">Lock the main branch to prevent any new merges by other maintainers. Do not unlock the main branch until the release was published successfully</li>
<li class="">Core maintainers can still merge last PRs using their admin override including the Version Packages PR</li>
<li class="">Note: Admin rights are required to lock the branch. If you lack the necessary permissions, contact a core maintainer to perform this action on your behalf.</li>
</ul>
</li>
<li class="">Check <a href="https://github.com/backstage/backstage/pulls?q=is%3Aopen+is%3Apr+in%3Atitle+%22Version+Packages+%28next%29%22" target="_blank" rel="noopener noreferrer" class=""><code>Version Packages (next)</code> Pull Request</a>
<ul>
<li class="">Verify the version we are shipping is correct, by looking at the version packages PR title. It should be &quot;Version Packages (next)&quot;</li>
<li class="">Check <code>pre.json</code> in <a href="https://github.com/backstage/backstage/blob/master/.changeset" target="_blank" rel="noopener noreferrer" class="">the <code>.changeset</code> folder</a> - it should have <code>&quot;mode&quot;: &quot;pre&quot;</code> near the top. If you encounter <code>&quot;mode&quot;: &quot;exit&quot;</code> or if the file doesn&#x27;t exist, it indicates a mainline release.</li>
</ul>
</li>
<li class="">Verify that there are no active/unfinished <code>sync_version-packages</code> actions running (<a href="https://github.com/backstage/backstage/actions/workflows/sync_version-packages.yml" target="_blank" rel="noopener noreferrer" class="">https://github.com/backstage/backstage/actions/workflows/sync_version-packages.yml</a>)
<ul>
<li class="">Locking the main branch will prevent new ones to be created, but be sure to check for running actions again after unlocking, since it may cause pending auto-merge PRs to be merged.</li>
</ul>
</li>
<li class="">Check <a href="https://github.com/backstage/backstage/pulls?q=is%3Aopen+is%3Apr+in%3Atitle+%22Version+Packages+%28next%29%22" target="_blank" rel="noopener noreferrer" class=""><code>Version Packages (next)</code> Pull Request</a> for sufficient approval to be merged
<ul>
<li class="">Check generated <code>changelog</code> in the changed files of the pull request under <code>docs/releases</code> to see if there are any unexpected major bumps e.g. by searching the file</li>
<li class="">Review &amp; approve changes</li>
<li class="">Reach out to core maintainer to merge the pull request</li>
<li class="">Heads-up: The microsite building step can be skipped as long as the <code>prettier</code> task passes &amp; everything else looks green</li>
</ul>
</li>
</ul>
<p>Merging the <code>Version Packages (next)</code> Pull Request will trigger the deployment workflows. Follow along the <a href="https://github.com/backstage/backstage/actions/workflows/deploy_packages.yml" target="_blank" rel="noopener noreferrer" class="">deployment workflow</a>. If you notice flakiness (e.g. if the build is flaky or if the release step runs into an error with releasing to npm) just restart the workflow.</p>
<p>When the release is ready to be published, maintainers will be notified in the private <code>#maintainers</code> channel on the Backstage Discord Server. They will then start the publishing workflow on the publishing workflows page linked in the notification message. On the publishing workflows page there is a dropdown menu called &quot;Run workflow&quot;, this opens a form where the person responsible for the release should paste the SHA received in the Discord notification and click to run the workflow.</p>
<p>Congratulations on the release! There should be now a post in the <a href="https://discord.com/channels/687207715902193673/705123584468582400" target="_blank" rel="noopener noreferrer" class=""><code>#announcements</code> channel</a> in Discord linking to the release tag - check if links &amp; tag look as expected. Once the notification has gone out on Discord you can unlock the main branch &amp; the release is complete.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="main-line-release-process">Main Line Release Process<a href="#main-line-release-process" class="hash-link" aria-label="Direct link to Main Line Release Process" title="Direct link to Main Line Release Process" translate="no">​</a></h2>
<p>Additional steps for the main line release</p>
<ul>
<li class=""><a href="#switching-release-modes" class="">Switch Release Mode</a> to exit pre-release mode. This can be done at any time after the last Next Line Release.
<ul>
<li class="">Check <code>.changeset/pre.json</code>  if the <code>mode</code> is set to <code>exit</code>. If you encounter <code>mode: &quot;pre&quot;</code> it indicates a next line release.</li>
</ul>
</li>
<li class="">Check <a href="https://github.com/backstage/backstage/pulls?q=is%3Aopen+is%3Apr+in%3Atitle+%22Version+Packages" target="_blank" rel="noopener noreferrer" class=""><code>Version Packages</code> Pull Request</a>
<ul>
<li class="">Check for mentions of &quot;major&quot; &amp; &quot;breaking&quot; and if they are expected in the current release</li>
<li class="">Verify the version we are shipping is correct</li>
</ul>
</li>
<li class="">Create Release Notes
<ul>
<li class="">There exists a <a class="" href="/docs/.release-notes-template.md">release notes template</a> for creating the release notes. It can already be created after the last main line release to keep track of major changes during the month</li>
<li class="">The content is picked by relevancy showcasing the work of the community during the month of the release</li>
<li class="">Mention newly added packages or features</li>
<li class="">Mention any security fixes</li>
</ul>
</li>
<li class="">Create Release Notes PR
<ul>
<li class="">Add the release note file as <a class="" href="/docs/releases"><code>/docs/releases/vx.y.0.md</code></a></li>
<li class="">Finally copy the content, without the metadata header, into the description of the <a href="https://github.com/backstage/backstage/pulls?q=is%3Aopen+is%3Apr+in%3Atitle+%22Version+Packages" target="_blank" rel="noopener noreferrer" class=""><code>Version Packages</code> Pull Request</a></li>
</ul>
</li>
</ul>
<p>Once the release has been published edit the newly created release in the <a href="https://github.com/backstage/backstage/releases" target="_blank" rel="noopener noreferrer" class="">GitHub repository</a> and replace the text content with the release notes.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="switching-release-modes">Switching Release Modes<a href="#switching-release-modes" class="hash-link" aria-label="Direct link to Switching Release Modes" title="Direct link to Switching Release Modes" translate="no">​</a></h2>
<ul>
<li class="">To enter pre-release mode: <code>yarn changeset pre enter next</code> &amp; create PR + merge changes</li>
<li class="">To exit pre-release mode: <code>yarn changeset pre exit</code> &amp; create PR + merge changes
<ul>
<li class="">Has to be done before the mainline release</li>
</ul>
</li>
<li class="">It&#x27;s not time critical; Affects the next release happening</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="emergency-release-process">Emergency Release Process<a href="#emergency-release-process" class="hash-link" aria-label="Direct link to Emergency Release Process" title="Direct link to Emergency Release Process" translate="no">​</a></h2>
<p><strong>This emergency release process is intended only for the Backstage
maintainers.</strong></p>
<p>Given one or more PRs towards master that we want to create a patch release for, add them to the patch release queue by running the following command for each PR:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#232323"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#232323"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token function" style="color:rgb(220, 220, 170)">yarn</span><span class="token plain"> patch-pr </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token plain">pr-number</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token plain">description</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><br></span></code></pre></div></div>
<p>This creates a patch file in the <code>.patches/</code> directory (e.g., <code>.patches/pr-12345.txt</code>) containing the description of the fix. The <a href="https://github.com/backstage/backstage/blob/master/.github/workflows/sync_patch-release.yml" target="_blank" rel="noopener noreferrer" class="">sync_patch-release.yml</a> workflow will automatically detect these patch files and create or update a &quot;Patch Release&quot; PR.</p>
<p>The workflow will:</p>
<ul>
<li class="">Automatically create a patch release PR if one doesn&#x27;t exist</li>
<li class="">Update the existing PR if patch files are added, modified, or removed</li>
<li class="">Close and delete the PR branch if all patch files are removed</li>
</ul>
<p>Once the &quot;Patch Release&quot; PR has been approved and merged, the patch release will be automatically created. The patch files will be automatically removed from the master branch after the patch release is merged. From here the patch release process is the same as the usual release process, starting with the notification in the <code>#maintainers</code> channel on Discord.</p>
<p>If the above process fails, you can fall back to the manual process documented below, or run the <code>./scripts/patch-release-for-pr.js &lt;pr-number&gt; &lt;pr-number-2&gt; ...</code> script to manually create a patch release PR.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="old-process">Old Process<a href="#old-process" class="hash-link" aria-label="Direct link to Old Process" title="Direct link to Old Process" translate="no">​</a></h3>
<p>This is the old and manual process that we used before the patch script, provided here as a reference:</p>
<p>For this example we will be using the <code>@backstage/plugin-foo</code> package as an
example and assume that it is currently version <code>6.5.0</code> in the master branch.</p>
<p>In the event of a severe bug being introduced in version <code>6.5.0</code> of the
<code>@backstage/plugin-foo</code> released in the <code>v1.18.0</code> Backstage release, the following
process is used to release an emergency fix as version <code>6.5.1</code> in the patch release <code>v1.18.1</code>:</p>
<ul class="contains-task-list containsTaskList_mC6p">
<li class="task-list-item">
<p><input type="checkbox" disabled=""> Identify the release or releases that need to be patched. We should always
patch the most recent major or minor main-line release if needed, which in this example
would be <code>v1.18.0</code>. The fix may also need backporting to older major
versions, in which case we will want to patch the main-line release just
before the one that bumped the package to each new major version.</p>
</li>
<li class="task-list-item">
<p><input type="checkbox" disabled=""> Repeat the following steps for each release that needs to be patched:</p>
<ul class="contains-task-list containsTaskList_mC6p">
<li class="task-list-item">
<p><input type="checkbox" disabled=""> Make sure a patch branch exists for the release that is being patched.
If a patch already exists, reuse the existing branch. The branch <strong>must
always</strong> be named exactly <code>patch/&lt;release&gt;</code>.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#232323"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#232323"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token function" style="color:rgb(220, 220, 170)">git</span><span class="token plain"> checkout v1.18.0</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token function" style="color:rgb(220, 220, 170)">git</span><span class="token plain"> checkout </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">-b</span><span class="token plain"> patch/v1.18.0</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token function" style="color:rgb(220, 220, 170)">git</span><span class="token plain"> push --set-upstream origin patch/v1.18.0</span><br></span></code></pre></div></div>
</li>
<li class="task-list-item">
<p><input type="checkbox" disabled=""> With the <code>patch/v1.18.0</code> branch as a base, create a new
branch for your fix. This branch can be named anything, but the
following naming pattern may be suitable:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#232323"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#232323"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token function" style="color:rgb(220, 220, 170)">git</span><span class="token plain"> checkout </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">-b</span><span class="token plain"> </span><span class="token variable" style="color:rgb(156, 220, 254)">${</span><span class="token variable environment constant" style="color:rgb(100, 102, 149)">USER</span><span class="token variable" style="color:rgb(156, 220, 254)">}</span><span class="token plain">/plugin-foo-v1.18.0-fix</span><br></span></code></pre></div></div>
</li>
<li class="task-list-item">
<p><input type="checkbox" disabled=""> Create a single commit that applies fix, nothing else.</p>
</li>
<li class="task-list-item">
<p><input type="checkbox" disabled=""> Create a changeset for the affected package(s), then run <code>yarn release</code> in the root
of the repo in order to convert your changeset into package version bumps and changelog entries.
Commit these changes as a second <code>&quot;Generated release&quot;</code> commit.</p>
</li>
<li class="task-list-item">
<p><input type="checkbox" disabled=""> Create PR towards the base branch (<code>patch/v1.18.0</code>) containing the two commits.</p>
<ul class="contains-task-list containsTaskList_mC6p">
<li class="task-list-item"><input type="checkbox" disabled=""> Add a PR body, it will be used as the release description. Typically something like &quot;This release fixes ...&quot;.</li>
</ul>
</li>
<li class="task-list-item">
<p><input type="checkbox" disabled=""> Review/Merge the PR into <code>patch/v1.18.0</code>. This will automatically trigger a release.</p>
</li>
</ul>
</li>
<li class="task-list-item">
<p><input type="checkbox" disabled=""> Look up the new version of our package in the patch PR as well as the new release
version, these can be found in the package <code>package.json</code> and the root <code>package.json</code>, and
will in this case be <code>6.5.1</code> and <code>v1.18.1</code>. You will need these versions later.</p>
</li>
<li class="task-list-item">
<p><input type="checkbox" disabled=""> Make sure you have the latest versions of the patch branch fetched, after merging the PR: <code>git fetch</code>.</p>
</li>
<li class="task-list-item">
<p><input type="checkbox" disabled=""> Once fixes have been created for each release, the fix should be applied to the
master branch as well. Create a PR that contains the following:</p>
<ul class="contains-task-list containsTaskList_mC6p">
<li class="task-list-item"><input type="checkbox" disabled=""> The fix, which you can likely cherry-pick from your patch branch: <code>git cherry-pick origin/patch/v1.18.0^</code></li>
<li class="task-list-item"><input type="checkbox" disabled=""> An updated <code>CHANGELOG.md</code> of all patched packages from the tip of the patch branch, <code>git checkout origin/patch/v1.18.0 -- {packages,plugins}/*/CHANGELOG.md</code>. Note that if the patch happens after any next-line releases you&#x27;ll need to restore those entries in the changelog, placing the patch release entry beneath any next-line release entries.</li>
<li class="task-list-item"><input type="checkbox" disabled=""> A changeset with the message &quot;Applied the fix from version <code>6.5.1</code> of this package, which is part of the <code>v1.18.1</code> release of Backstage.&quot;</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="troubleshooting">Troubleshooting<a href="#troubleshooting" class="hash-link" aria-label="Direct link to Troubleshooting" title="Direct link to Troubleshooting" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="when-the-release-workflow-is-not-triggered-for-some-reason-such-as-a-github-incident">When the release workflow is not triggered for some reason, such as a GitHub incident<a href="#when-the-release-workflow-is-not-triggered-for-some-reason-such-as-a-github-incident" class="hash-link" aria-label="Direct link to When the release workflow is not triggered for some reason, such as a GitHub incident" title="Direct link to When the release workflow is not triggered for some reason, such as a GitHub incident" translate="no">​</a></h3>
<p>Ask one of the maintainers to trigger <a href="https://github.com/backstage/backstage/actions/workflows/deploy_packages.yml" target="_blank" rel="noopener noreferrer" class="">the Deploy packages</a> workflow with the &quot;Unconditionally trigger the release job to run&quot; checkbox set, on the <code>master</code> branch. Please validate first that nothing substantial has been pushed to master since the original failed release attempt! For this reason, it is wise to have the master branch locked until each release has gone through.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="the-release-successfully-published-packages-but-failed-when-finalizing-the-release">The release successfully published packages but failed when finalizing the release<a href="#the-release-successfully-published-packages-but-failed-when-finalizing-the-release" class="hash-link" aria-label="Direct link to The release successfully published packages but failed when finalizing the release" title="Direct link to The release successfully published packages but failed when finalizing the release" translate="no">​</a></h3>
<p>If it&#x27;s an intermittent failure then it is safe to re-trigger the release workflow again.</p>
<p>If re-triggering doesn&#x27;t or won&#x27;t help, the following steps can be taken to complete the release:</p>
<ul>
<li class="">
<p>Manually create a git tag for the release if it doesn&#x27;t already exist</p>
</li>
<li class="">
<p>Manually create a <a href="https://github.com/backstage/backstage/releases/new" target="_blank" rel="noopener noreferrer" class="">new GitHub release</a>.</p>
</li>
<li class="">
<p>Trigger the repository dispatch workflow using the following request, replace <code>&lt;VERSION&gt;</code> with the release version <strong>without</strong> the <code>v</code> prefix:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#232323"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#232323"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token function" style="color:rgb(220, 220, 170)">curl</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">-L</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">-X</span><span class="token plain"> POST </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">-H</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;Accept: application/vnd.github+json&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">-H</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;Authorization: Bearer </span><span class="token string variable" style="color:rgb(156, 220, 254)">$(</span><span class="token string variable" style="color:rgb(156, 220, 254)">gh auth token</span><span class="token string variable" style="color:rgb(156, 220, 254)">)</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">-H</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;X-GitHub-Api-Version: 2022-11-28&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  https://api.github.com/repos/backstage/backstage/dispatches </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">-d</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;{&quot;event_type&quot;:&quot;release-published&quot;,&quot;client_payload&quot;:{&quot;version&quot;:&quot;&lt;VERSION&gt;&quot;}}&#x27;</span><br></span></code></pre></div></div>
</li>
<li class="">
<p>Manually post a message on Discord in the #announcements channel</p>
</li>
</ul></div></div></div><div class="row"><div class="col col--12"><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/backstage/backstage/edit/master/docs/publishing.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></div></div></article><div class="row"><div class="col col--12"><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"></nav></div></div></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#npm" class="table-of-contents__link toc-highlight">npm</a><ul><li><a href="#creating-a-new-release" class="table-of-contents__link toc-highlight">Creating a new release</a></li></ul></li><li><a href="#next-line-release-process" class="table-of-contents__link toc-highlight">Next Line Release Process</a></li><li><a href="#main-line-release-process" class="table-of-contents__link toc-highlight">Main Line Release Process</a></li><li><a href="#switching-release-modes" class="table-of-contents__link toc-highlight">Switching Release Modes</a></li><li><a href="#emergency-release-process" class="table-of-contents__link toc-highlight">Emergency Release Process</a><ul><li><a href="#old-process" class="table-of-contents__link toc-highlight">Old Process</a></li></ul></li><li><a href="#troubleshooting" class="table-of-contents__link toc-highlight">Troubleshooting</a><ul><li><a href="#when-the-release-workflow-is-not-triggered-for-some-reason-such-as-a-github-incident" class="table-of-contents__link toc-highlight">When the release workflow is not triggered for some reason, such as a GitHub incident</a></li><li><a href="#the-release-successfully-published-packages-but-failed-when-finalizing-the-release" class="table-of-contents__link toc-highlight">The release successfully published packages but failed when finalizing the release</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title"></div><ul class="footer__items clean-list"><li class="footer__item">
                <a href="/" aria-label="Backstage Home">
                  <div class="footerLogo"></div>
                </a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/overview/what-is-backstage">What is Backstage?</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started/">Getting started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/features/software-catalog/">Software Catalog</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/plugins/create-a-plugin">Create a Plugin</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/dls/design">Designing for Backstage</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.gg/backstage-687207715902193673" target="_blank" rel="noopener noreferrer" class="footer__link-item">Support chatroom</a></li><li class="footer__item"><a href="https://github.com/backstage/backstage/blob/master/CONTRIBUTING.md" target="_blank" rel="noopener noreferrer" class="footer__link-item">Contributing</a></li><li class="footer__item"><a href="https://backstage.io/docs/getting-started/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Adopting</a></li><li class="footer__item"><a href="https://spoti.fi/backstagenewsletter" target="_blank" rel="noopener noreferrer" class="footer__link-item">Subscribe to our newsletter</a></li><li class="footer__item"><a href="https://www.cncf.io/projects/" target="_blank" rel="noopener noreferrer" class="footer__link-item">CNCF Incubation</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/backstage/" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item"><a href="https://github.com/cncf/artwork/tree/main/projects/backstage" target="_blank" rel="noopener noreferrer" class="footer__link-item">Assets</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright"><p style="text-align:center"><a href="https://spotify.github.io/">Made with ❤️ at Spotify</a></p><p class="copyright">Copyright © 2026 Backstage Project Authors. All rights reserved. The Linux Foundation has registered trademarks and uses trademarks. For a list of trademarks of The Linux Foundation, please see our Trademark Usage page: <a href="https://www.linuxfoundation.org/trademark-usage">https://www.linuxfoundation.org/trademark-usage</p></div></div></div></footer></div>
<script type="module" src="https://cdn.jsdelivr.net/npm/pushfeedback@latest/dist/pushfeedback/pushfeedback.esm.js"></script>
<script>const feedbackButton=document.createElement("feedback-button");feedbackButton.setAttribute("project","q8w1i6cair"),feedbackButton.setAttribute("modal-position","bottom-right"),feedbackButton.setAttribute("button-style","dark"),feedbackButton.setAttribute("button-position","bottom-right"),feedbackButton.setAttribute("hide-icon","true"),feedbackButton.setAttribute("custom-font","true"),feedbackButton.setAttribute("rating-mode","stars"),feedbackButton.setAttribute("id","default"),feedbackButton.textContent="Feedback",document.body.appendChild(feedbackButton)</script></body>
</html>