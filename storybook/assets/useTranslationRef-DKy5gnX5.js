import{r as o}from"./index-D8-PC79C.js";import{t as l,e as m}from"./TranslationApi-CV0OlCW4.js";import{u as d}from"./ApiRef-ByCJBjX1.js";const f=new WeakSet,h=e=>{const u=d(m),t=d(l),[a,b]=o.useState(()=>t.getTranslation(e)),n=o.useMemo(()=>t.translation$(e),[t,e]),c=o.useCallback(s=>{if(!f.has(e)){const r=`Failed to load translation resource '${e.id}'; caused by ${s}`;console.error(r),u.post(new Error(r)),f.add(e)}},[u,e]);o.useEffect(()=>{const s=n.subscribe({next(r){r.ready&&b(r)},error(r){c(r)}});return()=>{s.unsubscribe()}},[n,c]);const p=o.useRef(!0);if(o.useEffect(()=>{p.current?p.current=!1:b(t.getTranslation(e))},[t,e]),!a.ready)throw new Promise(s=>{const r=n.subscribe({next(i){i.ready&&(r.unsubscribe(),s())},error(i){r.unsubscribe(),c(i),s()}})});return{t:a.t}};export{h as u};
