import{b as s}from"./useObjectRef-BPFp5snO.js";import{r as c,b as f}from"./iframe-M9O-K8SB.js";function m(t,n=!0){let[i,a]=c.useState(!0),e=i&&n;return s(()=>{if(e&&t.current&&"getAnimations"in t.current)for(let r of t.current.getAnimations())r instanceof CSSTransition&&r.cancel()},[t,e]),o(t,e,c.useCallback(()=>a(!1),[])),e}function d(t,n){let[i,a]=c.useState(n?"open":"closed");switch(i){case"open":n||a("exiting");break;case"closed":case"exiting":n&&a("open");break}let e=i==="exiting";return o(t,e,c.useCallback(()=>{a(r=>r==="exiting"?"closed":r)},[])),e}function o(t,n,i){s(()=>{if(n&&t.current){if(!("getAnimations"in t.current)){i();return}let a=t.current.getAnimations();if(a.length===0){i();return}let e=!1;return Promise.all(a.map(r=>r.finished)).then(()=>{e||f.flushSync(()=>{i()})}).catch(()=>{}),()=>{e=!0}}},[t,n,i])}export{m as $,d as a};
