import{g as T}from"./index-CTjT7uj6.js";var y={};Object.defineProperty(y,"__esModule",{value:!0});y.Observable=void 0;const g=r=>!!Symbol[r],_=r=>g(r)?Symbol[r]:"@@"+r,q=_("iterator"),m=_("observable"),E=_("species");function p(r,e){let n=r[e];if(n!=null){if(typeof n!="function")throw new TypeError(n+" is not a function");return n}}function h(r){let e=r.constructor;return e!==void 0&&(e=e[E],e===null&&(e=void 0)),e!==void 0?e:f}function C(r){return r instanceof f}function a(r){a.log?a.log(r):setTimeout(()=>{throw r})}function d(r){Promise.resolve().then(()=>{try{r()}catch(e){a(e)}})}function x(r){let e=r._cleanup;if(e!==void 0&&(r._cleanup=void 0,!!e))try{if(typeof e=="function")e();else{let n=p(e,"unsubscribe");n&&n.call(e)}}catch(n){a(n)}}function w(r){r._observer=void 0,r._queue=void 0,r._state="closed"}function j(r){let e=r._queue;if(e){r._queue=void 0,r._state="ready";for(let n=0;n<e.length&&(S(r,e[n].type,e[n].value),r._state!=="closed");++n);}}function S(r,e,n){r._state="running";let i=r._observer;try{let t=p(i,e);switch(e){case"next":t&&t.call(i,n);break;case"error":if(w(r),t)t.call(i,n);else throw n;break;case"complete":w(r),t&&t.call(i);break}}catch(t){a(t)}r._state==="closed"?x(r):r._state==="running"&&(r._state="ready")}function b(r,e,n){if(r._state!=="closed"){if(r._state==="buffering"){r._queue.push({type:e,value:n});return}if(r._state!=="ready"){r._state="buffering",r._queue=[{type:e,value:n}],d(()=>j(r));return}S(r,e,n)}}class k{constructor(e,n){this._cleanup=void 0,this._observer=e,this._queue=void 0,this._state="initializing";let i=this,t={get closed(){return i._state==="closed"},next(o){b(i,"next",o)},error(o){b(i,"error",o)},complete(){b(i,"complete")}};try{this._cleanup=n.call(void 0,t)}catch(o){t.error(o)}this._state==="initializing"&&(this._state="ready")}get closed(){return this._state==="closed"}unsubscribe(){this._state!=="closed"&&(w(this),x(this))}}class f{constructor(e){if(!(this instanceof f))throw new TypeError("Observable cannot be called as a function");if(typeof e!="function")throw new TypeError("Observable initializer must be a function");this._subscriber=e}subscribe(e){return(typeof e!="object"||e===null)&&(e={next:e,error:arguments[1],complete:arguments[2]}),new k(e,this._subscriber)}forEach(e){return new Promise((n,i)=>{if(typeof e!="function"){i(new TypeError(e+" is not a function"));return}function t(){o.unsubscribe(),n()}let o=this.subscribe({next(l){try{e(l,t)}catch(c){i(c),o.unsubscribe()}},error:i,complete:n})})}map(e){if(typeof e!="function")throw new TypeError(e+" is not a function");let n=h(this);return new n(i=>this.subscribe({next(t){try{t=e(t)}catch(o){return i.error(o)}i.next(t)},error(t){i.error(t)},complete(){i.complete()}}))}filter(e){if(typeof e!="function")throw new TypeError(e+" is not a function");let n=h(this);return new n(i=>this.subscribe({next(t){try{if(!e(t))return}catch(o){return i.error(o)}i.next(t)},error(t){i.error(t)},complete(){i.complete()}}))}reduce(e){if(typeof e!="function")throw new TypeError(e+" is not a function");let n=h(this),i=arguments.length>1,t=!1,l=arguments[1];return new n(c=>this.subscribe({next(u){let s=!t;if(t=!0,!s||i)try{l=e(l,u)}catch(O){return c.error(O)}else l=u},error(u){c.error(u)},complete(){if(!t&&!i)return c.error(new TypeError("Cannot reduce an empty sequence"));c.next(l),c.complete()}}))}async all(){let e=[];return await this.forEach(n=>e.push(n)),e}concat(...e){let n=h(this);return new n(i=>{let t,o=0;function l(c){t=c.subscribe({next(u){i.next(u)},error(u){i.error(u)},complete(){o===e.length?(t=void 0,i.complete()):l(n.from(e[o++]))}})}return l(this),()=>{t&&(t.unsubscribe(),t=void 0)}})}flatMap(e){if(typeof e!="function")throw new TypeError(e+" is not a function");let n=h(this);return new n(i=>{let t=[],o=this.subscribe({next(c){if(e)try{c=e(c)}catch(s){return i.error(s)}let u=n.from(c).subscribe({next(s){i.next(s)},error(s){i.error(s)},complete(){let s=t.indexOf(u);s>=0&&t.splice(s,1),l()}});t.push(u)},error(c){i.error(c)},complete(){l()}});function l(){o.closed&&t.length===0&&i.complete()}return()=>{t.forEach(c=>c.unsubscribe()),o.unsubscribe()}})}[m](){return this}static from(e){let n=typeof this=="function"?this:f;if(e==null)throw new TypeError(e+" is not an object");let i=p(e,m);if(i){let t=i.call(e);if(Object(t)!==t)throw new TypeError(t+" is not an object");return C(t)&&t.constructor===n?t:new n(o=>t.subscribe(o))}if(g("iterator")&&(i=p(e,q),i))return new n(t=>{d(()=>{if(!t.closed){for(let o of i.call(e))if(t.next(o),t.closed)return;t.complete()}})});if(Array.isArray(e))return new n(t=>{d(()=>{if(!t.closed){for(let o=0;o<e.length;++o)if(t.next(e[o]),t.closed)return;t.complete()}})});throw new TypeError(e+" is not observable")}static of(...e){let n=typeof this=="function"?this:f;return new n(i=>{d(()=>{if(!i.closed){for(let t=0;t<e.length;++t)if(i.next(e[t]),i.closed)return;i.complete()}})})}static get[E](){return this}}y.Observable=f;Object.defineProperty(f,Symbol("extensions"),{value:{symbol:m,hostReportError:a},configurable:!0});var z=y.Observable;const I=T(z);export{I as O};
