import{j as I}from"./jsx-runtime-hv06LKfz.js";import{r as e}from"./index-D8-PC79C.js";import{c as Z}from"./clsx-B-dksMZM.js";import{u as J}from"./useStyles-Dc-DqJ_c.js";import{u as xe,a as D,m as Q,b as ee,c as se,d as le}from"./useBaseUiId-D_SK3tu4.js";const ue=e.createContext(void 0);function B(){const o=e.useContext(ue);if(o===void 0)throw new Error("Base UI: ScrollAreaRootContext is missing. ScrollArea parts must be placed within <ScrollArea.Root>.");return o}const G=500,ie=16;function A(o,t,r){if(!o)return 0;const c=getComputedStyle(o),a=r==="x"?"Left":"Top",l=r==="x"?"Right":"Bottom";return parseFloat(c[`${t}${a}`])+parseFloat(c[`${t}${l}`])}let q=function(o){return o.scrollAreaCornerHeight="--scroll-area-corner-height",o.scrollAreaCornerWidth="--scroll-area-corner-width",o}({});function ve(){const[o,t]=e.useState(!1),[r,c]=e.useState(!1),[a,l]=e.useState(!1),[f,S]=e.useState({width:0,height:0}),[g,w]=e.useState({width:0,height:0}),[m,v]=e.useState(!1),x=xe(),n=e.useRef(null),d=e.useRef(null),b=e.useRef(null),s=e.useRef(null),i=e.useRef(null),X=e.useRef(null),h=e.useRef(!1),T=e.useRef(0),H=e.useRef(0),P=e.useRef(0),E=e.useRef(0),R=e.useRef("vertical"),y=e.useRef(-1),W=e.useRef(-1),O=e.useRef({x:0,y:0}),[$,te]=e.useState({scrollbarYHidden:!1,scrollbarXHidden:!1,cornerHidden:!1});e.useEffect(()=>()=>{window.clearTimeout(y.current),window.clearTimeout(W.current)},[]);const V=D(u=>{const Y=u.x-O.current.x,z=u.y-O.current.y;O.current=u,z!==0&&(l(!0),window.clearTimeout(y.current),y.current=window.setTimeout(()=>{l(!1)},G)),Y!==0&&(c(!0),window.clearTimeout(W.current),W.current=window.setTimeout(()=>{c(!1)},G))}),M=D(u=>{h.current=!0,T.current=u.clientY,H.current=u.clientX,R.current=u.currentTarget.getAttribute("data-orientation"),n.current&&(P.current=n.current.scrollTop,E.current=n.current.scrollLeft),s.current&&R.current==="vertical"&&s.current.setPointerCapture(u.pointerId),i.current&&R.current==="horizontal"&&i.current.setPointerCapture(u.pointerId)}),N=D(u=>{if(!h.current)return;const Y=u.clientY-T.current,z=u.clientX-H.current;if(n.current){const j=n.current.scrollHeight,_=n.current.clientHeight,p=n.current.scrollWidth,C=n.current.clientWidth;if(s.current&&d.current&&R.current==="vertical"){const L=A(d.current,"padding","y"),re=A(s.current,"margin","y"),oe=s.current.offsetHeight,ne=d.current.offsetHeight-oe-L-re,ce=Y/ne;n.current.scrollTop=P.current+ce*(j-_),u.preventDefault(),l(!0),window.clearTimeout(y.current),y.current=window.setTimeout(()=>{l(!1)},G)}if(i.current&&b.current&&R.current==="horizontal"){const L=A(b.current,"padding","x"),re=A(i.current,"margin","x"),oe=i.current.offsetWidth,ne=b.current.offsetWidth-oe-L-re,ce=z/ne;n.current.scrollLeft=E.current+ce*(p-C),u.preventDefault(),c(!0),window.clearTimeout(W.current),W.current=window.setTimeout(()=>{c(!1)},G)}}}),F=D(u=>{h.current=!1,s.current&&R.current==="vertical"&&s.current.releasePointerCapture(u.pointerId),i.current&&R.current==="horizontal"&&i.current.releasePointerCapture(u.pointerId)}),k=D(({pointerType:u})=>{const Y=u==="touch";v(Y),Y||t(!0)}),U=e.useCallback((u={})=>Q({onPointerEnter:k,onPointerMove:k,onPointerDown({pointerType:Y}){v(Y==="touch")},onPointerLeave(){t(!1)},style:{position:"relative",[q.scrollAreaCornerHeight]:`${f.height}px`,[q.scrollAreaCornerWidth]:`${f.width}px`}},u),[f,k]);return e.useMemo(()=>({getRootProps:U,handlePointerDown:M,handlePointerMove:N,handlePointerUp:F,handleScroll:V,cornerSize:f,setCornerSize:S,thumbSize:g,setThumbSize:w,touchModality:m,cornerRef:X,scrollingX:r,setScrollingX:c,scrollingY:a,setScrollingY:l,hovering:o,setHovering:t,viewportRef:n,scrollbarYRef:d,scrollbarXRef:b,thumbYRef:s,thumbXRef:i,rootId:x,hiddenState:$,setHiddenState:te}),[U,M,N,F,V,f,g,m,X,r,c,a,l,o,t,n,d,b,s,i,x,$])}const Te={},fe=e.forwardRef(function(t,r){const{render:c,className:a,...l}=t,f=ve(),{rootId:S}=f,{renderElement:g}=ee({propGetter:f.getRootProps,render:c??"div",ref:r,className:a,state:Te,extraProps:l}),w=e.useMemo(()=>f,[f]),m=`[data-id="${S}-viewport"]`,v=e.useMemo(()=>({__html:`${m}{scrollbar-width:none}${m}::-webkit-scrollbar{display:none}`}),[m]);return I.jsxs(ue.Provider,{value:w,children:[S&&I.jsx("style",{dangerouslySetInnerHTML:v}),g()]})}),He=e.createContext(void 0);function de(o=!0){const t=e.useContext(He);if(t===void 0&&!o)throw new Error("Base UI: DirectionContext is missing.");return t?.direction??"ltr"}function ae(o,t=Number.MIN_SAFE_INTEGER,r=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(o,r))}function Ae(o){const{children:t}=o,{viewportRef:r,scrollbarYRef:c,scrollbarXRef:a,thumbYRef:l,thumbXRef:f,cornerRef:S,setCornerSize:g,setThumbSize:w,rootId:m,setHiddenState:v,hiddenState:x,handleScroll:n,setHovering:d}=B(),b=de(),s=e.useRef(null),i=D(()=>{const h=r.current,T=c.current,H=a.current,P=l.current,E=f.current,R=S.current;if(!h)return;const y=h.scrollHeight,W=h.scrollWidth,O=h.clientHeight,$=h.clientWidth,te=h.scrollTop,V=h.scrollLeft,M=O>=y,N=$>=W,F=N?0:$/W*$,k=M?0:O/y*O,U=A(H,"padding","x"),u=A(T,"padding","y"),Y=A(E,"margin","x"),z=A(P,"margin","y"),j=Math.max(ie,F-U-Y),_=Math.max(ie,k-u-z);if(w(p=>p.height===_&&p.width===j?p:{width:j,height:_}),T&&P){const p=T.offsetHeight-_-u-z,C=te/(y-O),L=Math.min(p,Math.max(0,C*p));P.style.transform=`translate3d(0,${L}px,0)`}if(H&&E){const p=H.offsetWidth-j-U-Y,C=V/(W-$),L=b==="rtl"?ae(C*p,-p,0):ae(C*p,0,p);E.style.transform=`translate3d(${L}px,0,0)`}if(R){if(N||M)g({width:0,height:0});else if(!N&&!M){const p=T?.offsetWidth||0,C=H?.offsetHeight||0;g({width:p,height:C})}}v(p=>{const C=M||N;return p.scrollbarYHidden===M&&p.scrollbarXHidden===N&&p.cornerHidden===C?p:{scrollbarYHidden:M,scrollbarXHidden:N,cornerHidden:C}})});se(()=>{queueMicrotask(i)},[i]),se(()=>{i()},[i,x,b]),se(()=>{r.current?.matches(":hover")&&d(!0)},[r,d]),e.useEffect(()=>{if(!s.current||!r.current||typeof ResizeObserver>"u")return;const h=new ResizeObserver(i);return h.observe(s.current),h.observe(r.current),()=>{h.disconnect()}},[i,r]);const X=e.useCallback((h={})=>Q({...m&&{"data-id":`${m}-viewport`},...(!x.scrollbarXHidden||!x.scrollbarYHidden)&&{tabIndex:0},style:{overflow:"scroll"},onScroll(){r.current&&(i(),n({x:r.current.scrollLeft,y:r.current.scrollTop}))},children:I.jsx("div",{ref:s,style:{minWidth:"fit-content"},children:t})},h),[m,x.scrollbarXHidden,x.scrollbarYHidden,t,i,n,r]);return e.useMemo(()=>({getViewportProps:X}),[X])}const Xe={},he=e.forwardRef(function(t,r){const{render:c,className:a,children:l,...f}=t,{viewportRef:S}=B(),{getViewportProps:g}=Ae({children:l}),w=le(r,S),{renderElement:m}=ee({propGetter:g,render:c??"div",ref:w,className:a,state:Xe,extraProps:f});return m()}),me=e.createContext(void 0);function Ye(){const o=e.useContext(me);if(o===void 0)throw new Error("Base UI: ScrollAreaScrollbarContext is missing. ScrollAreaScrollbar parts must be placed within <ScrollArea.Scrollbar>.");return o}let K=function(o){return o.scrollAreaThumbHeight="--scroll-area-thumb-height",o.scrollAreaThumbWidth="--scroll-area-thumb-width",o}({});function Ce(o){const{orientation:t}=o,{scrollbarYRef:r,scrollbarXRef:c,viewportRef:a,thumbYRef:l,thumbXRef:f,handlePointerDown:S,handlePointerUp:g,rootId:w,thumbSize:m}=B(),v=de();e.useEffect(()=>{const n=a.current,d=t==="vertical"?r.current:c.current;if(!d)return;function b(s){if(!(!n||!d||s.ctrlKey)){if(s.preventDefault(),t==="vertical"){if(n.scrollTop===0&&s.deltaY<0)return}else if(n.scrollLeft===0&&s.deltaX<0)return;if(t==="vertical"){if(n.scrollTop===n.scrollHeight-n.clientHeight&&s.deltaY>0)return}else if(n.scrollLeft===n.scrollWidth-n.clientWidth&&s.deltaX>0)return;t==="vertical"?n.scrollTop+=s.deltaY:n.scrollLeft+=s.deltaX}}return d.addEventListener("wheel",b,{passive:!1}),()=>{d.removeEventListener("wheel",b)}},[t,c,r,a]);const x=e.useCallback((n={})=>Q({...w&&{"data-id":`${w}-scrollbar`},onPointerDown(d){if(d.currentTarget===d.target&&a.current){if(l.current&&r.current&&t==="vertical"){const b=A(l.current,"margin","y"),s=A(r.current,"padding","y"),i=l.current.offsetHeight,X=r.current.getBoundingClientRect(),h=d.clientY-X.top-i/2-s+b/2,T=a.current.scrollHeight,H=a.current.clientHeight,P=r.current.offsetHeight-i-s-b,R=h/P*(T-H);a.current.scrollTop=R}if(f.current&&c.current&&t==="horizontal"){const b=A(f.current,"margin","x"),s=A(c.current,"padding","x"),i=f.current.offsetWidth,X=c.current.getBoundingClientRect(),h=d.clientX-X.left-i/2-s+b/2,T=a.current.scrollWidth,H=a.current.clientWidth,P=c.current.offsetWidth-i-s-b,E=h/P;let R;v==="rtl"?(R=(1-E)*(T-H),a.current.scrollLeft<=0&&(R=-R)):R=E*(T-H),a.current.scrollLeft=R}S(d)}},onPointerUp:g,style:{position:"absolute",touchAction:"none",...t==="vertical"&&{top:0,bottom:`var(${q.scrollAreaCornerHeight})`,insetInlineEnd:0,[K.scrollAreaThumbHeight]:`${m.height}px`},...t==="horizontal"&&{insetInlineStart:0,insetInlineEnd:`var(${q.scrollAreaCornerWidth})`,bottom:0,[K.scrollAreaThumbWidth]:`${m.width}px`}}},n),[w,g,t,v,m.height,m.width,a,l,r,f,c,S]);return e.useMemo(()=>({getScrollbarProps:x}),[x])}const be=e.forwardRef(function(t,r){const{render:c,className:a,orientation:l="vertical",keepMounted:f=!1,...S}=t,{hovering:g,scrollingX:w,scrollingY:m,hiddenState:v,scrollbarYRef:x,scrollbarXRef:n}=B(),d=le(r,l==="vertical"?x:n),b=e.useMemo(()=>({hovering:g,scrolling:{horizontal:w,vertical:m}[l],orientation:l}),[g,w,m,l]),{getScrollbarProps:s}=Ce({orientation:l}),{renderElement:i}=ee({propGetter:s,render:c??"div",ref:d,className:a,state:b,extraProps:S}),X=e.useMemo(()=>({orientation:l}),[l]),h=l==="vertical"?v.scrollbarYHidden:v.scrollbarXHidden;return f||!h?I.jsx(me.Provider,{value:X,children:i()}):null}),pe=e.forwardRef(function(t,r){const{render:c,className:a,...l}=t,{thumbYRef:f,thumbXRef:S,handlePointerDown:g,handlePointerMove:w,handlePointerUp:m,setScrollingX:v,setScrollingY:x}=B(),{orientation:n}=Ye(),d=le(r,n==="vertical"?f:S),b=e.useMemo(()=>({orientation:n}),[n]),{renderElement:s}=ee({render:c??"div",ref:d,className:a,state:b,extraProps:Q({onPointerDown:g,onPointerMove:w,onPointerUp(i){n==="vertical"&&x(!1),n==="horizontal"&&v(!1),m(i)},style:{...n==="vertical"&&{height:`var(${K.scrollAreaThumbHeight})`},...n==="horizontal"&&{width:`var(${K.scrollAreaThumbWidth})`}}},l)});return s()}),ge=e.forwardRef(({className:o,...t},r)=>{const{classNames:c}=J("ScrollArea");return I.jsx(fe,{ref:r,className:Z(c.root,o),...t})});ge.displayName=fe.displayName;const Re=e.forwardRef(({className:o,...t},r)=>{const{classNames:c}=J("ScrollArea");return I.jsx(he,{ref:r,className:Z(c.viewport,o),...t})});Re.displayName=he.displayName;const we=e.forwardRef(({className:o,...t},r)=>{const{classNames:c}=J("ScrollArea");return I.jsx(be,{ref:r,className:Z(c.scrollbar,o),...t})});we.displayName=be.displayName;const Se=e.forwardRef(({className:o,...t},r)=>{const{classNames:c}=J("ScrollArea");return I.jsx(pe,{ref:r,className:Z(c.thumb,o),...t})});Se.displayName=pe.displayName;const Ne={Root:ge,Viewport:Re,Scrollbar:we,Thumb:Se};export{Ne as S};
