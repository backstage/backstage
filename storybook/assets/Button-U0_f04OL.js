import{a as y,$ as D,d as F,c as L}from"./utils-SVxEJA3c.js";import{r as p,R as C}from"./index-D8-PC79C.js";import{$ as I}from"./Hidden-Bl3CD3Sw.js";import{a as w,b as A,d as N,c as O}from"./useFocusRing-CSBfGNH9.js";import{a as R}from"./usePress-BiO5y4q0.js";function S(t,e){let{elementType:i="button",isDisabled:a,onPress:n,onPressStart:d,onPressEnd:o,onPressUp:g,onPressChange:l,preventFocusOnPress:b,allowFocusWhenDisabled:m,onClick:$,href:h,target:P,rel:u,type:c="button"}=t,s;i==="button"?s={type:c,disabled:a}:s={role:"button",href:i==="a"&&!a?h:void 0,target:i==="a"?P:void 0,type:i==="input"?c:void 0,disabled:i==="input"?a:void 0,"aria-disabled":!a||i==="input"?void 0:a,rel:i==="a"?u:void 0};let{pressProps:f,isPressed:v}=R({onPressStart:d,onPressEnd:o,onPressChange:l,onPress:n,onPressUp:g,onClick:$,isDisabled:a,preventFocusOnPress:b,ref:e}),{focusableProps:x}=w(t,e);m&&(x.tabIndex=a?-1:x.tabIndex);let _=y(x,f,A(t,{labelable:!0}));return{isPressed:v,buttonProps:y(s,_,{"aria-haspopup":t["aria-haspopup"],"aria-expanded":t["aria-expanded"],"aria-controls":t["aria-controls"],"aria-pressed":t["aria-pressed"],"aria-current":t["aria-current"]})}}const T=7e3;let r=null;function E(t,e="assertive",i=T){r?r.announce(t,e,i):(r=new V,(typeof IS_REACT_ACT_ENVIRONMENT=="boolean"?IS_REACT_ACT_ENVIRONMENT:typeof jest<"u")?r.announce(t,e,i):setTimeout(()=>{r?.isAttached()&&r?.announce(t,e,i)},100))}class V{isAttached(){var e;return(e=this.node)===null||e===void 0?void 0:e.isConnected}createLog(e){let i=document.createElement("div");return i.setAttribute("role","log"),i.setAttribute("aria-live",e),i.setAttribute("aria-relevant","additions"),i}destroy(){this.node&&(document.body.removeChild(this.node),this.node=null)}announce(e,i="assertive",a=T){var n,d;if(!this.node)return;let o=document.createElement("div");typeof e=="object"?(o.setAttribute("role","img"),o.setAttribute("aria-labelledby",e["aria-labelledby"])):o.textContent=e,i==="assertive"?(n=this.assertiveLog)===null||n===void 0||n.appendChild(o):(d=this.politeLog)===null||d===void 0||d.appendChild(o),e!==""&&setTimeout(()=>{o.remove()},a)}clear(e){this.node&&((!e||e==="assertive")&&this.assertiveLog&&(this.assertiveLog.innerHTML=""),(!e||e==="polite")&&this.politeLog&&(this.politeLog.innerHTML=""))}constructor(){this.node=null,this.assertiveLog=null,this.politeLog=null,typeof document<"u"&&(this.node=document.createElement("div"),this.node.dataset.liveAnnouncer="true",Object.assign(this.node.style,{border:0,clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"}),this.assertiveLog=this.createLog("assertive"),this.node.appendChild(this.assertiveLog),this.politeLog=this.createLog("polite"),this.node.appendChild(this.politeLog),document.body.prepend(this.node))}}const M=p.createContext(null),H=new Set(["form","formAction","formEncType","formMethod","formNoValidate","formTarget","name","value"]),U=p.createContext({}),Y=I(function(e,i){[e,i]=D(e,i,U),e=k(e);let a=e,{isPending:n}=a,{buttonProps:d,isPressed:o}=S(e,i),{focusProps:g,isFocused:l,isFocusVisible:b}=N(e),{hoverProps:m,isHovered:$}=O({...e,isDisabled:e.isDisabled||n}),h={isHovered:$,isPressed:(a.isPressed||o)&&!n,isFocused:l,isFocusVisible:b,isDisabled:e.isDisabled||!1,isPending:n??!1},P=F({...e,values:h,defaultClassName:"react-aria-Button"}),u=L(d.id),c=L(),s=d["aria-labelledby"];n&&(s?s=`${s} ${c}`:d["aria-label"]&&(s=`${u} ${c}`));let f=p.useRef(n);return p.useEffect(()=>{let v={"aria-labelledby":s||u};(!f.current&&l&&n||f.current&&l&&!n)&&E(v,"assertive"),f.current=n},[n,l,s,u]),C.createElement("button",{...A(e,{propNames:H}),...y(d,g,m),...P,type:d.type==="submit"&&n?"button":d.type,id:u,ref:i,"aria-labelledby":s,slot:e.slot||void 0,"aria-disabled":n?"true":d["aria-disabled"],"data-disabled":e.isDisabled||void 0,"data-pressed":h.isPressed||void 0,"data-hovered":$||void 0,"data-focused":l||void 0,"data-pending":n||void 0,"data-focus-visible":b||void 0},C.createElement(M.Provider,{value:{id:c}},P.children))});function k(t){return t.isPending&&(t.onPress=void 0,t.onPressStart=void 0,t.onPressEnd=void 0,t.onPressChange=void 0,t.onPressUp=void 0,t.onKeyDown=void 0,t.onKeyUp=void 0,t.onClick=void 0,t.href=void 0),t}export{Y as $,U as a,E as b};
