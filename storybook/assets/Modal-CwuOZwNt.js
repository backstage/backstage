import{A as ke,x as ye,b as le,_ as C,u as Re,F as xe}from"./defaultTheme-BC4DFfCk.js";import{r as a}from"./index-DSHF18-l.js";import{r as de}from"./index-DBvFAGNd.js";import{o as $,a as Ce,u as te}from"./ownerWindow-BCxlYCSn.js";import{c as oe}from"./createChainedFunction-Da-WpsAN.js";import{u as ce}from"./useIsFocusVisible-Sgmp0f7s.js";import{_ as we}from"./classCallCheck-BNzALLS0.js";import{g as Fe}from"./withStyles-eF3Zax-M.js";import{P as Me}from"./Portal-Dl07bpo2.js";function Se(){var e=document.createElement("div");e.style.width="99px",e.style.height="99px",e.style.position="absolute",e.style.top="-9999px",e.style.overflow="scroll",document.body.appendChild(e);var o=e.offsetWidth-e.clientWidth;return document.body.removeChild(e),o}function Te(e){var o=$(e);return o.body===e?Ce(o).innerWidth>o.documentElement.clientWidth:e.scrollHeight>e.clientHeight}function S(e,o){o?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function ae(e){return parseInt(window.getComputedStyle(e)["padding-right"],10)||0}function ie(e,o,n){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[],r=arguments.length>4?arguments[4]:void 0,t=[o,n].concat(ye(i)),s=["TEMPLATE","SCRIPT","STYLE"];[].forEach.call(e.children,function(l){l.nodeType===1&&t.indexOf(l)===-1&&s.indexOf(l.tagName)===-1&&S(l,r)})}function W(e,o){var n=-1;return e.some(function(i,r){return o(i)?(n=r,!0):!1}),n}function Ie(e,o){var n=[],i=[],r=e.container,t;if(!o.disableScrollLock){if(Te(r)){var s=Se();n.push({value:r.style.paddingRight,key:"padding-right",el:r}),r.style["padding-right"]="".concat(ae(r)+s,"px"),t=$(r).querySelectorAll(".mui-fixed"),[].forEach.call(t,function(d){i.push(d.style.paddingRight),d.style.paddingRight="".concat(ae(d)+s,"px")})}var l=r.parentElement,p=l.nodeName==="HTML"&&window.getComputedStyle(l)["overflow-y"]==="scroll"?l:r;n.push({value:p.style.overflow,key:"overflow",el:p}),p.style.overflow="hidden"}var g=function(){t&&[].forEach.call(t,function(u,v){i[v]?u.style.paddingRight=i[v]:u.style.removeProperty("padding-right")}),n.forEach(function(u){var v=u.value,E=u.el,h=u.key;v?E.style.setProperty(h,v):E.style.removeProperty(h)})};return g}function _e(e){var o=[];return[].forEach.call(e.children,function(n){n.getAttribute&&n.getAttribute("aria-hidden")==="true"&&o.push(n)}),o}var Be=function(){function e(){we(this,e),this.modals=[],this.containers=[]}return ke(e,[{key:"add",value:function(n,i){var r=this.modals.indexOf(n);if(r!==-1)return r;r=this.modals.length,this.modals.push(n),n.modalRef&&S(n.modalRef,!1);var t=_e(i);ie(i,n.mountNode,n.modalRef,t,!0);var s=W(this.containers,function(l){return l.container===i});return s!==-1?(this.containers[s].modals.push(n),r):(this.containers.push({modals:[n],container:i,restore:null,hiddenSiblingNodes:t}),r)}},{key:"mount",value:function(n,i){var r=W(this.containers,function(s){return s.modals.indexOf(n)!==-1}),t=this.containers[r];t.restore||(t.restore=Ie(t,i))}},{key:"remove",value:function(n){var i=this.modals.indexOf(n);if(i===-1)return i;var r=W(this.containers,function(l){return l.modals.indexOf(n)!==-1}),t=this.containers[r];if(t.modals.splice(t.modals.indexOf(n),1),this.modals.splice(i,1),t.modals.length===0)t.restore&&t.restore(),n.modalRef&&S(n.modalRef,!0),ie(t.container,n.mountNode,n.modalRef,t.hiddenSiblingNodes,!1),this.containers.splice(r,1);else{var s=t.modals[t.modals.length-1];s.modalRef&&S(s.modalRef,!1)}return i}},{key:"isTopModal",value:function(n){return this.modals.length>0&&this.modals[this.modals.length-1]===n}}]),e}();function Pe(e){var o=e.children,n=e.disableAutoFocus,i=n===void 0?!1:n,r=e.disableEnforceFocus,t=r===void 0?!1:r,s=e.disableRestoreFocus,l=s===void 0?!1:s,p=e.getDoc,g=e.isEnabled,d=e.open,u=a.useRef(),v=a.useRef(null),E=a.useRef(null),h=a.useRef(),c=a.useRef(null),T=a.useCallback(function(f){c.current=de.findDOMNode(f)},[]),O=ce(o.ref,T),w=a.useRef();return a.useEffect(function(){w.current=d},[d]),!w.current&&d&&typeof window<"u"&&(h.current=p().activeElement),a.useEffect(function(){if(d){var f=$(c.current);!i&&c.current&&!c.current.contains(f.activeElement)&&(c.current.hasAttribute("tabIndex")||c.current.setAttribute("tabIndex",-1),c.current.focus());var R=function(){var k=c.current;if(k!==null){if(!f.hasFocus()||t||!g()||u.current){u.current=!1;return}c.current&&!c.current.contains(f.activeElement)&&c.current.focus()}},I=function(k){t||!g()||k.keyCode!==9||f.activeElement===c.current&&(u.current=!0,k.shiftKey?E.current.focus():v.current.focus())};f.addEventListener("focus",R,!0),f.addEventListener("keydown",I,!0);var _=setInterval(function(){R()},50);return function(){clearInterval(_),f.removeEventListener("focus",R,!0),f.removeEventListener("keydown",I,!0),l||(h.current&&h.current.focus&&h.current.focus(),h.current=null)}}},[i,t,l,g,d]),a.createElement(a.Fragment,null,a.createElement("div",{tabIndex:0,ref:v,"data-test":"sentinelStart"}),a.cloneElement(o,{ref:O}),a.createElement("div",{tabIndex:0,ref:E,"data-test":"sentinelEnd"}))}var se={root:{zIndex:-1,position:"fixed",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},invisible:{backgroundColor:"transparent"}},Ae=a.forwardRef(function(o,n){var i=o.invisible,r=i===void 0?!1:i,t=o.open,s=le(o,["invisible","open"]);return t?a.createElement("div",C({"aria-hidden":!0,ref:n},s,{style:C({},se.root,r?se.invisible:{},s.style)})):null});function De(e){return e=typeof e=="function"?e():e,de.findDOMNode(e)}function $e(e){return e.children?e.children.props.hasOwnProperty("in"):!1}var Oe=new Be,Ne=function(o){return{root:{position:"fixed",zIndex:o.zIndex.modal,right:0,bottom:0,top:0,left:0},hidden:{visibility:"hidden"}}},Ge=a.forwardRef(function(o,n){var i=Re(),r=Fe({name:"MuiModal",props:C({},o),theme:i}),t=r.BackdropComponent,s=t===void 0?Ae:t,l=r.BackdropProps,p=r.children,g=r.closeAfterTransition,d=g===void 0?!1:g,u=r.container,v=r.disableAutoFocus,E=v===void 0?!1:v,h=r.disableBackdropClick,c=h===void 0?!1:h,T=r.disableEnforceFocus,O=T===void 0?!1:T,w=r.disableEscapeKeyDown,f=w===void 0?!1:w,R=r.disablePortal,I=R===void 0?!1:R,_=r.disableRestoreFocus,N=_===void 0?!1:_,k=r.disableScrollLock,ue=k===void 0?!1:k,z=r.hideBackdrop,fe=z===void 0?!1:z,U=r.keepMounted,pe=U===void 0?!1:U,j=r.manager,x=j===void 0?Oe:j,q=r.onBackdropClick,B=r.onClose,Y=r.onEscapeKeyDown,G=r.onRendered,y=r.open,J=le(r,["BackdropComponent","BackdropProps","children","closeAfterTransition","container","disableAutoFocus","disableBackdropClick","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","manager","onBackdropClick","onClose","onEscapeKeyDown","onRendered","open"]),Q=a.useState(!0),V=Q[0],X=Q[1],K=a.useRef({}),L=a.useRef(null),F=a.useRef(null),ve=ce(F,n),P=$e(r),Z=function(){return $(L.current)},A=function(){return K.current.modalRef=F.current,K.current.mountNode=L.current,K.current},ee=function(){x.mount(A(),{disableScrollLock:ue}),F.current.scrollTop=0},re=te(function(){var m=De(u)||Z().body;x.add(A(),m),F.current&&ee()}),H=a.useCallback(function(){return x.isTopModal(A())},[x]),he=te(function(m){L.current=m,m&&(G&&G(),y&&H()?ee():S(F.current,!0))}),M=a.useCallback(function(){x.remove(A())},[x]);if(a.useEffect(function(){return function(){M()}},[M]),a.useEffect(function(){y?re():(!P||!d)&&M()},[y,M,P,d,re]),!pe&&!y&&(!P||V))return null;var me=function(){X(!1)},be=function(){X(!0),d&&M()},ge=function(b){b.target===b.currentTarget&&(q&&q(b),!c&&B&&B(b,"backdropClick"))},Ee=function(b){b.key!=="Escape"||!H()||(Y&&Y(b),f||(b.stopPropagation(),B&&B(b,"escapeKeyDown")))},ne=Ne(i||{zIndex:xe}),D={};return p.props.tabIndex===void 0&&(D.tabIndex=p.props.tabIndex||"-1"),P&&(D.onEnter=oe(me,p.props.onEnter),D.onExited=oe(be,p.props.onExited)),a.createElement(Me,{ref:he,container:u,disablePortal:I},a.createElement("div",C({ref:ve,onKeyDown:Ee,role:"presentation"},J,{style:C({},ne.root,!y&&V?ne.hidden:{},J.style)}),fe?null:a.createElement(s,C({open:y,onClick:ge},l)),a.createElement(Pe,{disableEnforceFocus:O,disableAutoFocus:E,disableRestoreFocus:N,getDoc:Z,isEnabled:H,open:y},a.cloneElement(p,D))))});export{Ge as M,Pe as U,Be as a,Se as g};
