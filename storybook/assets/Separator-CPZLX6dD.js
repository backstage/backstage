import{d as h,m as v,n as D,o as N,f as b,p as w,q as R}from"./SelectionManager-AOhnTTKk.js";import{$ as C}from"./context-Bv6kxITJ.js";import{r as f,R as $}from"./iframe-M9O-K8SB.js";import{$ as m}from"./utils-BXllfVt4.js";import{$ as B}from"./useObjectRef-BPFp5snO.js";import{$ as x}from"./useFocusable-BwFERnd_.js";function H(r,e){let t=r;for(h(t,e)&&(t=t.parentElement);t&&!h(t,e);)t=t.parentElement;return t||document.scrollingElement||document.documentElement}let d=new Map;function I(r){let{locale:e}=C(),t=e+(r?Object.entries(r).sort((l,a)=>l[0]<a[0]?-1:1).join():"");if(d.has(t))return d.get(t);let i=new Intl.Collator(e,r);return d.set(t,i),i}class g{getItemRect(e){let t=this.ref.current;if(!t)return null;let i=e!=null?v(this.ref,e):null;if(!i)return null;let l=t.getBoundingClientRect(),a=i.getBoundingClientRect();return{x:a.left-l.left-t.clientLeft+t.scrollLeft,y:a.top-l.top-t.clientTop+t.scrollTop,width:a.width,height:a.height}}getContentSize(){let e=this.ref.current;var t,i;return{width:(t=e?.scrollWidth)!==null&&t!==void 0?t:0,height:(i=e?.scrollHeight)!==null&&i!==void 0?i:0}}getVisibleRect(){let e=this.ref.current;var t,i,l,a;return{x:(t=e?.scrollLeft)!==null&&t!==void 0?t:0,y:(i=e?.scrollTop)!==null&&i!==void 0?i:0,width:(l=e?.clientWidth)!==null&&l!==void 0?l:0,height:(a=e?.clientHeight)!==null&&a!==void 0?a:0}}constructor(e){this.ref=e}}class P{isDisabled(e){var t;return this.disabledBehavior==="all"&&(((t=e.props)===null||t===void 0?void 0:t.isDisabled)||this.disabledKeys.has(e.key))}findNextNonDisabled(e,t){let i=e;for(;i!=null;){let l=this.collection.getItem(i);if(l?.type==="item"&&!this.isDisabled(l))return i;i=t(i)}return null}getNextKey(e){let t=e;return t=this.collection.getKeyAfter(t),this.findNextNonDisabled(t,i=>this.collection.getKeyAfter(i))}getPreviousKey(e){let t=e;return t=this.collection.getKeyBefore(t),this.findNextNonDisabled(t,i=>this.collection.getKeyBefore(i))}findKey(e,t,i){let l=e,a=this.layoutDelegate.getItemRect(l);if(!a||l==null)return null;let o=a;do{if(l=t(l),l==null)break;a=this.layoutDelegate.getItemRect(l)}while(a&&i(o,a)&&l!=null);return l}isSameRow(e,t){return e.y===t.y||e.x!==t.x}isSameColumn(e,t){return e.x===t.x||e.y!==t.y}getKeyBelow(e){return this.layout==="grid"&&this.orientation==="vertical"?this.findKey(e,t=>this.getNextKey(t),this.isSameRow):this.getNextKey(e)}getKeyAbove(e){return this.layout==="grid"&&this.orientation==="vertical"?this.findKey(e,t=>this.getPreviousKey(t),this.isSameRow):this.getPreviousKey(e)}getNextColumn(e,t){return t?this.getPreviousKey(e):this.getNextKey(e)}getKeyRightOf(e){let t=this.direction==="ltr"?"getKeyRightOf":"getKeyLeftOf";return this.layoutDelegate[t]?(e=this.layoutDelegate[t](e),this.findNextNonDisabled(e,i=>this.layoutDelegate[t](i))):this.layout==="grid"?this.orientation==="vertical"?this.getNextColumn(e,this.direction==="rtl"):this.findKey(e,i=>this.getNextColumn(i,this.direction==="rtl"),this.isSameColumn):this.orientation==="horizontal"?this.getNextColumn(e,this.direction==="rtl"):null}getKeyLeftOf(e){let t=this.direction==="ltr"?"getKeyLeftOf":"getKeyRightOf";return this.layoutDelegate[t]?(e=this.layoutDelegate[t](e),this.findNextNonDisabled(e,i=>this.layoutDelegate[t](i))):this.layout==="grid"?this.orientation==="vertical"?this.getNextColumn(e,this.direction==="ltr"):this.findKey(e,i=>this.getNextColumn(i,this.direction==="ltr"),this.isSameColumn):this.orientation==="horizontal"?this.getNextColumn(e,this.direction==="ltr"):null}getFirstKey(){let e=this.collection.getFirstKey();return this.findNextNonDisabled(e,t=>this.collection.getKeyAfter(t))}getLastKey(){let e=this.collection.getLastKey();return this.findNextNonDisabled(e,t=>this.collection.getKeyBefore(t))}getKeyPageAbove(e){let t=this.ref.current,i=this.layoutDelegate.getItemRect(e);if(!i)return null;if(t&&!h(t))return this.getFirstKey();let l=e;if(this.orientation==="horizontal"){let a=Math.max(0,i.x+i.width-this.layoutDelegate.getVisibleRect().width);for(;i&&i.x>a&&l!=null;)l=this.getKeyAbove(l),i=l==null?null:this.layoutDelegate.getItemRect(l)}else{let a=Math.max(0,i.y+i.height-this.layoutDelegate.getVisibleRect().height);for(;i&&i.y>a&&l!=null;)l=this.getKeyAbove(l),i=l==null?null:this.layoutDelegate.getItemRect(l)}return l??this.getFirstKey()}getKeyPageBelow(e){let t=this.ref.current,i=this.layoutDelegate.getItemRect(e);if(!i)return null;if(t&&!h(t))return this.getLastKey();let l=e;if(this.orientation==="horizontal"){let a=Math.min(this.layoutDelegate.getContentSize().width,i.y-i.width+this.layoutDelegate.getVisibleRect().width);for(;i&&i.x<a&&l!=null;)l=this.getKeyBelow(l),i=l==null?null:this.layoutDelegate.getItemRect(l)}else{let a=Math.min(this.layoutDelegate.getContentSize().height,i.y-i.height+this.layoutDelegate.getVisibleRect().height);for(;i&&i.y<a&&l!=null;)l=this.getKeyBelow(l),i=l==null?null:this.layoutDelegate.getItemRect(l)}return l??this.getLastKey()}getKeyForSearch(e,t){if(!this.collator)return null;let i=this.collection,l=t||this.getFirstKey();for(;l!=null;){let a=i.getItem(l);if(!a)return null;let o=a.textValue.slice(0,e.length);if(a.textValue&&this.collator.compare(o,e)===0)return l;l=this.getNextKey(l)}return null}constructor(...e){if(e.length===1){let t=e[0];this.collection=t.collection,this.ref=t.ref,this.collator=t.collator,this.disabledKeys=t.disabledKeys||new Set,this.disabledBehavior=t.disabledBehavior||"all",this.orientation=t.orientation||"vertical",this.direction=t.direction,this.layout=t.layout||"stack",this.layoutDelegate=t.layoutDelegate||new g(t.ref)}else this.collection=e[0],this.disabledKeys=e[1],this.ref=e[2],this.collator=e[3],this.layout="stack",this.orientation="vertical",this.disabledBehavior="all",this.layoutDelegate=new g(this.ref);this.layout==="stack"&&this.orientation==="vertical"&&(this.getKeyLeftOf=void 0,this.getKeyRightOf=void 0)}}function T(r){let{selectionManager:e,collection:t,disabledKeys:i,ref:l,keyboardDelegate:a,layoutDelegate:o}=r,s=I({usage:"search",sensitivity:"base"}),c=e.disabledBehavior,n=f.useMemo(()=>a||new P({collection:t,disabledKeys:i,disabledBehavior:c,ref:l,collator:s,layoutDelegate:o}),[a,o,t,i,l,s,c]),{collectionProps:u}=D({...r,ref:l,selectionManager:e,keyboardDelegate:n});return{listProps:u}}const y=new WeakMap;function F(r){let e=y.get(r);if(e!=null)return e;let t=0,i=l=>{for(let a of l)a.type==="section"?i(N(a,r)):a.type==="item"&&t++};return i(r),y.set(r,t),t}function _(r){let e=x(r,{labelable:!0}),t;return r.orientation==="vertical"&&(t="vertical"),r.elementType!=="hr"?{separatorProps:{...e,role:"separator","aria-orientation":t}}:{separatorProps:e}}const M=f.createContext({}),W=b(w,function(e,t){return[e,t]=m(e,t,M),$.createElement("header",{className:"react-aria-Header",...e,ref:t},e.children)}),S=f.createContext({});class K extends R{filter(e,t){let i=t.getItem(this.prevKey);if(i&&i.type!=="separator"){let l=this.clone();return t.addDescendants(l,e),l}return null}}K.type="separator";const j=b(K,function(e,t){[e,t]=m(e,t,S);let{elementType:i,orientation:l,style:a,className:o,slot:s,...c}=e,n=i||"hr";n==="hr"&&l==="vertical"&&(n="div");let{separatorProps:u}=_({...c,elementType:i,orientation:l}),p=x(e,{global:!0});return $.createElement(n,{...B(p,u),style:a,className:o??"react-aria-Separator",ref:t,slot:s||void 0})});export{H as $,T as a,F as b,I as c,P as d,S as e,M as f,j as g,W as h,g as i};
