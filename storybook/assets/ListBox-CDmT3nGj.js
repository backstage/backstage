import{a as _,m as ge,c as be,n as ve,b as $e,f as A,o as ye,l as pe,e as me,g as xe,p as De,q as Pe,i as j,r as Ke,d as we,s as Ce,h as Me}from"./useListState-Dh1cWBjG.js";import{a as Be,e as Ee,b as Z,c as w,j as Y,o as Ne,$ as U,l as ee,d as L,i as te,n as Se,g as Ie}from"./utils-Dc-c3eC3.js";import{r as d,a3 as u}from"./iframe-B6vHPHUS.js";import{c as Le}from"./RSPContexts-xdSoOCnd.js";import{b as Fe,c as Oe,a as Re}from"./SelectionIndicator-C-ramg4n.js";import{a as C,$ as Ve,v as Te,r as _e,c as le,s as G,d as Ae}from"./useFocusRing-BPooT00c.js";import{a as Ue}from"./Text-Gfhg4HaA.js";import{b as ke}from"./usePress-D5zWsAX_.js";import{$ as ze}from"./useLabel-BjKVVapu.js";import{$ as ie}from"./context-DsQFltCn.js";function He(o,e){let t=o;for(_(t,e)&&(t=t.parentElement);t&&!_(t,e);)t=t.parentElement;return t||document.scrollingElement||document.documentElement}function We(o,e){let{collection:t,onLoadMore:l,scrollOffset:i=1}=o,a=d.useRef(null),r=Be(n=>{for(let s of n)s.isIntersecting&&l&&l()});Ee(()=>(e.current&&(a.current=new IntersectionObserver(r,{root:He(e?.current),rootMargin:`0px ${100*i}% ${100*i}% ${100*i}%`}),a.current.observe(e.current)),()=>{a.current&&a.current.disconnect()}),[t,r,e,i])}let W=new Map;function oe(o){let{locale:e}=ie(),t=e+(o?Object.entries(o).sort((i,a)=>i[0]<a[0]?-1:1).join():"");if(W.has(t))return W.get(t);let l=new Intl.Collator(e,o);return W.set(t,l),l}const q=new WeakMap;function je(o){return typeof o=="string"?o.replace(/\s*/g,""):""+o}function qe(o,e){let t=q.get(o);if(!t)throw new Error("Unknown list");return`${t.id}-option-${je(e)}`}class J{getItemRect(e){let t=this.ref.current;if(!t)return null;let l=e!=null?ge(this.ref,e):null;if(!l)return null;let i=t.getBoundingClientRect(),a=l.getBoundingClientRect();return{x:a.left-i.left-t.clientLeft+t.scrollLeft,y:a.top-i.top-t.clientTop+t.scrollTop,width:a.width,height:a.height}}getContentSize(){let e=this.ref.current;var t,l;return{width:(t=e?.scrollWidth)!==null&&t!==void 0?t:0,height:(l=e?.scrollHeight)!==null&&l!==void 0?l:0}}getVisibleRect(){let e=this.ref.current;var t,l,i,a;return{x:(t=e?.scrollLeft)!==null&&t!==void 0?t:0,y:(l=e?.scrollTop)!==null&&l!==void 0?l:0,width:(i=e?.clientWidth)!==null&&i!==void 0?i:0,height:(a=e?.clientHeight)!==null&&a!==void 0?a:0}}constructor(e){this.ref=e}}class ae{isDisabled(e){var t;return this.disabledBehavior==="all"&&(((t=e.props)===null||t===void 0?void 0:t.isDisabled)||this.disabledKeys.has(e.key))}findNextNonDisabled(e,t){let l=e;for(;l!=null;){let i=this.collection.getItem(l);if(i?.type==="item"&&!this.isDisabled(i))return l;l=t(l)}return null}getNextKey(e){let t=e;return t=this.collection.getKeyAfter(t),this.findNextNonDisabled(t,l=>this.collection.getKeyAfter(l))}getPreviousKey(e){let t=e;return t=this.collection.getKeyBefore(t),this.findNextNonDisabled(t,l=>this.collection.getKeyBefore(l))}findKey(e,t,l){let i=e,a=this.layoutDelegate.getItemRect(i);if(!a||i==null)return null;let r=a;do{if(i=t(i),i==null)break;a=this.layoutDelegate.getItemRect(i)}while(a&&l(r,a)&&i!=null);return i}isSameRow(e,t){return e.y===t.y||e.x!==t.x}isSameColumn(e,t){return e.x===t.x||e.y!==t.y}getKeyBelow(e){return this.layout==="grid"&&this.orientation==="vertical"?this.findKey(e,t=>this.getNextKey(t),this.isSameRow):this.getNextKey(e)}getKeyAbove(e){return this.layout==="grid"&&this.orientation==="vertical"?this.findKey(e,t=>this.getPreviousKey(t),this.isSameRow):this.getPreviousKey(e)}getNextColumn(e,t){return t?this.getPreviousKey(e):this.getNextKey(e)}getKeyRightOf(e){let t=this.direction==="ltr"?"getKeyRightOf":"getKeyLeftOf";return this.layoutDelegate[t]?(e=this.layoutDelegate[t](e),this.findNextNonDisabled(e,l=>this.layoutDelegate[t](l))):this.layout==="grid"?this.orientation==="vertical"?this.getNextColumn(e,this.direction==="rtl"):this.findKey(e,l=>this.getNextColumn(l,this.direction==="rtl"),this.isSameColumn):this.orientation==="horizontal"?this.getNextColumn(e,this.direction==="rtl"):null}getKeyLeftOf(e){let t=this.direction==="ltr"?"getKeyLeftOf":"getKeyRightOf";return this.layoutDelegate[t]?(e=this.layoutDelegate[t](e),this.findNextNonDisabled(e,l=>this.layoutDelegate[t](l))):this.layout==="grid"?this.orientation==="vertical"?this.getNextColumn(e,this.direction==="ltr"):this.findKey(e,l=>this.getNextColumn(l,this.direction==="ltr"),this.isSameColumn):this.orientation==="horizontal"?this.getNextColumn(e,this.direction==="ltr"):null}getFirstKey(){let e=this.collection.getFirstKey();return this.findNextNonDisabled(e,t=>this.collection.getKeyAfter(t))}getLastKey(){let e=this.collection.getLastKey();return this.findNextNonDisabled(e,t=>this.collection.getKeyBefore(t))}getKeyPageAbove(e){let t=this.ref.current,l=this.layoutDelegate.getItemRect(e);if(!l)return null;if(t&&!_(t))return this.getFirstKey();let i=e;if(this.orientation==="horizontal"){let a=Math.max(0,l.x+l.width-this.layoutDelegate.getVisibleRect().width);for(;l&&l.x>a&&i!=null;)i=this.getKeyAbove(i),l=i==null?null:this.layoutDelegate.getItemRect(i)}else{let a=Math.max(0,l.y+l.height-this.layoutDelegate.getVisibleRect().height);for(;l&&l.y>a&&i!=null;)i=this.getKeyAbove(i),l=i==null?null:this.layoutDelegate.getItemRect(i)}return i??this.getFirstKey()}getKeyPageBelow(e){let t=this.ref.current,l=this.layoutDelegate.getItemRect(e);if(!l)return null;if(t&&!_(t))return this.getLastKey();let i=e;if(this.orientation==="horizontal"){let a=Math.min(this.layoutDelegate.getContentSize().width,l.y-l.width+this.layoutDelegate.getVisibleRect().width);for(;l&&l.x<a&&i!=null;)i=this.getKeyBelow(i),l=i==null?null:this.layoutDelegate.getItemRect(i)}else{let a=Math.min(this.layoutDelegate.getContentSize().height,l.y-l.height+this.layoutDelegate.getVisibleRect().height);for(;l&&l.y<a&&i!=null;)i=this.getKeyBelow(i),l=i==null?null:this.layoutDelegate.getItemRect(i)}return i??this.getLastKey()}getKeyForSearch(e,t){if(!this.collator)return null;let l=this.collection,i=t||this.getFirstKey();for(;i!=null;){let a=l.getItem(i);if(!a)return null;let r=a.textValue.slice(0,e.length);if(a.textValue&&this.collator.compare(r,e)===0)return i;i=this.getNextKey(i)}return null}constructor(...e){if(e.length===1){let t=e[0];this.collection=t.collection,this.ref=t.ref,this.collator=t.collator,this.disabledKeys=t.disabledKeys||new Set,this.disabledBehavior=t.disabledBehavior||"all",this.orientation=t.orientation||"vertical",this.direction=t.direction,this.layout=t.layout||"stack",this.layoutDelegate=t.layoutDelegate||new J(t.ref)}else this.collection=e[0],this.disabledKeys=e[1],this.ref=e[2],this.collator=e[3],this.layout="stack",this.orientation="vertical",this.disabledBehavior="all",this.layoutDelegate=new J(this.ref);this.layout==="stack"&&this.orientation==="vertical"&&(this.getKeyLeftOf=void 0,this.getKeyRightOf=void 0)}}function Xe(o){let{selectionManager:e,collection:t,disabledKeys:l,ref:i,keyboardDelegate:a,layoutDelegate:r}=o,n=oe({usage:"search",sensitivity:"base"}),s=e.disabledBehavior,f=d.useMemo(()=>a||new ae({collection:t,disabledKeys:l,disabledBehavior:s,ref:i,collator:n,layoutDelegate:r}),[a,r,t,l,i,n,s]),{collectionProps:h}=be({...o,ref:i,selectionManager:e,keyboardDelegate:f});return{listProps:h}}function Ye(o,e,t){let l=C(o,{labelable:!0}),i=o.selectionBehavior||"toggle",a=o.linkBehavior||(i==="replace"?"action":"override");i==="toggle"&&a==="action"&&(a="override");let{listProps:r}=Xe({...o,ref:t,selectionManager:e.selectionManager,collection:e.collection,disabledKeys:e.disabledKeys,linkBehavior:a}),{focusWithinProps:n}=Ve({onFocusWithin:o.onFocus,onBlurWithin:o.onBlur,onFocusWithinChange:o.onFocusChange}),s=Z(o.id);q.set(e,{id:s,shouldUseVirtualFocus:o.shouldUseVirtualFocus,shouldSelectOnPressUp:o.shouldSelectOnPressUp,shouldFocusOnHover:o.shouldFocusOnHover,isVirtualized:o.isVirtualized,onAction:o.onAction,linkBehavior:a,UNSTABLE_itemBehavior:o.UNSTABLE_itemBehavior});let{labelProps:f,fieldProps:h}=ze({...o,id:s,labelElementType:"span"});return{labelProps:f,listBoxProps:w(l,n,e.selectionManager.selectionMode==="multiple"?{"aria-multiselectable":"true"}:{},{role:"listbox",...w(h,r)})}}const Q=new WeakMap;function Ge(o){let e=Q.get(o);if(e!=null)return e;let t=0,l=i=>{for(let a of i)a.type==="section"?l(ve(a,o)):a.type==="item"&&t++};return l(o),Q.set(o,t),t}function Je(o,e,t){var l,i;let{key:a}=o,r=q.get(e);var n;let s=(n=o.isDisabled)!==null&&n!==void 0?n:e.selectionManager.isDisabled(a);var f;let h=(f=o.isSelected)!==null&&f!==void 0?f:e.selectionManager.isSelected(a);var c;let g=(c=o.shouldSelectOnPressUp)!==null&&c!==void 0?c:r?.shouldSelectOnPressUp;var y;let v=(y=o.shouldFocusOnHover)!==null&&y!==void 0?y:r?.shouldFocusOnHover;var p;let $=(p=o.shouldUseVirtualFocus)!==null&&p!==void 0?p:r?.shouldUseVirtualFocus;var m;let M=(m=o.isVirtualized)!==null&&m!==void 0?m:r?.isVirtualized,E=Y(),x=Y(),P={role:"option","aria-disabled":s||void 0,"aria-selected":e.selectionManager.selectionMode!=="none"?h:void 0};Te()&&_e()||(P["aria-label"]=o["aria-label"],P["aria-labelledby"]=E,P["aria-describedby"]=x);let b=e.collection.getItem(a);if(M){let K=Number(b?.index);P["aria-posinset"]=Number.isNaN(K)?void 0:K+1,P["aria-setsize"]=Ge(e.collection)}let D=r?.onAction?()=>{var K;return r==null||(K=r.onAction)===null||K===void 0?void 0:K.call(r,a)}:void 0,B=qe(e,a),{itemProps:S,isPressed:O,isFocused:I,hasAction:z,allowsSelection:R}=$e({selectionManager:e.selectionManager,key:a,ref:t,shouldSelectOnPressUp:g,allowsDifferentPressOrigin:g&&v,isVirtualized:M,shouldUseVirtualFocus:$,isDisabled:s,onAction:D||!(b==null||(l=b.props)===null||l===void 0)&&l.onAction?Ne(b==null||(i=b.props)===null||i===void 0?void 0:i.onAction,D):void 0,linkBehavior:r?.linkBehavior,UNSTABLE_itemBehavior:r?.UNSTABLE_itemBehavior,id:B}),{hoverProps:V}=le({isDisabled:s||!v,onHoverStart(){G()||(e.selectionManager.setFocused(!0),e.selectionManager.setFocusedKey(a))}}),N=C(b?.props);delete N.id;let T=ke(b?.props);return{optionProps:{...P,...w(N,S,V,T),id:B},labelProps:{id:E},descriptionProps:{id:x},isFocused:I,isFocusVisible:I&&e.selectionManager.isFocused&&G(),isSelected:h,isDisabled:s,isPressed:O,allowsSelection:R,hasAction:z}}function Qe(o){let{heading:e,"aria-label":t}=o,l=Z();return{itemProps:{role:"presentation"},headingProps:e?{id:l,role:"presentation"}:{},groupProps:{role:"group","aria-label":t,"aria-labelledby":e?l:void 0}}}function Ze(o){let e=C(o,{labelable:!0}),t;return o.orientation==="vertical"&&(t="vertical"),o.elementType!=="hr"?{separatorProps:{...e,role:"separator","aria-orientation":t}}:{separatorProps:e}}const k=d.createContext({}),re=d.createContext(null),et=d.forwardRef(function(e,t){let{render:l}=d.useContext(re);return u.createElement(u.Fragment,null,l(e,t))});function ne(o,e){var t;let l=o?.renderDropIndicator,i=o==null||(t=o.isVirtualDragging)===null||t===void 0?void 0:t.call(o),a=d.useCallback(r=>{if(i||e?.isDropTarget(r))return l?l(r):u.createElement(et,{target:r})},[e?.target,i,l]);return o?.useDropIndicator?a:void 0}function tt(o,e,t){var l,i;let a=o.focusedKey,r=null;if(!(e==null||(l=e.isVirtualDragging)===null||l===void 0)&&l.call(e)&&(t==null||(i=t.target)===null||i===void 0?void 0:i.type)==="item"&&(r=t.target.key,t.target.dropPosition==="after")){let c=t.collection.getKeyAfter(r),g=null;if(c!=null){var n,s;let y=(s=(n=t.collection.getItem(r))===null||n===void 0?void 0:n.level)!==null&&s!==void 0?s:0;for(;c;){let v=t.collection.getItem(c);if(!v)break;if(v.type!=="item"){c=t.collection.getKeyAfter(c);continue}var f;if(((f=v.level)!==null&&f!==void 0?f:0)<=y)break;g=c,c=t.collection.getKeyAfter(c)}}var h;r=(h=c??g)!==null&&h!==void 0?h:r}return d.useMemo(()=>new Set([a,r].filter(c=>c!=null)),[a,r])}const se=d.createContext({}),$t=A(ye,function(e,t){return[e,t]=U(e,t,se),u.createElement("header",{className:"react-aria-Header",...e,ref:t},e.children)}),de=d.createContext({});class ce extends pe{filter(e,t){let l=t.getItem(this.prevKey);if(l&&l.type!=="separator"){let i=this.clone();return t.addDescendants(i,e),i}return null}}ce.type="separator";const yt=A(ce,function(e,t){[e,t]=U(e,t,de);let{elementType:l,orientation:i,style:a,className:r,slot:n,...s}=e,f=l||"hr";f==="hr"&&i==="vertical"&&(f="div");let{separatorProps:h}=Ze({...s,elementType:l,orientation:i}),c=C(e,{global:!0});return u.createElement(f,{...w(c,h),style:a,className:r??"react-aria-Separator",ref:t,slot:n||void 0})}),ue=d.createContext(null),F=d.createContext(null),pt=d.forwardRef(function(e,t){[e,t]=U(e,t,ue);let l=d.useContext(F);return l?u.createElement(fe,{state:l,props:e,listBoxRef:t}):u.createElement(me,{content:u.createElement(xe,e)},i=>u.createElement(lt,{props:e,listBoxRef:t,collection:i}))});function lt({props:o,listBoxRef:e,collection:t}){o={...o,collection:t,children:null,items:null};let{layoutDelegate:l}=d.useContext(j),i=we({...o,layoutDelegate:l});return u.createElement(fe,{state:i,props:o,listBoxRef:e})}function fe({state:o,props:e,listBoxRef:t}){[e,t]=U(e,t,Le);let{dragAndDropHooks:l,layout:i="stack",orientation:a="vertical",filter:r}=e,n=Pe(o,r),{collection:s,selectionManager:f}=n,h=!!l?.useDraggableCollectionState,c=!!l?.useDroppableCollectionState,{direction:g}=ie(),{disabledBehavior:y,disabledKeys:v}=f,p=oe({usage:"search",sensitivity:"base"}),{isVirtualized:$,layoutDelegate:m,dropTargetDelegate:M,CollectionRoot:E}=d.useContext(j),x=d.useMemo(()=>e.keyboardDelegate||new ae({collection:s,collator:p,ref:t,disabledKeys:v,disabledBehavior:y,layout:i,orientation:a,direction:g,layoutDelegate:m}),[s,p,t,y,v,a,g,e.keyboardDelegate,i,m]),{listBoxProps:P}=Ye({...e,shouldSelectOnPressUp:h||e.shouldSelectOnPressUp,keyboardDelegate:x,isVirtualized:$},n,t);d.useRef(h),d.useRef(c),d.useEffect(()=>{},[h,c]);let b,D,B,S=!1,O=null,I=d.useRef(null);if(h&&l){b=l.useDraggableCollectionState({collection:s,selectionManager:f,preview:l.renderDragPreview?I:void 0}),l.useDraggableCollection({},b,t);let H=l.DragPreview;O=l.renderDragPreview?u.createElement(H,{ref:I},l.renderDragPreview):null}if(c&&l){D=l.useDroppableCollectionState({collection:s,selectionManager:f});let H=l.dropTargetDelegate||M||new l.ListDropTargetDelegate(s,t,{orientation:a,layout:i,direction:g});B=l.useDroppableCollection({keyboardDelegate:x,dropTargetDelegate:H},D,t),S=D.isDropTarget({type:"root"})}let{focusProps:z,isFocused:R,isFocusVisible:V}=Ae(),N=n.collection.size===0,T={isDropTarget:S,isEmpty:N,isFocused:R,isFocusVisible:V,layout:e.layout||"stack",state:n},K=L({className:e.className,style:e.style,defaultClassName:"react-aria-ListBox",values:T}),X=null;N&&e.renderEmptyState&&(X=u.createElement("div",{role:"option",style:{display:"contents"}},e.renderEmptyState(T)));let he=C(e,{global:!0});return u.createElement(Oe,null,u.createElement("div",{...w(he,K,P,z,B?.collectionProps),ref:t,slot:e.slot||void 0,onScroll:e.onScroll,"data-drop-target":S||void 0,"data-empty":N||void 0,"data-focused":R||void 0,"data-focus-visible":V||void 0,"data-layout":e.layout||"stack","data-orientation":e.orientation||"vertical"},u.createElement(te,{values:[[ue,e],[F,n],[k,{dragAndDropHooks:l,dragState:b,dropState:D}],[de,{elementType:"div"}],[re,{render:ot}],[Ke,{name:"ListBoxSection",render:it}]]},u.createElement(Re,null,u.createElement(E,{collection:s,scrollRef:t,persistedKeys:tt(f,l,D),renderDropIndicator:ne(l,D)}))),X,O))}function it(o,e,t,l="react-aria-ListBoxSection"){let i=d.useContext(F),{dragAndDropHooks:a,dropState:r}=d.useContext(k),{CollectionBranch:n}=d.useContext(j),[s,f]=Ie();var h;let{headingProps:c,groupProps:g}=Qe({heading:f,"aria-label":(h=o["aria-label"])!==null&&h!==void 0?h:void 0}),y=L({defaultClassName:l,className:o.className,style:o.style,values:{}}),v=C(o,{global:!0});return delete v.id,u.createElement("section",{...w(v,y,g),ref:e},u.createElement(se.Provider,{value:{...c,ref:s}},u.createElement(n,{collection:i.collection,parent:t,renderDropIndicator:ne(a,r)})))}const mt=A(De,function(e,t,l){let i=ee(t),a=d.useContext(F),{dragAndDropHooks:r,dragState:n,dropState:s}=d.useContext(k),{optionProps:f,labelProps:h,descriptionProps:c,...g}=Je({key:l.key,"aria-label":e?.["aria-label"]},a,i),{hoverProps:y,isHovered:v}=le({isDisabled:!g.allowsSelection&&!g.hasAction,onHoverStart:l.props.onHoverStart,onHoverChange:l.props.onHoverChange,onHoverEnd:l.props.onHoverEnd}),p=null;n&&r&&(p=r.useDraggableItem({key:l.key},n));let $=null;s&&r&&($=r.useDroppableItem({target:{type:"item",key:l.key,dropPosition:"on"}},s,i));let m=n&&n.isDragging(l.key),M=L({...e,id:void 0,children:e.children,defaultClassName:"react-aria-ListBoxItem",values:{...g,isHovered:v,selectionMode:a.selectionManager.selectionMode,selectionBehavior:a.selectionManager.selectionBehavior,allowsDragging:!!n,isDragging:m,isDropTarget:$?.isDropTarget}});d.useEffect(()=>{l.textValue},[l.textValue]);let E=e.href?"a":"div",x=C(e,{global:!0});return delete x.id,delete x.onClick,u.createElement(E,{...w(x,M,f,y,p?.dragProps,$?.dropProps),ref:i,"data-allows-dragging":!!n||void 0,"data-selected":g.isSelected||void 0,"data-disabled":g.isDisabled||void 0,"data-hovered":v||void 0,"data-focused":g.isFocused||void 0,"data-focus-visible":g.isFocusVisible||void 0,"data-pressed":g.isPressed||void 0,"data-dragging":m||void 0,"data-drop-target":$?.isDropTarget||void 0,"data-selection-mode":a.selectionManager.selectionMode==="none"?void 0:a.selectionManager.selectionMode},u.createElement(te,{values:[[Ue,{slots:{[Se]:h,label:h,description:c}}],[Fe,{isSelected:g.isSelected}]]},M.children))});function ot(o,e){e=ee(e);let{dragAndDropHooks:t,dropState:l}=d.useContext(k),{dropIndicatorProps:i,isHidden:a,isDropTarget:r}=t.useDropIndicator(o,l,e);return a?null:u.createElement(rt,{...o,dropIndicatorProps:i,isDropTarget:r,ref:e})}function at(o,e){let{dropIndicatorProps:t,isDropTarget:l,...i}=o,a=L({...i,defaultClassName:"react-aria-DropIndicator",values:{isDropTarget:l}});return u.createElement("div",{...t,...a,role:"option",ref:e,"data-drop-target":l||void 0})}const rt=d.forwardRef(at);A(Ce,function(e,t,l){let i=d.useContext(F),{isLoading:a,onLoadMore:r,scrollOffset:n,...s}=e,f=d.useRef(null),h=d.useMemo(()=>({onLoadMore:r,collection:i?.collection,sentinelRef:f,scrollOffset:n}),[r,n,i?.collection]);We(h,f);let c=L({...s,id:void 0,children:l.rendered,defaultClassName:"react-aria-ListBoxLoadingIndicator",values:null}),g={tabIndex:-1};return u.createElement(u.Fragment,null,u.createElement("div",{style:{position:"relative",width:0,height:0},inert:Me(!0)},u.createElement("div",{"data-testid":"loadMoreSentinel",ref:f,style:{position:"absolute",height:1,width:1}})),a&&c.children&&u.createElement("div",{...w(C(e,{global:!0}),g),...c,role:"option",ref:t},c.children))});export{pt as $,mt as a,yt as b,$t as c,Xe as d,He as e,ae as f,F as g,oe as h,ue as i,J as j,k,ne as l,re as m,tt as n,We as o,Ge as p,de as q,se as r};
