import{j as x}from"./jsx-runtime-hv06LKfz.js";import{R as s,r as a}from"./index-D8-PC79C.js";import{$ as N,a as j,b as H,c as B,d as _,e as F,f as W}from"./OverlayArrow-DE7RRCpW.js";import{j as k,a as C,c as A,h as U,$ as V,i as q,d as K}from"./utils-SVxEJA3c.js";import{b as Z,c as R,a as z,p as Y,q as G,r as J}from"./useFocusRing-CSBfGNH9.js";import{I as Q}from"./index-DXvUqTe6.js";import{c as X}from"./clsx-B-dksMZM.js";import{u as ee}from"./useStyles-Dc-DqJ_c.js";const P=s.createContext(null);function te(e){let{children:r}=e,t=a.useContext(P),[l,i]=a.useState(0),c=a.useMemo(()=>({parent:t,modalCount:l,addModal(){i(n=>n+1),t&&t.addModal()},removeModal(){i(n=>n-1),t&&t.removeModal()}}),[t,l]);return s.createElement(P.Provider,{value:c},r)}function re(){let e=a.useContext(P);return{modalProviderProps:{"aria-hidden":e&&e.modalCount>0?!0:void 0}}}function oe(e){let{modalProviderProps:r}=re();return s.createElement("div",{"data-overlay-container":!0,...e,...r})}function le(e){return s.createElement(te,null,s.createElement(oe,e))}function ne(e){let r=k(),{portalContainer:t=r?null:document.body,...l}=e,{getContainer:i}=N();if(!e.portalContainer&&i&&(t=i()),s.useEffect(()=>{if(t?.closest("[data-overlay-container]"))throw new Error("An OverlayContainer must not be inside another container. Please change the portalContainer prop.")},[t]),!t)return null;let c=s.createElement(le,l);return Q.createPortal(c,t)}function ae(e,r){let t=Z(e,{labelable:!0}),{hoverProps:l}=R({onHoverStart:()=>r?.open(!0),onHoverEnd:()=>r?.close()});return{tooltipProps:C(t,l,{role:"tooltip"})}}function ie(e,r,t){let{isDisabled:l,trigger:i}=e,c=A(),n=a.useRef(!1),o=a.useRef(!1),u=()=>{(n.current||o.current)&&r.open(o.current)},d=T=>{!n.current&&!o.current&&r.close(T)};a.useEffect(()=>{let T=O=>{t&&t.current&&O.key==="Escape"&&(O.stopPropagation(),r.close(!0))};if(r.isOpen)return document.addEventListener("keydown",T,!0),()=>{document.removeEventListener("keydown",T,!0)}},[t,r]);let m=()=>{i!=="focus"&&(Y()==="pointer"?n.current=!0:n.current=!1,u())},v=()=>{i!=="focus"&&(o.current=!1,n.current=!1,d())},g=()=>{o.current=!1,n.current=!1,d(!0)},E=()=>{G()&&(o.current=!0,u())},f=()=>{o.current=!1,n.current=!1,d(!0)},{hoverProps:I}=R({isDisabled:l,onHoverStart:m,onHoverEnd:v}),{focusableProps:M}=z({isDisabled:l,onFocus:E,onBlur:f},t);return{triggerProps:{"aria-describedby":r.isOpen?c:void 0,...C(M,I,{onPointerDown:g,onKeyDown:g,tabIndex:void 0})},tooltipProps:{id:c}}}const ce=1500,w=500;let p={},se=0,h=!1,$=null,b=null;function L(e={}){let{delay:r=ce,closeDelay:t=w}=e,{isOpen:l,open:i,close:c}=j(e),n=a.useMemo(()=>`${++se}`,[]),o=a.useRef(null),u=a.useRef(c),d=()=>{p[n]=g},m=()=>{for(let f in p)f!==n&&(p[f](!0),delete p[f])},v=()=>{o.current&&clearTimeout(o.current),o.current=null,m(),d(),h=!0,i(),$&&(clearTimeout($),$=null),b&&(clearTimeout(b),b=null)},g=f=>{f||t<=0?(o.current&&clearTimeout(o.current),o.current=null,u.current()):o.current||(o.current=setTimeout(()=>{o.current=null,u.current()},t)),$&&(clearTimeout($),$=null),h&&(b&&clearTimeout(b),b=setTimeout(()=>{delete p[n],b=null,h=!1},Math.max(w,t)))},E=()=>{m(),d(),!l&&!$&&!h?$=setTimeout(()=>{$=null,h=!0,v()},r):l||v()};return a.useEffect(()=>{u.current=c},[c]),a.useEffect(()=>()=>{o.current&&clearTimeout(o.current),p[n]&&delete p[n]},[n]),{isOpen:l,open:f=>{!f&&r>0&&!o.current?E():v()},close:g}}const y=a.createContext(null),S=a.createContext(null);function de(e){let r=L(e),t=a.useRef(null),{triggerProps:l,tooltipProps:i}=ie(e,r,t);return s.createElement(U,{values:[[y,r],[S,{...i,triggerRef:t}]]},s.createElement(J,{...l,ref:t},e.children))}const fe=a.forwardRef(function({UNSTABLE_portalContainer:r,...t},l){[t,l]=V(t,l,S);let i=a.useContext(y),c=L(t),n=t.isOpen!=null||t.defaultOpen!=null||!i?c:i,o=H(l,n.isOpen)||t.isExiting||!1;return!n.isOpen&&!o?null:s.createElement(ne,{portalContainer:r},s.createElement(ue,{...t,tooltipRef:l,isExiting:o}))});function ue(e){let r=a.useContext(y),t=a.useRef(null),[l,i]=a.useState(0);q(()=>{t.current&&r.isOpen&&i(t.current.getBoundingClientRect().width)},[r.isOpen,t]);let{overlayProps:c,arrowProps:n,placement:o}=B({placement:e.placement||"top",targetRef:e.triggerRef,overlayRef:e.tooltipRef,offset:e.offset,crossOffset:e.crossOffset,isOpen:r.isOpen,arrowSize:l,arrowBoundaryOffset:e.arrowBoundaryOffset,shouldFlip:e.shouldFlip,onClose:()=>r.close(!0)}),u=_(e.tooltipRef,!!o)||e.isEntering||!1,d=K({...e,defaultClassName:"react-aria-Tooltip",values:{placement:o,isEntering:u,isExiting:e.isExiting,state:r}});e=C(e,c);let{tooltipProps:m}=ae(e,r);return s.createElement("div",{...m,ref:e.tooltipRef,...d,style:{...c.style,...d.style},"data-placement":o??void 0,"data-entering":u||void 0,"data-exiting":e.isExiting||void 0},s.createElement(F.Provider,{value:{...n,placement:o,ref:t}},d.children))}const $e=e=>{const{delay:r=600}=e;return x.jsx(de,{delay:r,...e})},D=a.forwardRef(({className:e,children:r,...t},l)=>{const{classNames:i}=ee("Tooltip");return x.jsxs(fe,{className:X(i.tooltip,e),...t,ref:l,children:[x.jsx(W,{className:i.arrow,children:x.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",children:[x.jsx("path",{d:"M10.3356 7.39793L15.1924 3.02682C15.9269 2.36577 16.8801 2 17.8683 2H20V7.94781e-07L1.74846e-07 -9.53674e-07L0 2L1.4651 2C2.4532 2 3.4064 2.36577 4.1409 3.02682L8.9977 7.39793C9.378 7.7402 9.9553 7.74021 10.3356 7.39793Z"}),x.jsx("path",{d:"M11.0046 8.14124C10.2439 8.82575 9.08939 8.82578 8.32869 8.14122L3.47189 3.77011C2.92109 3.27432 2.20619 2.99999 1.46509 2.99999L4.10999 3L8.99769 7.39793C9.37799 7.7402 9.95529 7.7402 10.3356 7.39793L15.2226 3L17.8683 2.99999C17.1271 2.99999 16.4122 3.27432 15.8614 3.77011L11.0046 8.14124Z"})]})}),r]})});D.displayName="Tooltip";$e.__docgenInfo={description:"@public",methods:[],displayName:"TooltipTrigger"};D.__docgenInfo={description:"@public",methods:[],displayName:"Tooltip",props:{children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}},composes:["Omit"]};export{$e as T,D as a};
