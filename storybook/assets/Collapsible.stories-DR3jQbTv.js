import{r as s,j as p,a7 as Re,H as xe}from"./iframe-BFEEYdl1.js";import{c as W}from"./clsx-B-dksMZM.js";import{u as q}from"./useStyles-DEoPrLs_.js";import{V as Ee,f as Pe}from"./index-BC3lOP_B.js";import{B as we}from"./Box-QZCQKyHx.js";import{B as Se}from"./Button-CRyONDr3.js";import{T as H}from"./Text-DM3joBlx.js";import"./preload-helper-D9Z9MdNV.js";import"./Button-Bh3QTBwv.js";import"./utils-DBQRPUCK.js";import"./Hidden-D5PNItx0.js";import"./useFocusRing-5Bv8HprM.js";import"./usePress-CTqDMXGL.js";import"./Button.module-BHYJStbY.js";const Ie=()=>{};function Oe(e,t){let n={};return Object.entries(e).forEach(([o,r])=>{if(t?.hasOwnProperty(o)){const i=t[o](r);i!=null&&(n={...n,...i});return}r===!0?n[`data-${o.toLowerCase()}`]="":r&&(n[`data-${o.toLowerCase()}`]=r.toString())}),n}function Ne(e,t){return typeof e=="function"?e(t):e}function k(...e){if(e.length===0)return{};if(e.length===1)return Z(e[0],{});let t=Z(e[0],{});for(let n=1;n<e.length;n+=1){const o=e[n];o&&(se(o)?t=o(t):t=ve(t,o))}return t??{}}function Z(e,t){return se(e)?e(t):e??{}}function ve(e,t){return t?e?Object.entries(t).reduce((n,[o,r])=>(Te(o,r)?n[o]=Me(e[o],r):o==="style"?n[o]=Ae(e.style,r):o==="className"?n[o]=De(e.className,r):n[o]=r,n),{...e}):t:e||{}}function Te(e,t){const n=e.charCodeAt(2);return e[0]==="o"&&e[1]==="n"&&n>=65&&n<=90&&typeof t=="function"}function se(e){return typeof e=="function"}function Me(e,t){return n=>{if(ke(n)){const r=n;_(r);const i=t(r);return r.baseUIHandlerPrevented||e?.(r),i}const o=t(n);return e?.(n),o}}function _(e){return e.preventBaseUIHandler=()=>{e.baseUIHandlerPrevented=!0},e}function Ae(e,t){if(t||e)return{...e,...t}}function De(e,t){return t?e?t+" "+e:t:e}function ke(e){return e!=null&&typeof e=="object"&&"nativeEvent"in e}function je(e,t,n){return typeof e=="function"?e(t,n):s.cloneElement(e,{...k(t,e.props),ref:t.ref})}function j(...e){const t=s.useRef(void 0),n=s.useCallback(o=>{const r=e.map(i=>{if(i==null)return null;if(typeof i=="function"){const f=i,a=f(o);return typeof a=="function"?a:()=>{f(null)}}return i.current=o,()=>{i.current=null}});return()=>{r.forEach(i=>i?.())}},e);return s.useMemo(()=>e.every(o=>o==null)?null:o=>{t.current&&(t.current(),t.current=void 0),o!=null&&(t.current=n(o))},e)}const Be=parseInt(s.version,10);function He(e){return Be>=e}function Ue(e,...t){let n;return typeof e!="function"?n=He(19)?e.props.ref:e.ref:n=null,j(n,...t)}const Fe={button:e=>p.jsx("button",{type:"button",...e}),div:e=>p.jsx("div",{...e}),h2:e=>p.jsx("h2",{...e}),h3:e=>p.jsx("h3",{...e}),output:e=>p.jsx("output",{...e}),p:e=>p.jsx("p",{...e}),span:e=>p.jsx("span",{...e}),a:e=>p.jsx("a",{...e}),label:e=>p.jsx("label",{...e}),input:e=>p.jsx("input",{...e}),fieldset:e=>p.jsx("fieldset",{...e}),form:e=>p.jsx("form",{...e}),img:e=>p.jsx("img",{alt:"",...e})},Le={};function G(e){const{render:t,className:n,state:o,ref:r,propGetter:i=x=>x,extraProps:f,customStyleHookMapping:a,styleHooks:c=!0}=e,h=Ne(n,o),d={...s.useMemo(()=>c?Oe(o,a):Le,[o,a,c]),...f};let g;typeof t=="string"?g=Fe[t]:g=t;let C=[];r!==void 0&&(C=Array.isArray(r)?r:[r]);const y=i(d),S={...y,ref:Ue(g,y.ref,...C)};return h!==void 0&&(S.className=h),{renderElement:()=>je(g,S,o)}}function _e({controlled:e,default:t,name:n,state:o="value"}){const{current:r}=s.useRef(e!==void 0),[i,f]=s.useState(t),a=r?e:i,c=s.useCallback(h=>{r||f(h)},[]);return[a,c]}const O=typeof window<"u"?s.useLayoutEffect:s.useEffect;function T(e){const t=s.useRef(e);return O(()=>{t.current=e}),s.useCallback((...n)=>t.current?.(...n),[])}function $e(e,t=!1){const[n,o]=s.useState(),[r,i]=s.useState(e);return e&&!r&&(i(!0),n!=="starting"&&!t&&o("starting")),!e&&r&&n!=="ending"&&o("ending"),!e&&!r&&n==="ending"&&o(void 0),O(()=>{if(!e)return;t&&o("starting");const f=requestAnimationFrame(()=>{o(void 0)});return()=>{cancelAnimationFrame(f)}},[e,t]),s.useMemo(()=>({mounted:r,setMounted:i,transitionStatus:n}),[r,n])}let ee=0;function Ke(e,t="mui"){const[n,o]=s.useState(e),r=e||n;return s.useEffect(()=>{n==null&&(ee+=1,o(`${t}-${ee}`))},[n,t]),r}const We={...Re},te=We.useId;function qe(e,t){if(te!==void 0){const n=te();return e??(t?`${t}-${n}`:n)}return Ke(e,t)}function ie(e){return qe(e,"base-ui")}function Ge(e){const{open:t,defaultOpen:n,onOpenChange:o,disabled:r}=e,[i,f]=_e({controlled:t,default:n,name:"Collapsible",state:"open"}),{mounted:a,setMounted:c,transitionStatus:h}=$e(i,!0),[b,d]=s.useState(ie()),g=T(C=>{o?.(C),f(C)});return s.useMemo(()=>({panelId:b,disabled:r,mounted:a,open:i,setPanelId:d,setMounted:c,setOpen:g,transitionStatus:h}),[b,r,a,i,d,c,g,h])}const $=s.createContext(void 0);function ae(){const e=s.useContext($);if(e===void 0)throw new Error("Base UI: CollapsibleRootContext is missing. Collapsible parts must be placed within <Collapsible.Root>.");return e}const Ve={"data-open":""},ze={"data-closed":""},Ye={open(e){return e?{"data-panel-open":""}:null}},Je={open(e){return e?Ve:ze}},Qe={"data-starting-style":""},Xe={"data-ending-style":""},Ze={transitionStatus(e){return e==="starting"?Qe:e==="ending"?Xe:null}},le={...Je,...Ze},ue=s.forwardRef(function(t,n){const{children:o,className:r,defaultOpen:i=!1,disabled:f=!1,onOpenChange:a,open:c,render:h,...b}=t,d=Ge({open:c,defaultOpen:i,onOpenChange:a??Ie,disabled:f}),g=s.useMemo(()=>({open:d.open,disabled:d.disabled,transitionStatus:d.transitionStatus}),[d.open,d.disabled,d.transitionStatus]),C=s.useMemo(()=>({...d,state:g}),[d,g]),{renderElement:y}=G({render:h??"div",className:r,state:g,ref:n,extraProps:{children:o,...b},customStyleHookMapping:le});return h!==null?p.jsx($.Provider,{value:C,children:y()}):p.jsx($.Provider,{value:C,children:o})});function et(e){const{rootElementName:t=""}=e,[n,o]=s.useState(t.toUpperCase()),r=s.useCallback(i=>{o(i?.tagName??"")},[]);return{rootElementName:n,updateRootElementName:r}}const tt=s.createContext(void 0);function nt(e=!1){const t=s.useContext(tt);if(t===void 0&&!e)throw new Error("Base UI: CompositeRootContext is missing. Composite parts must be placed within <Composite.Root>.");return t}function ot(e={}){const{buttonRef:t,disabled:n=!1,focusableWhenDisabled:o,tabIndex:r,type:i,elementName:f}=e,a=s.useRef(null),{rootElementName:c,updateRootElementName:h}=et({rootElementName:f}),b=nt(!0)!==void 0,d=T(()=>{const m=a.current;return c==="BUTTON"||c==="INPUT"&&["button","submit","reset"].includes(m?.type)}),g=T(()=>{const m=a.current;return!!(c==="A"&&m?.href)}),C=j(h,t,a),y=s.useMemo(()=>{const m={};return r!==void 0&&!b&&(m.tabIndex=r),c==="BUTTON"||c==="INPUT"?o||b?m["aria-disabled"]=n:b||(m.disabled=n):c!==""&&(c!=="A"?(m.role="button",b||(m.tabIndex=r??0)):r&&!b&&(m.tabIndex=r),n&&(m["aria-disabled"]=n,b||(m.tabIndex=o?r??0:-1))),m},[n,c,o,b,r]);return O(()=>{const m=a.current;m instanceof HTMLButtonElement&&b&&n&&y.disabled===void 0&&m.disabled&&(m.disabled=!1)},[n,y.disabled,b]),{getButtonProps:s.useCallback((m={})=>{const{onClick:x,onMouseDown:N,onKeyUp:I,onKeyDown:v,onPointerDown:E,...M}=m;return k({type:i,onClick(l){if(n){l.preventDefault();return}x?.(l)},onMouseDown(l){n||N?.(l)},onKeyDown(l){(n&&o&&l.key!=="Tab"||l.target===l.currentTarget&&!d()&&l.key===" ")&&l.preventDefault(),n||(_(l),v?.(l)),!l.baseUIHandlerPrevented&&l.target===l.currentTarget&&!d()&&!g()&&l.key==="Enter"&&!n&&(x?.(l),l.preventDefault())},onKeyUp(l){n||(_(l),I?.(l)),!l.baseUIHandlerPrevented&&l.target===l.currentTarget&&!d()&&!n&&l.key===" "&&x?.(l)},onPointerDown(l){if(n){l.preventDefault();return}E?.(l)},ref:C},y,M)},[y,n,o,d,g,C,i]),buttonRef:C}}function rt(e){const{panelId:t,disabled:n,open:o,rootRef:r,setOpen:i}=e,{getButtonProps:f,buttonRef:a}=ot({disabled:n,focusableWhenDisabled:!0,type:"button"}),c=j(r,a);return{getRootProps:s.useCallback((b={})=>k({type:"button","aria-controls":t,"aria-expanded":o,disabled:n,onClick(){i(!o)},ref:c},b,f),[t,n,f,c,o,i])}}const ce=s.forwardRef(function(t,n){const{panelId:o,open:r,setOpen:i,state:f,disabled:a}=ae(),{className:c,disabled:h=a,id:b,render:d,...g}=t,{getRootProps:C}=rt({disabled:h,panelId:o,open:r,setOpen:i,rootRef:n}),{renderElement:y}=G({propGetter:C,render:d??"button",state:f,className:c,extraProps:g,customStyleHookMapping:Ye});return y()});let U=null,F;function st(){return U==null&&(U=document.createElement("div")),F===void 0&&(F=U.computedStyleMap!==void 0),F}function it(e){return e&&e.ownerDocument||document}function de(e){return it(e).defaultView||window}function at(e,t=!1){const n=s.useRef(-1),o=s.useRef(-1),r=T(()=>{cancelAnimationFrame(n.current),clearTimeout(o.current)});return s.useEffect(()=>r,[r]),T(i=>{r();const f=e.current;f&&(typeof f.getAnimations!="function"||globalThis.BASE_UI_ANIMATIONS_DISABLED?i():n.current=requestAnimationFrame(()=>{function a(){f&&Promise.allSettled(f.getAnimations().map(c=>c.finished)).then(()=>{xe.flushSync(i)})}t?o.current=window.setTimeout(a):a()}))})}const lt=[];function ne(e){s.useEffect(e,lt)}function ut(e){return st()?e.computedStyleMap().get("animation-name")?.value??void 0:de(e).getComputedStyle(e).animationName}let L;function oe(e){if(L===void 0){const t=typeof CSS<"u"&&typeof CSS.supports=="function"&&CSS.supports("content-visibility","hidden"),n="onbeforematch"in de(e);L=t&&n}return L}function ct(e){const{hiddenUntilFound:t,panelId:n,keepMounted:o,open:r,mounted:i,ref:f,setPanelId:a,setMounted:c,setOpen:h}=e,b=ie(n),d=s.useRef(null),[{height:g,width:C},y]=s.useState({height:0,width:0}),S=s.useRef("none"),m=s.useRef(null),x=s.useRef(!1);O(()=>(a(!o&&!r?void 0:b),()=>{a(void 0)}),[b,a,o,r]);const N=T(u=>{if(!u)return;d.current=u;const R=ut(u);S.current=R??"none",m.current=u.style.transitionDuration}),I=j(f,N),v=at(d),E=r||i,M=s.useRef(!1),l=s.useRef(E),B=s.useCallback(()=>{const u=d.current;if(!u)return;function R(){x.current=!0}function P(){x.current=!1}function w(){x.current=!1}return u.addEventListener("transitioncancel",w),u.addEventListener("transitionend",P),u.addEventListener("transitionrun",R),()=>{u.removeEventListener("transitioncancel",w),u.removeEventListener("transitionend",P),u.removeEventListener("transitionrun",R)}},[]);O(()=>{const{current:u}=d;let R=-1,P=-1;if(u){const w=M.current,ge=l.current,he=x.current,Ce=u.style.animationName==="none"?"":u.style.animationName,ye=m.current,J=w||ge;u.style.animationName="none";const Q=!r&&!i;if(!he||Q){o||B();const X=Q?{height:0,width:0}:u.getBoundingClientRect();y({height:X.height,width:X.width})}u.style.animationName=J?"none":Ce,u.style.transitionDuration=J?"0s":ye??"",v(()=>{c(r),w&&(M.current=!1,R=requestAnimationFrame(()=>{P=requestAnimationFrame(()=>{u.style.transitionDuration=m.current??""})}))})}return()=>{cancelAnimationFrame(R),cancelAnimationFrame(P)}},[i,o,r,B,v,c,a]),ne(()=>{const u=d.current;let R=-1,P=-1;const w=requestAnimationFrame(()=>{l.current=!1,u&&(R=requestAnimationFrame(()=>{P=requestAnimationFrame(()=>{u.style.transitionDuration=m.current??""})}))});return()=>{cancelAnimationFrame(w),cancelAnimationFrame(R),cancelAnimationFrame(P)}}),ne(B),s.useEffect(function(){const{current:R}=d;if(!R||!oe(R))return;function P(w){w.preventDefault(),M.current=!0,h(!0)}return R.addEventListener("beforematch",P),()=>{R.removeEventListener("beforematch",P)}},[h]),O(()=>{const{current:u}=d;u&&oe(u)&&u?.hidden&&!E&&t===!0&&(u.hidden="until-found")},[t,E]);const z=t?"until-found":"hidden",Y=s.useCallback((u={})=>k({id:b,hidden:E?void 0:!!z,ref:I},u),[z,b,E,I]);return s.useMemo(()=>({getRootProps:Y,height:g,width:C,isOpen:E}),[Y,g,C,E])}let re=function(e){return e.collapsiblePanelHeight="--collapsible-panel-height",e.collapsiblePanelWidth="--collapsible-panel-width",e}({});const fe=s.forwardRef(function(t,n){const{className:o,hiddenUntilFound:r,id:i,keepMounted:f,render:a,...c}=t,{mounted:h,open:b,panelId:d,setPanelId:g,setMounted:C,setOpen:y,state:S}=ae();O(()=>{i&&g(i)},[i,g]);const m=r??!1,{getRootProps:x,height:N,width:I,isOpen:v}=ct({hiddenUntilFound:m,panelId:d,keepMounted:f??!1,mounted:h,open:b,ref:n,setPanelId:g,setMounted:C,setOpen:y}),{renderElement:E}=G({propGetter:x,render:a??"div",state:S,className:o,extraProps:{...c,style:{...c.style,[re.collapsiblePanelHeight]:N?`${N}px`:void 0,[re.collapsiblePanelWidth]:I?`${I}px`:void 0}},customStyleHookMapping:le});return!f&&!v&&!m?null:E()}),V={"bui-CollapsiblePanel":"_bui-CollapsiblePanel_1ak39_20"},pe=s.forwardRef(({className:e,...t},n)=>{const{classNames:o,cleanedProps:r}=q("Collapsible",t);return p.jsx(ue,{ref:n,className:W(o.root,V[o.root],e),...r})});pe.displayName=ue.displayName;const me=s.forwardRef(({className:e,...t},n)=>{const{classNames:o,cleanedProps:r}=q("Collapsible",t);return p.jsx(ce,{ref:n,className:W(o.trigger,V[o.trigger],e),...r})});me.displayName=ce.displayName;const be=s.forwardRef(({className:e,...t},n)=>{const{classNames:o,cleanedProps:r}=q("Collapsible",t);return p.jsx(fe,{ref:n,className:W(o.panel,V[o.panel],e),...r})});be.displayName=fe.displayName;const K={Root:pe,Trigger:me,Panel:be},St={title:"Backstage UI/Collapsible",component:K.Root},A={args:{style:{display:"flex",flexDirection:"column",gap:"var(--bui-space-2)",alignItems:"center"},children:p.jsxs(p.Fragment,{children:[p.jsx(K.Trigger,{render:(e,t)=>p.jsx(Se,{variant:"secondary",iconEnd:t.open?p.jsx(Ee,{}):p.jsx(Pe,{}),...e,children:t.open?"Close Panel":"Open Panel"})}),p.jsx(K.Panel,{children:p.jsxs(we,{p:"4",style:{border:"1px solid var(--bui-border)",backgroundColor:"var(--bui-bg-surface-1)",color:"var(--bui-fg-primary)",borderRadius:"var(--bui-radius-2)",width:"460px"},children:[p.jsx(H,{children:"It's the edge of the world and all of Western civilization"}),p.jsx(H,{children:"The sun may rise in the East, at least it settled in a final location"}),p.jsx(H,{children:"It's understood that Hollywood sells Californication"})]})})]})}},D={args:{...A.args,defaultOpen:!0}};A.parameters={...A.parameters,docs:{...A.parameters?.docs,source:{originalSource:`{
  args: {
    style: {
      display: 'flex',
      flexDirection: 'column',
      gap: 'var(--bui-space-2)',
      alignItems: 'center'
    },
    children: <>
        <Collapsible.Trigger render={(props, state) => <Button variant="secondary" iconEnd={state.open ? <RiArrowUpSLine /> : <RiArrowDownSLine />} {...props}>
              {state.open ? 'Close Panel' : 'Open Panel'}
            </Button>} />
        <Collapsible.Panel>
          <Box p="4" style={{
          border: '1px solid var(--bui-border)',
          backgroundColor: 'var(--bui-bg-surface-1)',
          color: 'var(--bui-fg-primary)',
          borderRadius: 'var(--bui-radius-2)',
          width: '460px'
        }}>
            <Text>
              It's the edge of the world and all of Western civilization
            </Text>
            <Text>
              The sun may rise in the East, at least it settled in a final
              location
            </Text>
            <Text>It's understood that Hollywood sells Californication</Text>
          </Box>
        </Collapsible.Panel>
      </>
  }
}`,...A.parameters?.docs?.source}}};D.parameters={...D.parameters,docs:{...D.parameters?.docs,source:{originalSource:`{
  args: {
    ...Default.args,
    defaultOpen: true
  }
}`,...D.parameters?.docs?.source}}};const It=["Default","Open"];export{A as Default,D as Open,It as __namedExportsOrder,St as default};
