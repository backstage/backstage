import{r as o,R as $,j as p}from"./iframe-M9O-K8SB.js";import{$ as Z,a as N,e as O,b as ee}from"./utils-BXllfVt4.js";import{e as te,n as ae,f as se,g as re,h as ne,j as z,r as ie,q as le,s as oe}from"./SelectionManager-AOhnTTKk.js";import{a as ce,c as de}from"./SelectionIndicator-yhlvspp_.js";import{$ as ue}from"./Hidden-DTd05gNK.js";import{$ as P,a as be,d as I}from"./useObjectRef-BPFp5snO.js";import{$ as w,d as fe,a as ve}from"./useFocusable-BwFERnd_.js";import{a as pe,b as F}from"./useListState-DtLAZGwv.js";import{a as $e,$ as me}from"./animation-D5pTcXzL.js";import{$ as W}from"./useLabels-C3g0X61E.js";import{$ as ye}from"./useHasTabbableChild-D6MbJ94R.js";import{$ as he}from"./context-Bv6kxITJ.js";import{a as j,$ as ge}from"./useFocusRing-COnCKKka.js";import{$ as xe}from"./useControlledState-DzBnLbpE.js";import{u as C}from"./useStyles-BRwt6BXn.js";import{c as S}from"./clsx-B-dksMZM.js";import{c as Te,i as Pe}from"./InternalLinkProvider-Bi_DmABW.js";import{u as Ke}from"./index-CuiKZooy.js";const q=new WeakMap;function L(a,e,t){return a?(typeof e=="string"&&(e=e.replace(/\s+/g,"")),`${q.get(a)}-${t}-${e}`):""}function Se(a,e,t){let{key:s,isDisabled:r,shouldSelectOnPressUp:n}=a,{selectionManager:i,selectedKey:u}=e,l=s===u,c=r||e.isDisabled||e.selectionManager.isDisabled(s),{itemProps:b,isPressed:d}=te({selectionManager:i,key:s,ref:t,isDisabled:c,shouldSelectOnPressUp:n,linkBehavior:"selection"}),v=L(e,s,"tab"),f=L(e,s,"tabpanel"),{tabIndex:m}=b,g=e.collection.getItem(s),T=w(g?.props,{labelable:!0});delete T.id;let M=fe(g?.props),{focusableProps:D}=ve({isDisabled:c},t);return{tabProps:P(T,D,M,b,{id:v,"aria-selected":l,"aria-disabled":c||void 0,"aria-controls":l?f:void 0,tabIndex:c?void 0:m,role:"tab"}),isSelected:l,isDisabled:c,isPressed:d}}function Re(a,e,t){let s=ye(t)?void 0:0;var r;const n=L(e,(r=a.id)!==null&&r!==void 0?r:e?.selectedKey,"tabpanel"),i=W({...a,id:n,"aria-labelledby":L(e,e?.selectedKey,"tab")});return{tabPanelProps:P(i,{tabIndex:s,role:"tabpanel","aria-describedby":a["aria-describedby"],"aria-details":a["aria-details"]})}}class we{getKeyLeftOf(e){return this.flipDirection?this.getNextKey(e):this.getPreviousKey(e)}getKeyRightOf(e){return this.flipDirection?this.getPreviousKey(e):this.getNextKey(e)}isDisabled(e){var t,s;return this.disabledKeys.has(e)||!!(!((s=this.collection.getItem(e))===null||s===void 0||(t=s.props)===null||t===void 0)&&t.isDisabled)}getFirstKey(){let e=this.collection.getFirstKey();return e!=null&&this.isDisabled(e)&&(e=this.getNextKey(e)),e}getLastKey(){let e=this.collection.getLastKey();return e!=null&&this.isDisabled(e)&&(e=this.getPreviousKey(e)),e}getKeyAbove(e){return this.tabDirection?null:this.getPreviousKey(e)}getKeyBelow(e){return this.tabDirection?null:this.getNextKey(e)}getNextKey(e){let t=e;do t=this.collection.getKeyAfter(t),t==null&&(t=this.collection.getFirstKey());while(t!=null&&this.isDisabled(t));return t}getPreviousKey(e){let t=e;do t=this.collection.getKeyBefore(t),t==null&&(t=this.collection.getLastKey());while(t!=null&&this.isDisabled(t));return t}constructor(e,t,s,r=new Set){this.collection=e,this.flipDirection=t==="rtl"&&s==="horizontal",this.disabledKeys=r,this.tabDirection=s==="horizontal"}}function Ce(a,e,t){let{orientation:s="horizontal",keyboardActivation:r="automatic"}=a,{collection:n,selectionManager:i,disabledKeys:u}=e,{direction:l}=he(),c=o.useMemo(()=>new we(n,l,s,u),[n,u,s,l]),{collectionProps:b}=ae({ref:t,selectionManager:i,keyboardDelegate:c,selectOnFocus:r==="automatic",disallowEmptySelection:!0,scrollRef:t,linkBehavior:"selection"}),d=be();q.set(e,d);let v=W({...a,id:d});return{tabListProps:{...P(b,v),role:"tablist","aria-orientation":s,tabIndex:void 0}}}function Ee(a){var e;let[t,s]=xe(a.selectedKey,(e=a.defaultSelectedKey)!==null&&e!==void 0?e:null,a.onSelectionChange),r=o.useMemo(()=>t!=null?[t]:[],[t]),{collection:n,disabledKeys:i,selectionManager:u}=pe({...a,selectionMode:"single",disallowEmptySelection:!0,allowDuplicateSelectionEvents:!0,selectedKeys:r,onSelectionChange:c=>{if(c==="all")return;var b;let d=(b=c.values().next().value)!==null&&b!==void 0?b:null;d===t&&a.onSelectionChange&&a.onSelectionChange(d),s(d)}}),l=t!=null?n.getItem(t):null;return{collection:n,disabledKeys:i,selectionManager:u,selectedKey:t,setSelectedKey:s,selectedItem:l}}function Me(a){var e,t;let s=Ee({...a,onSelectionChange:a.onSelectionChange?l=>{var c;l!=null&&((c=a.onSelectionChange)===null||c===void 0||c.call(a,l))}:void 0,suppressTextValueWarning:!0,defaultSelectedKey:(t=(e=a.defaultSelectedKey)!==null&&e!==void 0?e:k(a.collection,a.disabledKeys?new Set(a.disabledKeys):new Set))!==null&&t!==void 0?t:void 0}),{selectionManager:r,collection:n,selectedKey:i}=s,u=o.useRef(i);return o.useEffect(()=>{let l=i;a.selectedKey==null&&(r.isEmpty||l==null||!n.getItem(l))&&(l=k(n,s.disabledKeys),l!=null&&r.setSelectedKeys([l])),(l!=null&&r.focusedKey==null||!r.isFocused&&l!==u.current)&&r.setFocusedKey(l),u.current=l}),{...s,isDisabled:a.isDisabled||!1}}function k(a,e){let t=null;if(a){var s,r,n,i;for(t=a.getFirstKey();t!=null&&(e.has(t)||!((r=a.getItem(t))===null||r===void 0||(s=r.props)===null||s===void 0)&&s.isDisabled)&&t!==a.getLastKey();)t=a.getKeyAfter(t);t!=null&&(e.has(t)||!((i=a.getItem(t))===null||i===void 0||(n=i.props)===null||n===void 0)&&n.isDisabled)&&t===a.getLastKey()&&(t=a.getFirstKey())}return t}const A=o.createContext(null),K=o.createContext(null),De=o.forwardRef(function(e,t){[e,t]=Z(e,t,A);let{children:s,orientation:r="horizontal"}=e;return s=o.useMemo(()=>typeof s=="function"?s({orientation:r,defaultChildren:null}):s,[s,r]),$.createElement(re,{content:s},n=>$.createElement(Le,{props:e,collection:n,tabsRef:t}))});function Le({props:a,tabsRef:e,collection:t}){let{orientation:s="horizontal"}=a,r=Me({...a,collection:t,children:void 0}),{focusProps:n,isFocused:i,isFocusVisible:u}=j({within:!0}),l=o.useMemo(()=>({orientation:s,isFocusWithin:i,isFocusVisible:u}),[s,i,u]),c=N({...a,defaultClassName:"react-aria-Tabs",values:l}),b=w(a,{global:!0});return $.createElement("div",{...P(b,c,n),ref:e,slot:a.slot||void 0,"data-focused":i||void 0,"data-orientation":s,"data-focus-visible":u||void 0,"data-disabled":r.isDisabled||void 0},$.createElement(O,{values:[[A,a],[K,r]]},c.children))}const Ne=o.forwardRef(function(e,t){return o.useContext(K)?$.createElement(Ae,{props:e,forwardedRef:t}):$.createElement(ne,e)});function Ae({props:a,forwardedRef:e}){let t=o.useContext(K),{CollectionRoot:s}=o.useContext(z),{orientation:r="horizontal",keyboardActivation:n="automatic"}=ee(A),i=I(e),{tabListProps:u}=Ce({...a,orientation:r,keyboardActivation:n},t,i),l=N({...a,children:null,defaultClassName:"react-aria-TabList",values:{orientation:r,state:t}}),c=w(a,{global:!0});return delete c.id,$.createElement("div",{...P(c,l,u),ref:i,"data-orientation":r||void 0},$.createElement(de,null,$.createElement(s,{collection:t.collection,persistedKeys:ie(t.selectionManager.focusedKey)})))}class B extends le{}B.type="item";const Ie=se(B,(a,e,t)=>{let s=o.useContext(K),r=I(e),{tabProps:n,isSelected:i,isDisabled:u,isPressed:l}=Se({key:t.key,...a},s,r),{focusProps:c,isFocused:b,isFocusVisible:d}=j(),{hoverProps:v,isHovered:f}=ge({isDisabled:u,onHoverStart:a.onHoverStart,onHoverEnd:a.onHoverEnd,onHoverChange:a.onHoverChange}),m=N({...a,id:void 0,children:t.rendered,defaultClassName:"react-aria-Tab",values:{isSelected:i,isDisabled:u,isFocused:b,isFocusVisible:d,isPressed:l,isHovered:f}}),g=t.props.href?"a":"div",T=w(a,{global:!0});return delete T.id,delete T.onClick,$.createElement(g,{...P(T,m,n,c,v),ref:r,"data-selected":i||void 0,"data-disabled":u||void 0,"data-focused":b||void 0,"data-focus-visible":d||void 0,"data-pressed":l||void 0,"data-hovered":f||void 0},$.createElement(ce.Provider,{value:{isSelected:i}},m.children))}),je=ue(function(e,t){const s=o.useContext(K);let r=I(t),n=s.selectedKey===e.id,[i,u]=o.useState(s.selectedKey!=null?n:null);i==null&&s.selectedKey!=null?u(n):!n&&i&&u(!1);let l=$e(r,n);return!n&&!e.shouldForceMount&&!l?null:$.createElement(_e,{...e,tabPanelRef:r,isInitiallySelected:i||!1,isExiting:l})});function _e(a){let e=o.useContext(K),{id:t,tabPanelRef:s,isInitiallySelected:r,isExiting:n,...i}=a,{tabPanelProps:u}=Re(a,e,s),{focusProps:l,isFocused:c,isFocusVisible:b}=j(),d=e.selectedKey===a.id,v=me(s)&&!r,f=N({...a,defaultClassName:"react-aria-TabPanel",values:{isFocused:c,isFocusVisible:b,isInert:F(!d),isEntering:v,isExiting:n,state:e}}),m=w(i,{global:!0});delete m.id;let g=d?P(m,u,l,f):P(m,f);return $.createElement("div",{...g,ref:s,"data-focused":c||void 0,"data-focus-visible":b||void 0,inert:F(!d||a.inert),"data-inert":d?void 0:"true","data-entering":v||void 0,"data-exiting":n||void 0},$.createElement(O,{values:[[A,null],[K,null]]},$.createElement(z.Provider,{value:oe},f.children)))}const E={classNames:{tabs:"bui-Tabs",tabList:"bui-TabList",tabListWrapper:"bui-TabListWrapper",tab:"bui-Tab",tabActive:"bui-TabActive",tabHovered:"bui-TabHovered",panel:"bui-TabPanel"}},R={"bui-Tabs":"_bui-Tabs_gv9jg_20","bui-TabList":"_bui-TabList_gv9jg_40","bui-TabListWrapper":"_bui-TabListWrapper_gv9jg_45","bui-Tab":"_bui-Tab_gv9jg_20","bui-TabActive":"_bui-TabActive_gv9jg_68","bui-TabHovered":"_bui-TabHovered_gv9jg_82","bui-TabPanel":"_bui-TabPanel_gv9jg_98"},V=a=>{const{tabRefs:e,tabsRef:t,hoveredKey:s,prevHoveredKey:r}=a,{classNames:n}=C(E),i=o.useContext(K),u=o.useRef(null),l=o.useCallback(()=>{if(!t.current)return;const c=t.current.getBoundingClientRect();if(i?.selectedKey){const b=e.current.get(i.selectedKey.toString());if(b){const d=b.getBoundingClientRect(),v=d.left-c.left,f=d.top-c.top;u.current===null?(t.current.style.setProperty("--active-transition-duration","0s"),requestAnimationFrame(()=>{t.current&&t.current.style.setProperty("--active-transition-duration","0.25s")})):t.current.style.setProperty("--active-transition-duration","0.25s"),u.current=i.selectedKey.toString(),t.current.style.setProperty("--active-tab-left",`${v}px`),t.current.style.setProperty("--active-tab-right",`${v+d.width}px`),t.current.style.setProperty("--active-tab-top",`${f}px`),t.current.style.setProperty("--active-tab-bottom",`${f+d.height}px`),t.current.style.setProperty("--active-tab-width",`${d.width}px`),t.current.style.setProperty("--active-tab-height",`${d.height}px`)}}if(s){const b=e.current.get(s);if(b){const d=b.getBoundingClientRect(),v=d.left-c.left,f=d.top-c.top;t.current.style.setProperty("--hovered-tab-left",`${v}px`),t.current.style.setProperty("--hovered-tab-right",`${v+d.width}px`),t.current.style.setProperty("--hovered-tab-top",`${f}px`),t.current.style.setProperty("--hovered-tab-bottom",`${f+d.height}px`),t.current.style.setProperty("--hovered-tab-width",`${d.width}px`),t.current.style.setProperty("--hovered-tab-height",`${d.height}px`),r.current===null?(t.current.style.setProperty("--hovered-transition-duration","0s"),requestAnimationFrame(()=>{t.current&&t.current.style.setProperty("--hovered-transition-duration","0.2s")})):t.current.style.setProperty("--hovered-transition-duration","0.2s"),r.current=s,t.current.style.setProperty("--hovered-tab-opacity","1")}}else t.current.style.setProperty("--hovered-tab-opacity","0"),r.current=null},[i?.selectedKey,s,e.current]);return o.useEffect(()=>{l()},[l,e.current.size]),o.useEffect(()=>{const c=()=>l();return window.addEventListener("resize",c),()=>window.removeEventListener("resize",c)},[l]),p.jsxs(p.Fragment,{children:[p.jsx("div",{className:S(n.tabActive,R[n.tabActive])}),p.jsx("div",{className:S(n.tabHovered,R[n.tabHovered])})]})};V.__docgenInfo={description:`A component that renders the indicators for the toolbar.

@internal`,methods:[],displayName:"TabsIndicators",props:{tabRefs:{required:!0,tsType:{name:"MutableRefObject",elements:[{name:"Map",elements:[{name:"string"},{name:"HTMLDivElement"}],raw:"Map<string, HTMLDivElement>"}],raw:"MutableRefObject<Map<string, HTMLDivElement>>"},description:""},tabsRef:{required:!0,tsType:{name:"MutableRefObject",elements:[{name:"union",raw:"HTMLDivElement | null",elements:[{name:"HTMLDivElement"},{name:"null"}]}],raw:"MutableRefObject<HTMLDivElement | null>"},description:""},hoveredKey:{required:!0,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:""},prevHoveredKey:{required:!0,tsType:{name:"MutableRefObject",elements:[{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]}],raw:"MutableRefObject<string | null>"},description:""}}};const{RoutingProvider:He,useRoutingRegistrationEffect:Fe}=Te(),U=o.createContext(void 0),G=()=>{const a=o.useContext(U);if(!a)throw new Error("Tab components must be used within a Tabs component");return a},J=o.createContext(null),ke=(a,e,t)=>t==="exact"?a===e:a===e?!0:e.startsWith(`${a}/`),Oe=a=>{const{classNames:e,cleanedProps:t}=C(E,a),{className:s,children:r,...n}=t,i=o.useRef(null),u=o.useRef(new Map),[l,c]=o.useState(null),b=o.useRef(null),[d,v]=o.useState(()=>new Set),[f,m]=o.useState(()=>new Map),g=(y,h)=>{h?u.current.set(y,h):u.current.delete(y)},T=o.useMemo(()=>{if(d.size===0)return;if(f.size===0)return"";let y=null,h=-1;return f.forEach((x,Y)=>{x>h&&(h=x,y=Y)}),y},[d,f]),M=o.useCallback(y=>{v(h=>new Set(h).add(y))},[]),D=o.useCallback(y=>{v(h=>{const x=new Set(h);return x.delete(y),x})},[]),_=o.useCallback((y,h)=>{m(x=>new Map(x).set(y,h))},[]),H=o.useCallback(y=>{m(h=>{const x=new Map(h);return x.delete(y),x})},[]);if(!r)return null;const Q={tabsRef:i,tabRefs:u,hoveredKey:l,prevHoveredKey:b,setHoveredKey:c,setTabRef:g},X=o.useMemo(()=>({registerRoutedTab:M,unregisterRoutedTab:D,registerActiveTab:_,unregisterActiveTab:H}),[M,D,_,H]);return p.jsx(He,{children:p.jsx(U.Provider,{value:Q,children:p.jsx(J.Provider,{value:X,children:p.jsx(De,{className:S(e.tabs,R[e.tabs],s),keyboardActivation:"manual",selectedKey:T,ref:i,...n,children:r})})})})},ze=a=>{const{classNames:e,cleanedProps:t}=C(E,a),{className:s,children:r,...n}=t,{setHoveredKey:i,tabRefs:u,tabsRef:l,hoveredKey:c,prevHoveredKey:b}=G(),d=f=>{i(f)},v=o.Children.map(r,f=>o.isValidElement(f)?o.cloneElement(f,{onHoverStart:()=>d(f.props.id),onHoverEnd:()=>d(null)}):f);return p.jsxs("div",{className:S(e.tabListWrapper,R[e.tabListWrapper],s),children:[p.jsx(Ne,{className:S(e.tabList,R[e.tabList]),"aria-label":"Toolbar tabs",...n,children:v}),p.jsx(V,{tabRefs:u,tabsRef:l,hoveredKey:c,prevHoveredKey:b})]})};function We({id:a,href:e,matchStrategy:t="exact"}){const s=o.useContext(J),r=Ke();Fe(e),o.useEffect(()=>{if(s)return s.registerRoutedTab(a),()=>s.unregisterRoutedTab(a)},[a,s]);const n=ke(e,r.pathname,t),i=e.split("/").filter(Boolean).length;return o.useEffect(()=>{if(n&&s)return s.registerActiveTab(a,i),()=>s.unregisterActiveTab(a)},[n,a,i,s]),null}const qe=a=>{const{classNames:e,cleanedProps:t}=C(E,a),{className:s,href:r,children:n,id:i,matchStrategy:u,...l}=t,{setTabRef:c}=G();return p.jsxs(p.Fragment,{children:[Pe(r)&&p.jsx(We,{id:i,href:r,matchStrategy:u}),p.jsx(Ie,{id:i,className:S(e.tab,R[e.tab],s),ref:b=>c(i,b),href:r,...l,children:n})]})},Be=a=>{const{classNames:e,cleanedProps:t}=C(E,a),{className:s,children:r,...n}=t;return p.jsx(je,{className:S(e.panel,R[e.panel],s),...n,children:r})};Oe.__docgenInfo={description:`A component that renders a list of tabs.

@public`,methods:[],displayName:"Tabs",composes:["AriaTabsProps"]};ze.__docgenInfo={description:`A component that renders a list of tabs.

@public`,methods:[],displayName:"TabList",composes:["Omit"]};qe.__docgenInfo={description:`A component that renders a tab.

@public`,methods:[],displayName:"Tab",props:{matchStrategy:{required:!1,tsType:{name:"union",raw:"'exact' | 'prefix'",elements:[{name:"literal",value:"'exact'"},{name:"literal",value:"'prefix'"}]},description:`Strategy for matching the current route to determine if this tab should be active.
- 'exact': Tab href must exactly match the current pathname (default)
- 'prefix': Tab is active if current pathname starts with tab href`}},composes:["AriaTabProps"]};Be.__docgenInfo={description:`A component that renders the content of a tab.

@public`,methods:[],displayName:"TabPanel",composes:["AriaTabPanelProps"]};export{Oe as T,ze as a,qe as b,Be as c};
