import{b as En,_ as T}from"./defaultTheme-BC4DFfCk.js";import{r as a}from"./index-DSHF18-l.js";import{r as Pn}from"./index-DBvFAGNd.js";import{d as On}from"./debounce-DtXjJkxj.js";import{w as Tn,c as Z}from"./capitalize-90DKmOiu.js";import{o as nn,a as xn}from"./ownerWindow-BCxlYCSn.js";import{c as wn}from"./createChainedFunction-Da-WpsAN.js";import{M as bn}from"./Modal-CwuOZwNt.js";import{P as Cn}from"./Paper-D1gKpVrP.js";import{G as yn}from"./Grow-DbwKXL8U.js";function tn(o,n){var r=0;return typeof n=="number"?r=n:n==="center"?r=o.height/2:n==="bottom"&&(r=o.height),r}function en(o,n){var r=0;return typeof n=="number"?r=n:n==="center"?r=o.width/2:n==="right"&&(r=o.width),r}function rn(o){return[o.horizontal,o.vertical].map(function(n){return typeof n=="number"?"".concat(n,"px"):n}).join(" ")}function zn(o,n){for(var r=n,g=0;r&&r!==o;)r=r.parentElement,g+=r.scrollTop;return g}function x(o){return typeof o=="function"?o():o}var Rn={root:{},paper:{position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}},$n=a.forwardRef(function(n,r){var g=n.action,f=n.anchorEl,w=n.anchorOrigin,d=w===void 0?{vertical:"top",horizontal:"left"}:w,b=n.anchorPosition,C=n.anchorReference,u=C===void 0?"anchorEl":C,on=n.children,y=n.classes,an=n.className,cn=n.container,z=n.elevation,sn=z===void 0?8:z,P=n.getContentAnchorEl,R=n.marginThreshold,s=R===void 0?16:R,ln=n.onEnter,fn=n.onEntered,$=n.onEntering,un=n.onExit,hn=n.onExited,vn=n.onExiting,l=n.open,_=n.PaperProps,D=_===void 0?{}:_,k=n.transformOrigin,p=k===void 0?{vertical:"top",horizontal:"left"}:k,A=n.TransitionComponent,N=A===void 0?yn:A,W=n.transitionDuration,H=W===void 0?"auto":W,M=n.TransitionProps,S=M===void 0?{}:M,mn=En(n,["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","classes","className","container","elevation","getContentAnchorEl","marginThreshold","onEnter","onEntered","onEntering","onExit","onExited","onExiting","open","PaperProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps"]),O=a.useRef(),L=a.useCallback(function(t){if(u==="anchorPosition")return b;var e=x(f),c=e&&e.nodeType===1?e:nn(O.current).body,i=c.getBoundingClientRect(),E=t===0?d.vertical:"center";return{top:i.top+tn(i,E),left:i.left+en(i,d.horizontal)}},[f,d.horizontal,d.vertical,b,u]),j=a.useCallback(function(t){var e=0;if(P&&u==="anchorEl"){var c=P(t);if(c&&t.contains(c)){var i=zn(t,c);e=c.offsetTop+c.clientHeight/2-i||0}}return e},[d.vertical,u,P]),B=a.useCallback(function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return{vertical:tn(t,p.vertical)+e,horizontal:en(t,p.horizontal)}},[p.horizontal,p.vertical]),G=a.useCallback(function(t){var e=j(t),c={width:t.offsetWidth,height:t.offsetHeight},i=B(c,e);if(u==="none")return{top:null,left:null,transformOrigin:rn(i)};var E=L(e),v=E.top-i.vertical,m=E.left-i.horizontal,F=v+c.height,I=m+c.width,X=xn(x(f)),Y=X.innerHeight-s,q=X.innerWidth-s;if(v<s){var J=v-s;v-=J,i.vertical+=J}else if(F>Y){var K=F-Y;v-=K,i.vertical+=K}if(m<s){var Q=m-s;m-=Q,i.horizontal+=Q}else if(I>q){var U=I-q;m-=U,i.horizontal+=U}return{top:"".concat(Math.round(v),"px"),left:"".concat(Math.round(m),"px"),transformOrigin:rn(i)}},[f,u,L,j,B,s]),h=a.useCallback(function(){var t=O.current;if(t){var e=G(t);e.top!==null&&(t.style.top=e.top),e.left!==null&&(t.style.left=e.left),t.style.transformOrigin=e.transformOrigin}},[G]),dn=function(e,c){$&&$(e,c),h()},gn=a.useCallback(function(t){O.current=Pn.findDOMNode(t)},[]);a.useEffect(function(){l&&h()}),a.useImperativeHandle(g,function(){return l?{updatePosition:function(){h()}}:null},[l,h]),a.useEffect(function(){if(l){var t=On(function(){h()});return window.addEventListener("resize",t),function(){t.clear(),window.removeEventListener("resize",t)}}},[l,h]);var V=H;H==="auto"&&!N.muiSupportAuto&&(V=void 0);var pn=cn||(f?nn(x(f)).body:void 0);return a.createElement(bn,T({container:pn,open:l,ref:r,BackdropProps:{invisible:!0},className:Z(y.root,an)},mn),a.createElement(N,T({appear:!0,in:l,onEnter:ln,onEntered:fn,onExit:un,onExited:hn,onExiting:vn,timeout:V},S,{onEntering:wn(dn,S.onEntering)}),a.createElement(Cn,T({elevation:sn,ref:gn},D,{className:Z(y.paper,D.className)}),on)))});const jn=Tn(Rn,{name:"MuiPopover"})($n);export{jn as P};
