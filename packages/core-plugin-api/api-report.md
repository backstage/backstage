## API Report File for "@backstage/core-plugin-api"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts
/// <reference types="react" />

import { BackstageTheme } from '@backstage/theme';
import { ComponentType } from 'react';
import { Config } from '@backstage/config';
import { default as React_2 } from 'react';
import { ReactElement } from 'react';
import { ReactNode } from 'react';
import { SvgIconProps } from '@material-ui/core';

// @public
export type AlertApi = {
  post(alert: AlertMessage): void;
  alert$(): Observable<AlertMessage>;
};

// @public (undocumented)
export const alertApiRef: ApiRef<AlertApi>;

// @public (undocumented)
export type AlertMessage = {
  message: string;
  severity?: 'success' | 'info' | 'warning' | 'error';
};

// @public (undocumented)
export type AnyApiFactory = ApiFactory<
  unknown,
  unknown,
  {
    [key in string]: unknown;
  }
>;

// @public (undocumented)
export type AnyApiRef = ApiRef<unknown>;

// @public (undocumented)
export type ApiFactory<
  Api,
  Impl extends Api,
  Deps extends {
    [name in string]: unknown;
  }
> = {
  api: ApiRef<Api>;
  deps: TypesToApiRefs<Deps>;
  factory(deps: Deps): Impl;
};

// @public (undocumented)
export type ApiHolder = {
  get<T>(api: ApiRef<T>): T | undefined;
};

// @public (undocumented)
export type ApiRef<T> = {
  id: string;
  T: T;
};

// @public (undocumented)
export type ApiRefsToTypes<
  T extends {
    [key in string]: ApiRef<unknown>;
  }
> = {
  [key in keyof T]: ApiRefType<T[key]>;
};

// @public (undocumented)
export type ApiRefType<T> = T extends ApiRef<infer U> ? U : never;

// @public (undocumented)
export type AppComponents = {
  NotFoundErrorPage: ComponentType<{}>;
  BootErrorPage: ComponentType<BootErrorPageProps>;
  Progress: ComponentType<{}>;
  Router: ComponentType<{}>;
  ErrorBoundaryFallback: ComponentType<ErrorBoundaryFallbackProps>;
  SignInPage?: ComponentType<SignInPageProps>;
};

// @public (undocumented)
export type AppContext = {
  getPlugins(): BackstagePlugin<any, any>[];
  getSystemIcon(key: string): IconComponent | undefined;
  getComponents(): AppComponents;
};

// @public
export type AppTheme = {
  id: string;
  title: string;
  variant: 'light' | 'dark';
  theme: BackstageTheme;
  icon?: React.ReactElement;
};

// @public
export type AppThemeApi = {
  getInstalledThemes(): AppTheme[];
  activeThemeId$(): Observable<string | undefined>;
  getActiveThemeId(): string | undefined;
  setActiveThemeId(themeId?: string): void;
};

// @public (undocumented)
export const appThemeApiRef: ApiRef<AppThemeApi>;

// @public (undocumented)
export function attachComponentData<P>(
  component: ComponentType<P>,
  type: string,
  data: unknown,
): void;

// @public
export const auth0AuthApiRef: ApiRef<
  OpenIdConnectApi & ProfileInfoApi & BackstageIdentityApi & SessionApi
>;

// @public
export type AuthProvider = {
  title: string;
  icon: IconComponent;
};

// @public
export type AuthRequester<AuthResponse> = (
  scopes: Set<string>,
) => Promise<AuthResponse>;

// @public
export type AuthRequesterOptions<AuthResponse> = {
  provider: AuthProvider;
  onAuthRequest(scopes: Set<string>): Promise<AuthResponse>;
};

// @public (undocumented)
export type AuthRequestOptions = {
  optional?: boolean;
  instantPopup?: boolean;
};

// @public (undocumented)
export type BackstageIdentity = {
  id: string;
  idToken: string;
};

// @public
export type BackstageIdentityApi = {
  getBackstageIdentity(
    options?: AuthRequestOptions,
  ): Promise<BackstageIdentity | undefined>;
};

// @public (undocumented)
export type BackstagePlugin<
  Routes extends AnyRoutes = {},
  ExternalRoutes extends AnyExternalRoutes = {}
> = {
  getId(): string;
  output(): PluginOutput[];
  getApis(): Iterable<AnyApiFactory>;
  provide<T>(extension: Extension<T>): T;
  routes: Routes;
  externalRoutes: ExternalRoutes;
};

// @public (undocumented)
export type BootErrorPageProps = {
  step: 'load-config' | 'load-chunk';
  error: Error;
};

// @public
export type ConfigApi = Config;

// @public (undocumented)
export const configApiRef: ApiRef<ConfigApi>;

// @public
export function createApiFactory<
  Api,
  Impl extends Api,
  Deps extends {
    [name in string]: unknown;
  }
>(factory: ApiFactory<Api, Impl, Deps>): ApiFactory<Api, Impl, Deps>;

// @public (undocumented)
export function createApiFactory<Api, Impl extends Api>(
  api: ApiRef<Api>,
  instance: Impl,
): ApiFactory<Api, Impl, {}>;

// @public (undocumented)
export function createApiRef<T>(config: ApiRefConfig): ApiRef<T>;

// @public (undocumented)
export function createComponentExtension<
  T extends (props: any) => JSX.Element | null
>(options: { component: ComponentLoader<T> }): Extension<T>;

// @public (undocumented)
export function createExternalRouteRef<
  Params extends {
    [param in ParamKey]: string;
  },
  Optional extends boolean = false,
  ParamKey extends string = never
>(options: {
  id: string;
  params?: ParamKey[];
  optional?: Optional;
}): ExternalRouteRef<OptionalParams<Params>, Optional>;

// @public (undocumented)
export function createPlugin<
  Routes extends AnyRoutes = {},
  ExternalRoutes extends AnyExternalRoutes = {}
>(
  config: PluginConfig<Routes, ExternalRoutes>,
): BackstagePlugin<Routes, ExternalRoutes>;

// @public (undocumented)
export function createReactExtension<
  T extends (props: any) => JSX.Element | null
>(options: {
  component: ComponentLoader<T>;
  data?: Record<string, unknown>;
}): Extension<T>;

// @public (undocumented)
export function createRoutableExtension<
  T extends (props: any) => JSX.Element | null
>(options: { component: () => Promise<T>; mountPoint: RouteRef }): Extension<T>;

// @public (undocumented)
export function createRouteRef<
  Params extends {
    [param in ParamKey]: string;
  },
  ParamKey extends string = never
>(config: {
  id?: string;
  params?: ParamKey[];
  path?: string;
  icon?: OldIconComponent;
  title?: string;
}): RouteRef<OptionalParams<Params>>;

// @public (undocumented)
export function createSubRouteRef<
  Path extends string,
  ParentParams extends AnyParams = never
>(config: {
  id: string;
  path: Path;
  parent: RouteRef<ParentParams>;
}): MakeSubRouteRef<PathParams<Path>, ParentParams>;

// @public
export type DiscoveryApi = {
  getBaseUrl(pluginId: string): Promise<string>;
};

// @public (undocumented)
export const discoveryApiRef: ApiRef<DiscoveryApi>;

// @public
export interface ElementCollection {
  findComponentData<T>(query: { key: string }): T[];
  getElements<
    Props extends {
      [name: string]: unknown;
    }
  >(): Array<ReactElement<Props>>;
  selectByComponentData(query: {
    key: string;
    withStrictError?: string;
  }): ElementCollection;
}

// @public
export type ErrorApi = {
  post(error: Error_2, context?: ErrorContext): void;
  error$(): Observable<{
    error: Error_2;
    context?: ErrorContext;
  }>;
};

// @public (undocumented)
export const errorApiRef: ApiRef<ErrorApi>;

// @public (undocumented)
export type ErrorBoundaryFallbackProps = {
  plugin?: BackstagePlugin;
  error: Error;
  resetError: () => void;
};

// @public
export type ErrorContext = {
  hidden?: boolean;
};

// @public (undocumented)
export type Extension<T> = {
  expose(plugin: BackstagePlugin<any, any>): T;
};

// @public (undocumented)
export type ExternalRouteRef<
  Params extends AnyParams = any,
  Optional extends boolean = any
> = {
  readonly [routeRefType]: 'external';
  params: ParamKeys<Params>;
  optional?: Optional;
};

// @public
export type FeatureFlag = {
  name: string;
  pluginId: string;
};

// @public (undocumented)
export type FeatureFlagOutput = {
  type: 'feature-flag';
  name: string;
};

// @public (undocumented)
export interface FeatureFlagsApi {
  getRegisteredFlags(): FeatureFlag[];
  isActive(name: string): boolean;
  registerFlag(flag: FeatureFlag): void;
  save(options: FeatureFlagsSaveOptions): void;
}

// @public (undocumented)
export const featureFlagsApiRef: ApiRef<FeatureFlagsApi>;

// @public (undocumented)
export type FeatureFlagsHooks = {
  register(name: string): void;
};

// @public
export type FeatureFlagsSaveOptions = {
  states: Record<string, FeatureFlagState>;
  merge?: boolean;
};

// @public (undocumented)
export enum FeatureFlagState {
  // (undocumented)
  Active = 1,
  // (undocumented)
  None = 0,
}

// @public (undocumented)
export function getComponentData<T>(
  node: ReactNode,
  type: string,
): T | undefined;

// @public
export const githubAuthApiRef: ApiRef<
  OAuthApi & ProfileInfoApi & BackstageIdentityApi & SessionApi
>;

// @public
export const gitlabAuthApiRef: ApiRef<
  OAuthApi & ProfileInfoApi & BackstageIdentityApi & SessionApi
>;

// @public
export const googleAuthApiRef: ApiRef<
  OAuthApi &
    OpenIdConnectApi &
    ProfileInfoApi &
    BackstageIdentityApi &
    SessionApi
>;

// @public
export type IconComponent = ComponentType<{
  fontSize?: 'default' | 'small' | 'large';
}>;

// @public
export type IdentityApi = {
  getUserId(): string;
  getProfile(): ProfileInfo;
  getIdToken(): Promise<string | undefined>;
  signOut(): Promise<void>;
};

// @public (undocumented)
export const identityApiRef: ApiRef<IdentityApi>;

// @public
export const microsoftAuthApiRef: ApiRef<
  OAuthApi &
    OpenIdConnectApi &
    ProfileInfoApi &
    BackstageIdentityApi &
    SessionApi
>;

// @public
export const oauth2ApiRef: ApiRef<
  OAuthApi &
    OpenIdConnectApi &
    ProfileInfoApi &
    BackstageIdentityApi &
    SessionApi
>;

// @public
export type OAuthApi = {
  getAccessToken(
    scope?: OAuthScope,
    options?: AuthRequestOptions,
  ): Promise<string>;
};

// @public
export type OAuthRequestApi = {
  createAuthRequester<AuthResponse>(
    options: AuthRequesterOptions<AuthResponse>,
  ): AuthRequester<AuthResponse>;
  authRequest$(): Observable<PendingAuthRequest[]>;
};

// @public (undocumented)
export const oauthRequestApiRef: ApiRef<OAuthRequestApi>;

// @public
export type OAuthScope = string | string[];

// @public
export type Observable<T> = {
  [Symbol.observable](): Observable<T>;
  subscribe(observer: Observer<T>): Subscription;
  subscribe(
    onNext?: (value: T) => void,
    onError?: (error: Error) => void,
    onComplete?: () => void,
  ): Subscription;
};

// @public
export type Observer<T> = {
  next?(value: T): void;
  error?(error: Error): void;
  complete?(): void;
};

// @public
export const oidcAuthApiRef: ApiRef<
  OAuthApi &
    OpenIdConnectApi &
    ProfileInfoApi &
    BackstageIdentityApi &
    SessionApi
>;

// @public
export const oktaAuthApiRef: ApiRef<
  OAuthApi &
    OpenIdConnectApi &
    ProfileInfoApi &
    BackstageIdentityApi &
    SessionApi
>;

// @public (undocumented)
export const oneloginAuthApiRef: ApiRef<
  OAuthApi &
    OpenIdConnectApi &
    ProfileInfoApi &
    BackstageIdentityApi &
    SessionApi
>;

// @public
export type OpenIdConnectApi = {
  getIdToken(options?: AuthRequestOptions): Promise<string>;
};

// @public
export type PendingAuthRequest = {
  provider: AuthProvider;
  reject: () => void;
  trigger(): Promise<void>;
};

// @public (undocumented)
export type PluginConfig<
  Routes extends AnyRoutes,
  ExternalRoutes extends AnyExternalRoutes
> = {
  id: string;
  apis?: Iterable<AnyApiFactory>;
  register?(hooks: PluginHooks): void;
  routes?: Routes;
  externalRoutes?: ExternalRoutes;
};

// @public (undocumented)
export type PluginHooks = {
  featureFlags: FeatureFlagsHooks;
};

// @public (undocumented)
export type PluginOutput = FeatureFlagOutput;

// @public
export type ProfileInfo = {
  email?: string;
  displayName?: string;
  picture?: string;
};

// @public
export type ProfileInfoApi = {
  getProfile(options?: AuthRequestOptions): Promise<ProfileInfo | undefined>;
};

// @public (undocumented)
export type RouteOptions = {
  exact?: boolean;
};

// @public (undocumented)
export type RoutePath = string;

// @public (undocumented)
export type RouteRef<Params extends AnyParams = any> = {
  readonly [routeRefType]: 'absolute';
  params: ParamKeys<Params>;
  path: string;
  icon?: OldIconComponent;
  title?: string;
};

// @public
export const samlAuthApiRef: ApiRef<
  ProfileInfoApi & BackstageIdentityApi & SessionApi
>;

// @public
export type SessionApi = {
  signIn(): Promise<void>;
  signOut(): Promise<void>;
  sessionState$(): Observable<SessionState>;
};

// @public
export enum SessionState {
  // (undocumented)
  SignedIn = 'SignedIn',
  // (undocumented)
  SignedOut = 'SignedOut',
}

// @public (undocumented)
export type SignInPageProps = {
  onResult(result: SignInResult): void;
};

// @public (undocumented)
export type SignInResult = {
  userId: string;
  profile: ProfileInfo;
  getIdToken?: () => Promise<string>;
  signOut?: () => Promise<void>;
};

// @public (undocumented)
export interface StorageApi {
  forBucket(name: string): StorageApi;
  get<T>(key: string): T | undefined;
  observe$<T>(key: string): Observable<StorageValueChange<T>>;
  remove(key: string): Promise<void>;
  set(key: string, data: any): Promise<void>;
}

// @public (undocumented)
export const storageApiRef: ApiRef<StorageApi>;

// @public (undocumented)
export type StorageValueChange<T = any> = {
  key: string;
  newValue?: T;
};

// @public (undocumented)
export type SubRouteRef<Params extends AnyParams = any> = {
  readonly [routeRefType]: 'sub';
  parent: RouteRef;
  path: string;
  params: ParamKeys<Params>;
};

// @public
export type Subscription = {
  unsubscribe(): void;
  readonly closed: boolean;
};

// @public (undocumented)
export type TypesToApiRefs<T> = {
  [key in keyof T]: ApiRef<T[key]>;
};

// @public (undocumented)
export function useApi<T>(apiRef: ApiRef<T>): T;

// @public (undocumented)
export function useApiHolder(): ApiHolder;

// @public (undocumented)
export const useApp: () => AppContext;

// @public
export function useElementFilter<T>(
  node: ReactNode,
  filterFn: (arg: ElementCollection) => T,
  dependencies?: any[],
): T;

// @public (undocumented)
export type UserFlags = {};

// @public (undocumented)
export function useRouteRef<Optional extends boolean, Params extends AnyParams>(
  routeRef: ExternalRouteRef<Params, Optional>,
): Optional extends true ? RouteFunc<Params> | undefined : RouteFunc<Params>;

// @public (undocumented)
export function useRouteRef<Params extends AnyParams>(
  routeRef: RouteRef<Params> | SubRouteRef<Params>,
): RouteFunc<Params>;

// @public (undocumented)
export function useRouteRefParams<Params extends AnyParams>(
  _routeRef: RouteRef<Params> | SubRouteRef<Params>,
): Params;

// @public (undocumented)
export function withApis<T>(
  apis: TypesToApiRefs<T>,
): <P extends T>(
  WrappedComponent: React_2.ComponentType<P>,
) => {
  (props: React_2.PropsWithChildren<Omit<P, keyof T>>): JSX.Element;
  displayName: string;
};

// (No @packageDocumentation comment for this package)
```
