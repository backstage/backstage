## API Report File for "@backstage/backend-dynamic-feature-service"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts
import { BackendFeature } from '@backstage/backend-plugin-api';
import { BackstagePackageJson } from '@backstage/cli-node';
import { CatalogBuilder } from '@backstage/plugin-catalog-backend';
import { Config } from '@backstage/config';
import { ConfigSchema } from '@backstage/config-loader';
import { EventBroker } from '@backstage/plugin-events-node';
import { EventsBackend } from '@backstage/plugin-events-backend';
import { EventsService } from '@backstage/plugin-events-node';
import { FeatureDiscoveryService } from '@backstage/backend-plugin-api/alpha';
import { HttpPostIngressOptions } from '@backstage/plugin-events-node';
import { IdentityApi } from '@backstage/plugin-auth-node';
import { IndexBuilder } from '@backstage/plugin-search-backend-node';
import { Logger } from 'winston';
import { LoggerService } from '@backstage/backend-plugin-api';
import { PackagePlatform } from '@backstage/cli-node';
import { PackageRole } from '@backstage/cli-node';
import { PermissionEvaluator } from '@backstage/plugin-permission-common';
import { PermissionPolicy } from '@backstage/plugin-permission-node';
import { PluginCacheManager } from '@backstage/backend-common';
import { PluginDatabaseManager } from '@backstage/backend-common';
import { PluginEndpointDiscovery } from '@backstage/backend-common';
import { RootLoggerService } from '@backstage/backend-plugin-api';
import { Router } from 'express';
import { SchedulerService } from '@backstage/backend-plugin-api';
import { SchedulerServiceTaskRunner } from '@backstage/backend-plugin-api';
import { ServiceFactory } from '@backstage/backend-plugin-api';
import { ServiceRef } from '@backstage/backend-plugin-api';
import { TemplateAction } from '@backstage/plugin-scaffolder-node';
import { TokenManager } from '@backstage/backend-common';
import { UrlReaderService } from '@backstage/backend-plugin-api';
import { WinstonLoggerOptions } from '@backstage/backend-defaults/rootLogger';

// @public (undocumented)
export interface BackendDynamicPlugin extends BaseDynamicPlugin {
  // (undocumented)
  installer?: BackendDynamicPluginInstaller;
  // (undocumented)
  platform: 'node';
}

// @public (undocumented)
export type BackendDynamicPluginInstaller =
  | LegacyBackendPluginInstaller
  | NewBackendPluginInstaller;

// @public (undocumented)
export interface BackendPluginProvider {
  // (undocumented)
  backendPlugins(includeFailed?: boolean): BackendDynamicPlugin[];
}

// @public (undocumented)
export interface BaseDynamicPlugin {
  // (undocumented)
  failure?: string;
  // (undocumented)
  name: string;
  // (undocumented)
  platform: PackagePlatform;
  // (undocumented)
  role: PackageRole;
  // (undocumented)
  version: string;
}

// @public (undocumented)
export type DynamicPlugin = FrontendDynamicPlugin | BackendDynamicPlugin;

// @public (undocumented)
export class DynamicPluginManager implements DynamicPluginProvider {
  // (undocumented)
  addBackendPlugin(plugin: BackendDynamicPlugin): void;
  // (undocumented)
  get availablePackages(): ScannedPluginPackage[];
  // (undocumented)
  backendPlugins(includeFailed?: boolean): BackendDynamicPlugin[];
  // (undocumented)
  static create(
    options: DynamicPluginManagerOptions,
  ): Promise<DynamicPluginManager>;
  // (undocumented)
  frontendPlugins(includeFailed?: boolean): FrontendDynamicPlugin[];
  // (undocumented)
  getScannedPackage(plugin: DynamicPlugin): ScannedPluginPackage;
  // (undocumented)
  plugins(includeFailed?: boolean): DynamicPlugin[];
}

// @public (undocumented)
export interface DynamicPluginManagerOptions {
  // (undocumented)
  config: Config;
  // (undocumented)
  logger: LoggerService;
  // (undocumented)
  moduleLoader?: ModuleLoader;
  // (undocumented)
  preferAlpha?: boolean;
}

// @public (undocumented)
export interface DynamicPluginProvider
  extends FrontendPluginProvider,
    BackendPluginProvider {
  // (undocumented)
  getScannedPackage(plugin: DynamicPlugin): ScannedPluginPackage;
  // (undocumented)
  plugins(includeFailed?: boolean): DynamicPlugin[];
}

// @public (undocumented)
export interface DynamicPluginsFactoryOptions {
  // (undocumented)
  moduleLoader?(logger: LoggerService): ModuleLoader | Promise<ModuleLoader>;
}

// @public @deprecated (undocumented)
export const dynamicPluginsFeatureDiscoveryLoader: BackendFeature;

// @public @deprecated (undocumented)
export const dynamicPluginsFeatureDiscoveryServiceFactory: ServiceFactory<
  FeatureDiscoveryService,
  'root',
  'singleton'
>;

// @public
export const dynamicPluginsFeatureLoader: ((
  options?: DynamicPluginsFeatureLoaderOptions,
) => BackendFeature) &
  BackendFeature;

// @public (undocumented)
export type DynamicPluginsFeatureLoaderOptions = DynamicPluginsFactoryOptions &
  DynamicPluginsSchemasOptions &
  DynamicPluginsRootLoggerFactoryOptions;

// @public @deprecated (undocumented)
export const dynamicPluginsFrontendSchemas: BackendFeature;

// @public (undocumented)
export type DynamicPluginsRootLoggerFactoryOptions = Omit<
  WinstonLoggerOptions,
  'meta'
>;

// @public @deprecated (undocumented)
export const dynamicPluginsRootLoggerServiceFactory: ((
  options?: DynamicPluginsRootLoggerFactoryOptions,
) => ServiceFactory<RootLoggerService, 'root', 'singleton'>) &
  ServiceFactory<RootLoggerService, 'root', 'singleton'>;

// @public (undocumented)
export interface DynamicPluginsSchemasOptions {
  schemaLocator?: (pluginPackage: ScannedPluginPackage) => string;
}

// @public (undocumented)
export interface DynamicPluginsSchemasService {
  // (undocumented)
  addDynamicPluginsSchemas(configSchema: ConfigSchema): Promise<{
    schema: ConfigSchema;
  }>;
}

// @public @deprecated (undocumented)
export const dynamicPluginsSchemasServiceFactory: ((
  options?: DynamicPluginsSchemasOptions,
) => ServiceFactory<DynamicPluginsSchemasService, 'root', 'singleton'>) &
  ServiceFactory<DynamicPluginsSchemasService, 'root', 'singleton'>;

// @public @deprecated (undocumented)
export const dynamicPluginsServiceFactory: ((
  options?: DynamicPluginsFactoryOptions,
) => ServiceFactory<DynamicPluginProvider, 'root', 'singleton'>) &
  ServiceFactory<DynamicPluginProvider, 'root', 'singleton'>;

// @public @deprecated (undocumented)
export const dynamicPluginsServiceFactoryWithOptions: (
  options?: DynamicPluginsFactoryOptions,
) => ServiceFactory<DynamicPluginProvider, 'root', 'singleton'>;

// @public (undocumented)
export const dynamicPluginsServiceRef: ServiceRef<
  DynamicPluginProvider,
  'root',
  'singleton'
>;

// @public (undocumented)
export interface FrontendDynamicPlugin extends BaseDynamicPlugin {
  // (undocumented)
  platform: 'web';
}

// @public (undocumented)
export interface FrontendPluginProvider {
  // (undocumented)
  frontendPlugins(includeFailed?: boolean): FrontendDynamicPlugin[];
}

// @public (undocumented)
export function isBackendDynamicPluginInstaller(
  obj: any,
): obj is BackendDynamicPluginInstaller;

// @public @deprecated (undocumented)
export interface LegacyBackendPluginInstaller {
  // (undocumented)
  catalog?(builder: CatalogBuilder, env: LegacyPluginEnvironment): void;
  // (undocumented)
  events?(
    eventsBackend: EventsBackend,
    env: LegacyPluginEnvironment,
  ): HttpPostIngressOptions[];
  // (undocumented)
  kind: 'legacy';
  // (undocumented)
  permissions?: {
    policy?: PermissionPolicy;
  };
  // (undocumented)
  router?: {
    pluginID: string;
    createPlugin(env: LegacyPluginEnvironment): Promise<Router>;
  };
  // (undocumented)
  scaffolder?(env: LegacyPluginEnvironment): TemplateAction<any>[];
  // (undocumented)
  search?(
    indexBuilder: IndexBuilder,
    schedule: SchedulerServiceTaskRunner,
    env: LegacyPluginEnvironment,
  ): void;
}

// @public @deprecated (undocumented)
export type LegacyPluginEnvironment = {
  logger: Logger;
  cache: PluginCacheManager;
  database: PluginDatabaseManager;
  config: Config;
  reader: UrlReaderService;
  discovery: PluginEndpointDiscovery;
  tokenManager: TokenManager;
  permissions: PermissionEvaluator;
  scheduler: SchedulerService;
  identity: IdentityApi;
  eventBroker: EventBroker;
  events: EventsService;
  pluginProvider: BackendPluginProvider;
};

// @public (undocumented)
export interface ModuleLoader {
  // (undocumented)
  bootstrap(backstageRoot: string, dynamicPluginPaths: string[]): Promise<void>;
  // (undocumented)
  load(id: string): Promise<any>;
}

// @public (undocumented)
export interface NewBackendPluginInstaller {
  // (undocumented)
  install(): BackendFeature | BackendFeature[];
  // (undocumented)
  kind: 'new';
}

// @public (undocumented)
export type ScannedPluginManifest = BackstagePackageJson &
  Required<Pick<BackstagePackageJson, 'main'>> &
  Required<Pick<BackstagePackageJson, 'backstage'>> & {
    backstage: {
      role: PackageRole;
    };
  };

// @public (undocumented)
export interface ScannedPluginPackage {
  // (undocumented)
  location: URL;
  // (undocumented)
  manifest: ScannedPluginManifest;
}

// Warnings were encountered during analysis:
//
// src/features/features.d.ts:7:1 - (ae-undocumented) Missing documentation for "DynamicPluginsFeatureLoaderOptions".
// src/loader/types.d.ts:4:1 - (ae-undocumented) Missing documentation for "ModuleLoader".
// src/loader/types.d.ts:5:5 - (ae-undocumented) Missing documentation for "bootstrap".
// src/loader/types.d.ts:6:5 - (ae-undocumented) Missing documentation for "load".
// src/manager/plugin-manager.d.ts:10:1 - (ae-undocumented) Missing documentation for "DynamicPluginManagerOptions".
// src/manager/plugin-manager.d.ts:11:5 - (ae-undocumented) Missing documentation for "config".
// src/manager/plugin-manager.d.ts:12:5 - (ae-undocumented) Missing documentation for "logger".
// src/manager/plugin-manager.d.ts:13:5 - (ae-undocumented) Missing documentation for "preferAlpha".
// src/manager/plugin-manager.d.ts:14:5 - (ae-undocumented) Missing documentation for "moduleLoader".
// src/manager/plugin-manager.d.ts:19:1 - (ae-undocumented) Missing documentation for "DynamicPluginManager".
// src/manager/plugin-manager.d.ts:23:5 - (ae-undocumented) Missing documentation for "create".
// src/manager/plugin-manager.d.ts:27:5 - (ae-undocumented) Missing documentation for "availablePackages".
// src/manager/plugin-manager.d.ts:28:5 - (ae-undocumented) Missing documentation for "addBackendPlugin".
// src/manager/plugin-manager.d.ts:31:5 - (ae-undocumented) Missing documentation for "backendPlugins".
// src/manager/plugin-manager.d.ts:32:5 - (ae-undocumented) Missing documentation for "frontendPlugins".
// src/manager/plugin-manager.d.ts:33:5 - (ae-undocumented) Missing documentation for "plugins".
// src/manager/plugin-manager.d.ts:34:5 - (ae-undocumented) Missing documentation for "getScannedPackage".
// src/manager/plugin-manager.d.ts:39:22 - (ae-undocumented) Missing documentation for "dynamicPluginsServiceRef".
// src/manager/plugin-manager.d.ts:43:1 - (ae-undocumented) Missing documentation for "DynamicPluginsFactoryOptions".
// src/manager/plugin-manager.d.ts:44:5 - (ae-undocumented) Missing documentation for "moduleLoader".
// src/manager/plugin-manager.d.ts:50:22 - (ae-undocumented) Missing documentation for "dynamicPluginsServiceFactoryWithOptions".
// src/manager/plugin-manager.d.ts:55:22 - (ae-undocumented) Missing documentation for "dynamicPluginsServiceFactory".
// src/manager/plugin-manager.d.ts:60:22 - (ae-undocumented) Missing documentation for "dynamicPluginsFeatureDiscoveryServiceFactory".
// src/manager/plugin-manager.d.ts:65:22 - (ae-undocumented) Missing documentation for "dynamicPluginsFeatureDiscoveryLoader".
// src/manager/types.d.ts:28:1 - (ae-undocumented) Missing documentation for "LegacyPluginEnvironment".
// src/manager/types.d.ts:46:1 - (ae-undocumented) Missing documentation for "DynamicPluginProvider".
// src/manager/types.d.ts:47:5 - (ae-undocumented) Missing documentation for "plugins".
// src/manager/types.d.ts:48:5 - (ae-undocumented) Missing documentation for "getScannedPackage".
// src/manager/types.d.ts:53:1 - (ae-undocumented) Missing documentation for "BackendPluginProvider".
// src/manager/types.d.ts:54:5 - (ae-undocumented) Missing documentation for "backendPlugins".
// src/manager/types.d.ts:59:1 - (ae-undocumented) Missing documentation for "FrontendPluginProvider".
// src/manager/types.d.ts:60:5 - (ae-undocumented) Missing documentation for "frontendPlugins".
// src/manager/types.d.ts:65:1 - (ae-undocumented) Missing documentation for "BaseDynamicPlugin".
// src/manager/types.d.ts:66:5 - (ae-undocumented) Missing documentation for "name".
// src/manager/types.d.ts:67:5 - (ae-undocumented) Missing documentation for "version".
// src/manager/types.d.ts:68:5 - (ae-undocumented) Missing documentation for "role".
// src/manager/types.d.ts:69:5 - (ae-undocumented) Missing documentation for "platform".
// src/manager/types.d.ts:70:5 - (ae-undocumented) Missing documentation for "failure".
// src/manager/types.d.ts:75:1 - (ae-undocumented) Missing documentation for "DynamicPlugin".
// src/manager/types.d.ts:79:1 - (ae-undocumented) Missing documentation for "FrontendDynamicPlugin".
// src/manager/types.d.ts:80:5 - (ae-undocumented) Missing documentation for "platform".
// src/manager/types.d.ts:85:1 - (ae-undocumented) Missing documentation for "BackendDynamicPlugin".
// src/manager/types.d.ts:86:5 - (ae-undocumented) Missing documentation for "platform".
// src/manager/types.d.ts:87:5 - (ae-undocumented) Missing documentation for "installer".
// src/manager/types.d.ts:92:1 - (ae-undocumented) Missing documentation for "BackendDynamicPluginInstaller".
// src/manager/types.d.ts:96:1 - (ae-undocumented) Missing documentation for "NewBackendPluginInstaller".
// src/manager/types.d.ts:97:5 - (ae-undocumented) Missing documentation for "kind".
// src/manager/types.d.ts:98:5 - (ae-undocumented) Missing documentation for "install".
// src/manager/types.d.ts:111:1 - (ae-undocumented) Missing documentation for "LegacyBackendPluginInstaller".
// src/manager/types.d.ts:112:5 - (ae-undocumented) Missing documentation for "kind".
// src/manager/types.d.ts:113:5 - (ae-undocumented) Missing documentation for "router".
// src/manager/types.d.ts:117:5 - (ae-undocumented) Missing documentation for "catalog".
// src/manager/types.d.ts:118:5 - (ae-undocumented) Missing documentation for "scaffolder".
// src/manager/types.d.ts:119:5 - (ae-undocumented) Missing documentation for "search".
// src/manager/types.d.ts:120:5 - (ae-undocumented) Missing documentation for "events".
// src/manager/types.d.ts:121:5 - (ae-undocumented) Missing documentation for "permissions".
// src/manager/types.d.ts:128:1 - (ae-undocumented) Missing documentation for "isBackendDynamicPluginInstaller".
// src/scanner/types.d.ts:5:1 - (ae-undocumented) Missing documentation for "ScannedPluginPackage".
// src/scanner/types.d.ts:6:5 - (ae-undocumented) Missing documentation for "location".
// src/scanner/types.d.ts:7:5 - (ae-undocumented) Missing documentation for "manifest".
// src/scanner/types.d.ts:12:1 - (ae-undocumented) Missing documentation for "ScannedPluginManifest".
// src/schemas/frontend.d.ts:5:22 - (ae-undocumented) Missing documentation for "dynamicPluginsFrontendSchemas".
// src/schemas/rootLogger.d.ts:5:1 - (ae-undocumented) Missing documentation for "DynamicPluginsRootLoggerFactoryOptions".
// src/schemas/rootLogger.d.ts:10:22 - (ae-undocumented) Missing documentation for "dynamicPluginsRootLoggerServiceFactory".
// src/schemas/schemas.d.ts:7:1 - (ae-undocumented) Missing documentation for "DynamicPluginsSchemasService".
// src/schemas/schemas.d.ts:8:5 - (ae-undocumented) Missing documentation for "addDynamicPluginsSchemas".
// src/schemas/schemas.d.ts:21:1 - (ae-undocumented) Missing documentation for "DynamicPluginsSchemasOptions".
// src/schemas/schemas.d.ts:37:22 - (ae-undocumented) Missing documentation for "dynamicPluginsSchemasServiceFactory".

// (No @packageDocumentation comment for this package)
```
