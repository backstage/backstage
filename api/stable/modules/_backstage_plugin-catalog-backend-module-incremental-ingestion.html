<!DOCTYPE html><html class="default" lang="en" data-base="../"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>@backstage/plugin-catalog-backend-module-incremental-ingestion | Backstage</title><meta name="description" content="Documentation for Backstage"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script defer src="../assets/main.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script><script async src="../assets/hierarchy.js" id="tsd-hierarchy-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => window.app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><a href="../index.html" class="title">Backstage</a><div id="tsd-toolbar-links"><a href="https://backstage.io/docs">Docs</a><a href="https://github.com/backstage/backstage">Github</a></div><button id="tsd-search-trigger" class="tsd-widget" aria-label="Search"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-search"></use></svg></button><dialog id="tsd-search" aria-label="Search"><input role="combobox" id="tsd-search-input" aria-controls="tsd-search-results" aria-autocomplete="list" aria-expanded="true" autocapitalize="off" autocomplete="off" placeholder="Search the docs" maxLength="100"/><ul role="listbox" id="tsd-search-results"></ul><div id="tsd-search-status" aria-live="polite" aria-atomic="true"><div>Preparing search index...</div></div></dialog><a href="#" class="tsd-widget menu" id="tsd-toolbar-menu-trigger" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb" aria-label="Breadcrumb"><li><a href="" aria-current="page">@backstage/plugin-catalog-backend-module-incremental-ingestion</a></li></ul><h1>Module @backstage/plugin-catalog-backend-module-incremental-ingestion</h1></div><section class="tsd-panel tsd-comment"><div class="tsd-comment tsd-typography"><p>Provides efficient incremental ingestion of entities into the catalog.</p>
</div></section><section class="tsd-panel tsd-typography"><h1 id="" class="tsd-anchor-link"><code>@backstage/plugin-catalog-backend-module-incremental-ingestion</code></h1><p>The Incremental Ingestion catalog backend module provides an Incremental Entity Provider that can be used to ingest data from sources using delta mutations, while retaining the orphan prevention mechanism provided by full mutations.</p>
<h2 id="why-did-we-create-it" class="tsd-anchor-link">Why did we create it?<a href="#why-did-we-create-it" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Backstage provides an <a href="https://backstage.io/docs/features/software-catalog/external-integrations#provider-mutations">Entity Provider mechanism that has two kinds of mutations</a>: <code>delta</code> and <code>full</code>. <code>delta</code> mutations tell the Backstage Catalog which entities should be added and removed from the catalog. <code>full</code> mutations accept a list of entities and automatically computes which entities must be removed by comparing the provided entities against existing entities to create a diff between the two sets. These two kinds of mutations are convenient for different kinds of data sources. A <code>delta</code> mutation can be used with a data source that emits UPDATE and DELETE events for its data. A <code>full</code> mutation is useful for APIs that produce fewer entities than can fit in the Backstage processes' memory.</p>
<p>Unfortunately, these two kinds of mutations are insufficient for very large data sources for the following reasons,</p>
<ol>
<li>Even when the API provides DELETE events, we still need a way to create the initial list of entities. For example, if you ingest all repositories from GitHub into Backstage and you use webhooks, you still need the initial list of entities.</li>
<li>A <code>delta</code> mutation can not guarantee that mutations will not be missed. For example, if your Backstage portal is down while receiving a DELETE event, you might miss the event which leaves your catalog in an unclear state. How can you replay the missed events? Some data sources, like GitHub, provide an API for replaying missed events, but this increases complexity and is not available on all APIs.</li>
<li>Addressing the above two use case with <code>full</code> mutation is not an option on very large datasets because a <code>full</code> mutation requires that all entities are in memory to create a diff. If your data source has 100k+ records, this can easily cause your processes to run out of memory.</li>
<li>In cases when you can use <code>full</code> mutation, committing many entities into the processing pipeline fills up the processing queue and delays the processing of entities from other entity providers.</li>
</ol>
<p>We created the Incremental Entity Provider to address all of the above issues. The Incremental Entity Provider addresses these issues with a combination of <code>delta</code> mutations and a mark-and-sweep mechanism. Instead of doing a single <code>full</code> mutation, it performs a series of bursts. At the end of each burst, the Incremental Entity Provider performs the following operations,</p>
<ol>
<li>Marks each received entity in the database.</li>
<li>Commits all of the entities with a <code>delta</code> mutation.</li>
</ol>
<p>Incremental Entity Providers will wait a configurable interval before proceeding to the next burst.</p>
<p>Once the source has no more results, Incremental Entity Provider compares all entities annotated with <code>@backstage/incremental-entity-provider: &lt;entity-provider-id&gt;</code> against all marked entities to determine which entities committed by same entity provider were not marked during the last ingestion cycle. All unmarked entities are deleted at the end of the cycle. The Incremental Entity Provider rests for a fixed interval before restarting the ingestion process.</p>
<p><img src="https://user-images.githubusercontent.com/74687/185822734-ee6279c7-64fa-46b9-9aa8-d4092ab73858.png" alt="Diagram of execution of an Incremental Entity Provider"></p>
<p>This approach has the following benefits,</p>
<ol>
<li>Reduced ingestion latency - each burst commits entities which are processed before the entire list is processed.</li>
<li>Stable pressure - each period between bursts provides an opportunity for the processing pipeline to settle without overwhelming the pipeline with a large number of unprocessed entities.</li>
<li>Built-in retry / back-off - Failed bursts are automatically retried with a built-in back-off interval providing an opportunity for the data source to reset its rate limits before retrying the burst.</li>
<li>Prevents orphan entities - Deleted entities are removed as with <code>full</code> mutation with a low memory footprint.</li>
</ol>
<h2 id="requirements" class="tsd-anchor-link">Requirements<a href="#requirements" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The Incremental Entity Provider backend is designed for data sources that provide paginated results. Each burst attempts to handle one or more pages of the query. The plugin will attempt to fetch as many pages as it can within a configurable burst length. At every iteration, it expects to receive the next cursor that will be used to query in the next iteration. Each iteration may happen on a different replica. This has several consequences:</p>
<ol>
<li>The cursor must be serializable to JSON (not an issue for most RESTful or GraphQL based APIs).</li>
<li>The client must be stateless - a client is created from scratch for each iteration to allow distributing processing over multiple replicas.</li>
<li>There must be sufficient storage in Postgres to handle the additional data. (Presumably, this is also true of sqlite, but it has only been tested with Postgres.)</li>
</ol>
<h2 id="installation" class="tsd-anchor-link">Installation<a href="#installation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><ol>
<li>
<p>Install <code>@backstage/plugin-catalog-backend-module-incremental-ingestion</code> with <code>yarn --cwd packages/backend add @backstage/plugin-catalog-backend-module-incremental-ingestion</code> from the Backstage root directory.</p>
</li>
<li>
<p>Add the following code to the <code>packages/backend/src/index.ts</code> file:</p>
</li>
</ol>
<pre><code class="diff"><span class="hl-7">+ import { catalogModuleCustomIncrementalIngestionProvider } from &#39;./extensions/catalogCustomIncrementalIngestion&#39;;</span><br/><br/><br/><span class="hl-2">const backend = createBackend();</span><br/><br/><span class="hl-7">+ backend.add(</span><br/><span class="hl-7">+   import(</span><br/><span class="hl-7">+     &#39;@backstage/plugin-catalog-backend-module-incremental-ingestion/alpha&#39;</span><br/><span class="hl-7">+   ),</span><br/><span class="hl-7">+ );</span><br/><br/><span class="hl-2">// We have created this in section **Adding an Incremental Entity Provider to the catalog**</span><br/><span class="hl-7">+ backend.add(catalogModuleCustomIncrementalIngestionProvider);</span><br/><br/><span class="hl-2">backend.start();</span>
</code><button type="button">Copy</button></pre>

<h2 id="administrative-routes" class="tsd-anchor-link">Administrative Routes<a href="#administrative-routes" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>If you want to manage your incremental entity providers via REST endpoints, the following endpoints are available:</p>
<table>
<thead>
<tr>
<th>Method</th>
<th>Path</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>GET</td>
<td><code>/api/catalog/incremental/health</code></td>
<td>Checks the health of all incremental providers. Returns array of any unhealthy ones.</td>
</tr>
<tr>
<td>GET</td>
<td><code>/api/catalog/incremental/providers</code></td>
<td>Get a list of all known incremental entity providers</td>
</tr>
<tr>
<td>GET</td>
<td><code>/api/catalog/incremental/providers/:provider</code></td>
<td>Checks the status of an incremental provider (resting, interstitial, etc).</td>
</tr>
<tr>
<td>POST</td>
<td><code>/api/catalog/incremental/providers/:provider/trigger</code></td>
<td>Triggers a provider's next action immediately. E.g., if it's currently interstitial, it will trigger the next burst.</td>
</tr>
<tr>
<td>POST</td>
<td><code>/api/catalog/incremental/providers/:provider/start</code></td>
<td>Stop the current ingestion cycle and start a new one immediately.</td>
</tr>
<tr>
<td>POST</td>
<td><code>/api/catalog/incremental/providers/:provider/cancel</code></td>
<td>Stop the current ingestion cycle and start a new one in 24 hours.</td>
</tr>
<tr>
<td>DELETE</td>
<td><code>/api/catalog/incremental/providers/:provider</code></td>
<td>Completely remove all records for the provider and schedule it to start again in 24 hours.</td>
</tr>
<tr>
<td>GET</td>
<td><code>/api/catalog/incremental/providers/:provider/marks</code></td>
<td>Retrieve a list of all ingestion marks for the current ingestion cycle.</td>
</tr>
<tr>
<td>DELETE</td>
<td><code>/api/catalog/incremental/providers/:provider/marks</code></td>
<td>Remove all ingestion marks for the current ingestion cycle.</td>
</tr>
<tr>
<td>POST</td>
<td><code>/api/catalog/incremental/cleanup</code></td>
<td>Completely remove all records for ALL providers and schedule them to start again in 24 hours. (CAUTION! Can cause orphans!)</td>
</tr>
</tbody>
</table>
<p>In all cases, <code>:provider</code> is the name of the incremental entity provider.</p>
<h2 id="writing-an-incremental-entity-provider" class="tsd-anchor-link">Writing an Incremental Entity Provider<a href="#writing-an-incremental-entity-provider" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>To create an Incremental Entity Provider, you need to know how to retrieve a single page of the data that you wish to ingest into the Backstage catalog. If the API has pagination and you know how to make a paginated request to that API, you'll be able to implement an Incremental Entity Provider for this API. For more information about compatibility, check out the <a href="#requirements">requirements</a> section of this page.</p>
<p>Here is the type definition for an Incremental Entity Provider.</p>
<pre><code class="ts"><span class="hl-3">interface</span><span class="hl-2"> </span><span class="hl-13">IncrementalEntityProvider</span><span class="hl-2">&lt;</span><span class="hl-13">TCursor</span><span class="hl-2">, </span><span class="hl-13">TContext</span><span class="hl-2">&gt; {</span><br/><span class="hl-2">  </span><span class="hl-0">/**</span><br/><span class="hl-0">   * This name must be unique between all of the entity providers</span><br/><span class="hl-0">   * operating in the catalog.</span><br/><span class="hl-0">   */</span><br/><span class="hl-2">  </span><span class="hl-1">getProviderName</span><span class="hl-2">(): </span><span class="hl-13">string</span><span class="hl-2">;</span><br/><span class="hl-2">  </span><span class="hl-0">/**</span><br/><span class="hl-0">   * Return a single page of entities from a specific point in the</span><br/><span class="hl-0">   * ingestion.</span><br/><span class="hl-0">   *</span><br/><span class="hl-0">   * </span><span class="hl-3">@param</span><span class="hl-0"> </span><span class="hl-6">context</span><span class="hl-0"> - anything needed in order to fetch a single page.</span><br/><span class="hl-0">   * </span><span class="hl-3">@param</span><span class="hl-0"> </span><span class="hl-6">cursor</span><span class="hl-0"> - a unique value identifying the page to ingest.</span><br/><span class="hl-0">   * </span><span class="hl-3">@returns</span><span class="hl-0"> The entities to be ingested, as well as the cursor of</span><br/><span class="hl-0">   * the next page after this one.</span><br/><span class="hl-0">   */</span><br/><span class="hl-2">  </span><span class="hl-1">next</span><span class="hl-2">(</span><br/><span class="hl-2">    </span><span class="hl-6">context</span><span class="hl-2">: </span><span class="hl-13">TContext</span><span class="hl-2">,</span><br/><span class="hl-2">    </span><span class="hl-6">cursor</span><span class="hl-2">?: </span><span class="hl-13">TCursor</span><span class="hl-2">,</span><br/><span class="hl-2">  ): </span><span class="hl-13">Promise</span><span class="hl-2">&lt;</span><span class="hl-13">EntityIteratorResult</span><span class="hl-2">&lt;</span><span class="hl-13">TCursor</span><span class="hl-2">&gt;&gt;;</span><br/><span class="hl-2">  </span><span class="hl-0">/**</span><br/><span class="hl-0">   * Do any setup and teardown necessary in order to provide the</span><br/><span class="hl-0">   * context for fetching pages. This should always invoke `burst` in</span><br/><span class="hl-0">   * order to fetch the individual pages.</span><br/><span class="hl-0">   *</span><br/><span class="hl-0">   * </span><span class="hl-3">@param</span><span class="hl-0"> </span><span class="hl-6">burst</span><span class="hl-0"> - a function which performs a series of iterations</span><br/><span class="hl-0">   */</span><br/><span class="hl-2">  </span><span class="hl-1">around</span><span class="hl-2">(</span><span class="hl-1">burst</span><span class="hl-2">: (</span><span class="hl-6">context</span><span class="hl-2">: </span><span class="hl-13">TContext</span><span class="hl-2">) </span><span class="hl-3">=&gt;</span><span class="hl-2"> </span><span class="hl-13">Promise</span><span class="hl-2">&lt;</span><span class="hl-13">void</span><span class="hl-2">&gt;): </span><span class="hl-13">Promise</span><span class="hl-2">&lt;</span><span class="hl-13">void</span><span class="hl-2">&gt;;</span><br/><span class="hl-2">}</span>
</code><button type="button">Copy</button></pre>

<p>For this tutorial, we'll write an Incremental Entity Provider that will call an imaginary API. This imaginary API will return a list of imaginary services. The imaginary API has an imaginary API client with the following interface.</p>
<pre><code class="ts"><span class="hl-3">interface</span><span class="hl-2"> </span><span class="hl-13">MyApiClient</span><span class="hl-2"> {</span><br/><span class="hl-2">  </span><span class="hl-1">getServices</span><span class="hl-2">(</span><span class="hl-6">page</span><span class="hl-2">: </span><span class="hl-13">number</span><span class="hl-2">): </span><span class="hl-13">MyPaginatedResults</span><span class="hl-2">&lt;</span><span class="hl-13">Service</span><span class="hl-2">&gt;;</span><br/><span class="hl-2">}</span><br/><br/><span class="hl-3">interface</span><span class="hl-2"> </span><span class="hl-13">MyPaginatedResults</span><span class="hl-2">&lt;</span><span class="hl-13">T</span><span class="hl-2">&gt; {</span><br/><span class="hl-2">  </span><span class="hl-6">items</span><span class="hl-2">: </span><span class="hl-13">T</span><span class="hl-2">[];</span><br/><span class="hl-2">  </span><span class="hl-6">totalPages</span><span class="hl-2">: </span><span class="hl-13">number</span><span class="hl-2">;</span><br/><span class="hl-2">}</span><br/><br/><span class="hl-3">interface</span><span class="hl-2"> </span><span class="hl-13">Service</span><span class="hl-2"> {</span><br/><span class="hl-2">  </span><span class="hl-6">name</span><span class="hl-2">: </span><span class="hl-13">string</span><span class="hl-2">;</span><br/><span class="hl-2">}</span>
</code><button type="button">Copy</button></pre>

<p>These are the only 3 methods that you need to implement. <code>getProviderName()</code> is pretty self explanatory and it's identical to the <code>getProviderName()</code> method on a regular Entity Provider.</p>
<pre><code class="ts"><span class="hl-8">import</span><span class="hl-2"> { </span><span class="hl-6">IncrementalEntityProvider</span><span class="hl-2"> } </span><span class="hl-8">from</span><span class="hl-2"> </span><span class="hl-4">&#39;@backstage/plugin-catalog-backend-module-incremental-ingestion&#39;</span><span class="hl-2">;</span><br/><br/><span class="hl-0">// This will include your pagination information, let&#39;s say our API accepts a `page` parameter.</span><br/><span class="hl-0">// In this case, the cursor will include `page`</span><br/><span class="hl-3">interface</span><span class="hl-2"> </span><span class="hl-13">Cursor</span><span class="hl-2"> {</span><br/><span class="hl-2">  </span><span class="hl-6">page</span><span class="hl-2">: </span><span class="hl-13">number</span><span class="hl-2">;</span><br/><span class="hl-2">}</span><br/><br/><span class="hl-0">// This interface describes the type of data that will be passed to your burst function.</span><br/><span class="hl-3">interface</span><span class="hl-2"> </span><span class="hl-13">Context</span><span class="hl-2"> {</span><br/><span class="hl-2">  </span><span class="hl-6">apiClient</span><span class="hl-2">: </span><span class="hl-13">MyApiClient</span><span class="hl-2">;</span><br/><span class="hl-2">}</span><br/><br/><span class="hl-8">export</span><span class="hl-2"> </span><span class="hl-3">class</span><span class="hl-2"> </span><span class="hl-13">MyIncrementalEntityProvider</span><br/><span class="hl-2">  </span><span class="hl-3">implements</span><span class="hl-2"> </span><span class="hl-13">IncrementalEntityProvider</span><span class="hl-2">&lt;</span><span class="hl-13">Cursor</span><span class="hl-2">, </span><span class="hl-13">Context</span><span class="hl-2">&gt;</span><br/><span class="hl-2">{</span><br/><span class="hl-2">  </span><span class="hl-1">getProviderName</span><span class="hl-2">() {</span><br/><span class="hl-2">    </span><span class="hl-8">return</span><span class="hl-2"> </span><span class="hl-4">`MyIncrementalEntityProvider`</span><span class="hl-2">;</span><br/><span class="hl-2">  }</span><br/><span class="hl-2">}</span>
</code><button type="button">Copy</button></pre>

<p><code>around</code> method is used for setup and tear-down. For example, if you need to create a client that will connect to the API, you would do that here.</p>
<pre><code class="ts"><span class="hl-8">export</span><span class="hl-2"> </span><span class="hl-3">class</span><span class="hl-2"> </span><span class="hl-13">MyIncrementalEntityProvider</span><br/><span class="hl-2">  </span><span class="hl-3">implements</span><span class="hl-2"> </span><span class="hl-13">IncrementalEntityProvider</span><span class="hl-2">&lt;</span><span class="hl-13">Cursor</span><span class="hl-2">, </span><span class="hl-13">Context</span><span class="hl-2">&gt;</span><br/><span class="hl-2">{</span><br/><span class="hl-2">  </span><span class="hl-1">getProviderName</span><span class="hl-2">() {</span><br/><span class="hl-2">    </span><span class="hl-8">return</span><span class="hl-2"> </span><span class="hl-4">`MyIncrementalEntityProvider`</span><span class="hl-2">;</span><br/><span class="hl-2">  }</span><br/><br/><span class="hl-2">  </span><span class="hl-3">async</span><span class="hl-2"> </span><span class="hl-1">around</span><span class="hl-2">(</span><span class="hl-1">burst</span><span class="hl-2">: (</span><span class="hl-6">context</span><span class="hl-2">: </span><span class="hl-13">Context</span><span class="hl-2">) </span><span class="hl-3">=&gt;</span><span class="hl-2"> </span><span class="hl-13">Promise</span><span class="hl-2">&lt;</span><span class="hl-13">void</span><span class="hl-2">&gt;): </span><span class="hl-13">Promise</span><span class="hl-2">&lt;</span><span class="hl-13">void</span><span class="hl-2">&gt; {</span><br/><span class="hl-2">    </span><span class="hl-3">const</span><span class="hl-2"> </span><span class="hl-5">apiClient</span><span class="hl-2"> = </span><span class="hl-3">new</span><span class="hl-2"> </span><span class="hl-1">MyApiClient</span><span class="hl-2">();</span><br/><br/><span class="hl-2">    </span><span class="hl-8">await</span><span class="hl-2"> </span><span class="hl-1">burst</span><span class="hl-2">({ </span><span class="hl-6">apiClient</span><span class="hl-2"> });</span><br/><br/><span class="hl-2">    </span><span class="hl-0">// If you need to do any teardown, you can do it here.</span><br/><span class="hl-2">  }</span><br/><span class="hl-2">}</span>
</code><button type="button">Copy</button></pre>

<p>If you need to pass a token to your API, then you can create a constructor that will receive a token and use the token to setup the client.</p>
<pre><code class="ts"><span class="hl-8">export</span><span class="hl-2"> </span><span class="hl-3">class</span><span class="hl-2"> </span><span class="hl-13">MyIncrementalEntityProvider</span><br/><span class="hl-2">  </span><span class="hl-3">implements</span><span class="hl-2"> </span><span class="hl-13">IncrementalEntityProvider</span><span class="hl-2">&lt;</span><span class="hl-13">Cursor</span><span class="hl-2">, </span><span class="hl-13">Context</span><span class="hl-2">&gt;</span><br/><span class="hl-2">{</span><br/><span class="hl-2">  </span><span class="hl-6">token</span><span class="hl-2">: </span><span class="hl-13">string</span><span class="hl-2">;</span><br/><br/><span class="hl-2">  </span><span class="hl-3">constructor</span><span class="hl-2">(</span><span class="hl-6">token</span><span class="hl-2">: </span><span class="hl-13">string</span><span class="hl-2">) {</span><br/><span class="hl-2">    </span><span class="hl-3">this</span><span class="hl-2">.</span><span class="hl-6">token</span><span class="hl-2"> = </span><span class="hl-6">token</span><span class="hl-2">;</span><br/><span class="hl-2">  }</span><br/><br/><span class="hl-2">  </span><span class="hl-1">getProviderName</span><span class="hl-2">() {</span><br/><span class="hl-2">    </span><span class="hl-8">return</span><span class="hl-2"> </span><span class="hl-4">`MyIncrementalEntityProvider`</span><span class="hl-2">;</span><br/><span class="hl-2">  }</span><br/><br/><span class="hl-2">  </span><span class="hl-3">async</span><span class="hl-2"> </span><span class="hl-1">around</span><span class="hl-2">(</span><span class="hl-1">burst</span><span class="hl-2">: (</span><span class="hl-6">context</span><span class="hl-2">: </span><span class="hl-13">Context</span><span class="hl-2">) </span><span class="hl-3">=&gt;</span><span class="hl-2"> </span><span class="hl-13">Promise</span><span class="hl-2">&lt;</span><span class="hl-13">void</span><span class="hl-2">&gt;): </span><span class="hl-13">Promise</span><span class="hl-2">&lt;</span><span class="hl-13">void</span><span class="hl-2">&gt; {</span><br/><span class="hl-2">    </span><span class="hl-3">const</span><span class="hl-2"> </span><span class="hl-5">apiClient</span><span class="hl-2"> = </span><span class="hl-3">new</span><span class="hl-2"> </span><span class="hl-1">MyApiClient</span><span class="hl-2">(</span><span class="hl-3">this</span><span class="hl-2">.</span><span class="hl-6">token</span><span class="hl-2">);</span><br/><br/><span class="hl-2">    </span><span class="hl-8">await</span><span class="hl-2"> </span><span class="hl-1">burst</span><span class="hl-2">({ </span><span class="hl-6">apiClient</span><span class="hl-2"> });</span><br/><span class="hl-2">  }</span><br/><span class="hl-2">}</span>
</code><button type="button">Copy</button></pre>

<p>The last step is to implement the actual <code>next</code> method that will accept the cursor, call the API, process the result and return the result.</p>
<pre><code class="ts"><span class="hl-8">import</span><span class="hl-2"> {</span><br/><span class="hl-2">  </span><span class="hl-6">ANNOTATION_LOCATION</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-6">ANNOTATION_ORIGIN_LOCATION</span><span class="hl-2">,</span><br/><span class="hl-2">} </span><span class="hl-8">from</span><span class="hl-2"> </span><span class="hl-4">&#39;@backstage/catalog-model&#39;</span><span class="hl-2">;</span><br/><span class="hl-8">import</span><span class="hl-2"> { </span><span class="hl-6">IncrementalEntityProvider</span><span class="hl-2"> } </span><span class="hl-8">from</span><span class="hl-2"> </span><span class="hl-4">&#39;@backstage/plugin-catalog-backend-module-incremental-ingestion&#39;</span><span class="hl-2">;</span><br/><br/><span class="hl-8">export</span><span class="hl-2"> </span><span class="hl-3">class</span><span class="hl-2"> </span><span class="hl-13">MyIncrementalEntityProvider</span><span class="hl-2"> </span><span class="hl-3">implements</span><span class="hl-2"> </span><span class="hl-13">IncrementalEntityProvider</span><span class="hl-2">&lt;</span><span class="hl-13">Cursor</span><span class="hl-2">, </span><span class="hl-13">Context</span><span class="hl-2">&gt; {</span><br/><br/><span class="hl-2">  </span><span class="hl-6">token</span><span class="hl-2">: </span><span class="hl-13">string</span><span class="hl-2">;</span><br/><span class="hl-2">  </span><span class="hl-6">mySource</span><span class="hl-2">: </span><span class="hl-13">string</span><span class="hl-2">;</span><br/><br/><span class="hl-2">  </span><span class="hl-3">constructor</span><span class="hl-2">(</span><span class="hl-6">token</span><span class="hl-2">: </span><span class="hl-13">string</span><span class="hl-2">, </span><span class="hl-6">mySource</span><span class="hl-2">: </span><span class="hl-13">string</span><span class="hl-2">) {</span><br/><span class="hl-2">    </span><span class="hl-3">this</span><span class="hl-2">.</span><span class="hl-6">token</span><span class="hl-2"> = </span><span class="hl-6">token</span><span class="hl-2">;</span><br/><span class="hl-2">    </span><span class="hl-3">this</span><span class="hl-2">.</span><span class="hl-6">mySource</span><span class="hl-2"> = </span><span class="hl-6">mySource</span><span class="hl-2">;</span><br/><span class="hl-2">  }</span><br/><br/><span class="hl-2">  </span><span class="hl-1">getProviderName</span><span class="hl-2">() {</span><br/><span class="hl-2">    </span><span class="hl-8">return</span><span class="hl-2"> </span><span class="hl-4">`MyIncrementalEntityProvider`</span><span class="hl-2">;</span><br/><span class="hl-2">  }</span><br/><br/><br/><span class="hl-2">  </span><span class="hl-3">async</span><span class="hl-2"> </span><span class="hl-1">around</span><span class="hl-2">(</span><span class="hl-1">burst</span><span class="hl-2">: (</span><span class="hl-6">context</span><span class="hl-2">: </span><span class="hl-13">Context</span><span class="hl-2">) </span><span class="hl-3">=&gt;</span><span class="hl-2"> </span><span class="hl-13">Promise</span><span class="hl-2">&lt;</span><span class="hl-13">void</span><span class="hl-2">&gt;): </span><span class="hl-13">Promise</span><span class="hl-2">&lt;</span><span class="hl-13">void</span><span class="hl-2">&gt; {</span><br/><br/><span class="hl-2">    </span><span class="hl-3">const</span><span class="hl-2"> </span><span class="hl-5">apiClient</span><span class="hl-2"> = </span><span class="hl-3">new</span><span class="hl-2"> </span><span class="hl-1">MyApiClient</span><span class="hl-2">(</span><span class="hl-3">this</span><span class="hl-2">.</span><span class="hl-6">token</span><span class="hl-2">)</span><br/><br/><span class="hl-2">    </span><span class="hl-8">await</span><span class="hl-2"> </span><span class="hl-1">burst</span><span class="hl-2">({ </span><span class="hl-6">apiClient</span><span class="hl-2"> })</span><br/><span class="hl-2">  }</span><br/><br/><span class="hl-2">  </span><span class="hl-3">async</span><span class="hl-2"> </span><span class="hl-1">next</span><span class="hl-2">(</span><span class="hl-6">context</span><span class="hl-2">: </span><span class="hl-13">Context</span><span class="hl-2">, </span><span class="hl-6">cursor</span><span class="hl-2">?: </span><span class="hl-13">Cursor</span><span class="hl-2"> = { </span><span class="hl-6">page:</span><span class="hl-2"> </span><span class="hl-7">1</span><span class="hl-2"> }): </span><span class="hl-13">Promise</span><span class="hl-2">&lt;</span><span class="hl-13">EntityIteratorResult</span><span class="hl-2">&lt;</span><span class="hl-13">Cursor</span><span class="hl-2">&gt;&gt; {</span><br/><span class="hl-2">    </span><span class="hl-3">const</span><span class="hl-2"> { </span><span class="hl-5">apiClient</span><span class="hl-2"> } = </span><span class="hl-6">context</span><span class="hl-2">;</span><br/><span class="hl-2">    </span><span class="hl-3">const</span><span class="hl-2"> </span><span class="hl-5">location</span><span class="hl-2"> = </span><span class="hl-4">`</span><span class="hl-3">${</span><span class="hl-3">this</span><span class="hl-9">.</span><span class="hl-1">getProviderName</span><span class="hl-9">()</span><span class="hl-3">}</span><span class="hl-4">:</span><span class="hl-3">${</span><span class="hl-3">this</span><span class="hl-9">.</span><span class="hl-6">mySource</span><span class="hl-3">}</span><span class="hl-4">`</span><span class="hl-2">;</span><br/><br/><span class="hl-2">    </span><span class="hl-0">// call your API with the current cursor</span><br/><span class="hl-2">    </span><span class="hl-3">const</span><span class="hl-2"> </span><span class="hl-5">data</span><span class="hl-2"> = </span><span class="hl-8">await</span><span class="hl-2"> </span><span class="hl-6">apiClient</span><span class="hl-2">.</span><span class="hl-1">getServices</span><span class="hl-2">(</span><span class="hl-6">cursor</span><span class="hl-2">);</span><br/><br/><span class="hl-2">    </span><span class="hl-0">// calculate the next page</span><br/><span class="hl-2">    </span><span class="hl-3">const</span><span class="hl-2"> </span><span class="hl-5">nextPage</span><span class="hl-2"> = </span><span class="hl-6">page</span><span class="hl-2"> + </span><span class="hl-7">1</span><span class="hl-2">;</span><br/><br/><span class="hl-2">    </span><span class="hl-0">// figure out if there are any more pages to fetch</span><br/><span class="hl-2">    </span><span class="hl-3">const</span><span class="hl-2"> </span><span class="hl-5">done</span><span class="hl-2"> = </span><span class="hl-6">nextPage</span><span class="hl-2"> &gt; </span><span class="hl-6">data</span><span class="hl-2">.</span><span class="hl-6">totalPages</span><span class="hl-2">;</span><br/><br/><span class="hl-2">    </span><span class="hl-0">// convert returned items into entities</span><br/><span class="hl-2">    </span><span class="hl-3">const</span><span class="hl-2"> </span><span class="hl-5">entities</span><span class="hl-2"> = </span><span class="hl-6">data</span><span class="hl-2">.</span><span class="hl-6">items</span><span class="hl-2">.</span><span class="hl-1">map</span><span class="hl-2">(</span><span class="hl-6">item</span><span class="hl-2"> </span><span class="hl-3">=&gt;</span><span class="hl-2"> ({</span><br/><span class="hl-2">      </span><span class="hl-6">entity:</span><span class="hl-2"> {</span><br/><span class="hl-2">        </span><span class="hl-6">apiVersion:</span><span class="hl-2"> </span><span class="hl-4">&#39;backstage.io/v1beta1&#39;</span><span class="hl-2">,</span><br/><span class="hl-2">        </span><span class="hl-6">kind:</span><span class="hl-2"> </span><span class="hl-4">&#39;Component&#39;</span><span class="hl-2">,</span><br/><span class="hl-2">        </span><span class="hl-6">metadata:</span><span class="hl-2"> {</span><br/><span class="hl-2">          </span><span class="hl-6">name:</span><span class="hl-2"> </span><span class="hl-6">item</span><span class="hl-2">.</span><span class="hl-6">name</span><span class="hl-2">,</span><br/><span class="hl-2">          </span><span class="hl-6">annotations:</span><span class="hl-2"> {</span><br/><span class="hl-2">            </span><span class="hl-0">// You need to define these, otherwise they&#39;ll fail validation</span><br/><span class="hl-2">            </span><span class="hl-6">[</span><span class="hl-5">ANNOTATION_LOCATION</span><span class="hl-6">]:</span><span class="hl-2"> </span><span class="hl-6">location</span><span class="hl-2">,</span><br/><span class="hl-2">            </span><span class="hl-6">[</span><span class="hl-5">ANNOTATION_ORIGIN_LOCATION</span><span class="hl-6">]:</span><span class="hl-2"> </span><span class="hl-6">location</span><span class="hl-2">,</span><br/><span class="hl-2">          }</span><br/><span class="hl-2">        }</span><br/><span class="hl-2">        </span><span class="hl-6">spec</span><span class="hl-2">: {</span><br/><span class="hl-2">          </span><span class="hl-6">type:</span><span class="hl-2"> </span><span class="hl-4">&#39;service&#39;</span><br/><span class="hl-2">        }</span><br/><span class="hl-2">      }</span><br/><span class="hl-2">    }));</span><br/><br/><span class="hl-2">    </span><span class="hl-0">// create the next cursor</span><br/><span class="hl-2">    </span><span class="hl-3">const</span><span class="hl-2"> </span><span class="hl-5">nextCursor</span><span class="hl-2"> = {</span><br/><span class="hl-2">      </span><span class="hl-6">page:</span><span class="hl-2"> </span><span class="hl-6">nextPage</span><br/><span class="hl-2">    };</span><br/><br/><span class="hl-2">    </span><span class="hl-8">return</span><span class="hl-2"> {</span><br/><span class="hl-2">      </span><span class="hl-6">done</span><span class="hl-2">,</span><br/><span class="hl-2">      </span><span class="hl-6">entities</span><span class="hl-2">,</span><br/><span class="hl-2">      </span><span class="hl-6">cursor:</span><span class="hl-2"> </span><span class="hl-6">nextCursor</span><br/><span class="hl-2">    }</span><br/><span class="hl-2">  }</span><br/><span class="hl-2">}</span>
</code><button type="button">Copy</button></pre>

<p>Now that you have your new Incremental Entity Provider, we can connect it to the catalog.</p>
<h2 id="adding-an-incremental-entity-provider-to-the-catalog" class="tsd-anchor-link">Adding an Incremental Entity Provider to the catalog<a href="#adding-an-incremental-entity-provider-to-the-catalog" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>We'll assume you followed the <a href="#installation">Installation</a> instructions. Now create a module inside <code>packages/backend/src/extensions/catalogCustomIncrementalIngestion.ts</code>.</p>
<pre><code class="ts"><span class="hl-8">import</span><span class="hl-2"> {</span><br/><span class="hl-2">  </span><span class="hl-6">coreServices</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-6">createBackendModule</span><span class="hl-2">,</span><br/><span class="hl-2">} </span><span class="hl-8">from</span><span class="hl-2"> </span><span class="hl-4">&#39;@backstage/backend-plugin-api&#39;</span><span class="hl-2">;</span><br/><span class="hl-8">import</span><span class="hl-2"> { </span><span class="hl-6">incrementalIngestionProvidersExtensionPoint</span><span class="hl-2"> } </span><span class="hl-8">from</span><span class="hl-2"> </span><span class="hl-4">&#39;@backstage/plugin-catalog-backend-module-incremental-ingestion/alpha&#39;</span><span class="hl-2">;</span><br/><br/><span class="hl-8">export</span><span class="hl-2"> </span><span class="hl-3">const</span><span class="hl-2"> </span><span class="hl-5">catalogModuleCustomIncrementalIngestionProvider</span><span class="hl-2"> =</span><br/><span class="hl-2">  </span><span class="hl-1">createBackendModule</span><span class="hl-2">({</span><br/><span class="hl-2">    </span><span class="hl-6">pluginId:</span><span class="hl-2"> </span><span class="hl-4">&#39;catalog&#39;</span><span class="hl-2">,</span><br/><span class="hl-2">    </span><span class="hl-6">moduleId:</span><span class="hl-2"> </span><span class="hl-4">&#39;custom-incremental-ingestion-provider&#39;</span><span class="hl-2">,</span><br/><span class="hl-2">    </span><span class="hl-1">register</span><span class="hl-2">(</span><span class="hl-6">env</span><span class="hl-2">) {</span><br/><span class="hl-2">      </span><span class="hl-6">env</span><span class="hl-2">.</span><span class="hl-1">registerInit</span><span class="hl-2">({</span><br/><span class="hl-2">        </span><span class="hl-6">deps:</span><span class="hl-2"> {</span><br/><span class="hl-2">          </span><span class="hl-6">incrementalBuilder:</span><span class="hl-2"> </span><span class="hl-6">incrementalIngestionProvidersExtensionPoint</span><span class="hl-2">,</span><br/><span class="hl-2">          </span><span class="hl-6">config:</span><span class="hl-2"> </span><span class="hl-6">coreServices</span><span class="hl-2">.</span><span class="hl-6">rootConfig</span><span class="hl-2">,</span><br/><span class="hl-2">        },</span><br/><span class="hl-2">        </span><span class="hl-3">async</span><span class="hl-2"> </span><span class="hl-1">init</span><span class="hl-2">({ </span><span class="hl-6">incrementalBuilder</span><span class="hl-2">, </span><span class="hl-6">config</span><span class="hl-2"> }) {</span><br/><span class="hl-2">          </span><span class="hl-0">// Assuming the token for the API comes from config</span><br/><span class="hl-2">          </span><span class="hl-3">const</span><span class="hl-2"> </span><span class="hl-5">token</span><span class="hl-2"> = </span><span class="hl-6">config</span><span class="hl-2">.</span><span class="hl-1">getString</span><span class="hl-2">(</span><span class="hl-4">&#39;myApiClient.token&#39;</span><span class="hl-2">);</span><br/><span class="hl-2">          </span><span class="hl-3">const</span><span class="hl-2"> </span><span class="hl-5">myEntityProvider</span><span class="hl-2"> = </span><span class="hl-3">new</span><span class="hl-2"> </span><span class="hl-1">MyIncrementalEntityProvider</span><span class="hl-2">(</span><span class="hl-6">token</span><span class="hl-2">);</span><br/><br/><span class="hl-2">          </span><span class="hl-3">const</span><span class="hl-2"> </span><span class="hl-5">options</span><span class="hl-2"> = {</span><br/><span class="hl-2">            </span><span class="hl-0">// How long should it attempt to read pages from the API in a</span><br/><span class="hl-2">            </span><span class="hl-0">// single burst? Keep this short. The Incremental Entity Provider</span><br/><span class="hl-2">            </span><span class="hl-0">// will attempt to read as many pages as it can in this time</span><br/><span class="hl-2">            </span><span class="hl-6">burstLength:</span><span class="hl-2"> { </span><span class="hl-6">seconds:</span><span class="hl-2"> </span><span class="hl-7">3</span><span class="hl-2"> },</span><br/><br/><span class="hl-2">            </span><span class="hl-0">// How long should it wait between bursts?</span><br/><span class="hl-2">            </span><span class="hl-6">burstInterval:</span><span class="hl-2"> { </span><span class="hl-6">seconds:</span><span class="hl-2"> </span><span class="hl-7">3</span><span class="hl-2"> },</span><br/><br/><span class="hl-2">            </span><span class="hl-0">// How long should it rest before re-ingesting again?</span><br/><span class="hl-2">            </span><span class="hl-6">restLength:</span><span class="hl-2"> { </span><span class="hl-6">days:</span><span class="hl-2"> </span><span class="hl-7">1</span><span class="hl-2"> },</span><br/><br/><span class="hl-2">            </span><span class="hl-0">// Optional back-off configuration - how long should it wait to retry</span><br/><span class="hl-2">            </span><span class="hl-0">// in the event of an error?</span><br/><span class="hl-2">            </span><span class="hl-6">backoff:</span><span class="hl-2"> [</span><br/><span class="hl-2">              { </span><span class="hl-6">seconds:</span><span class="hl-2"> </span><span class="hl-7">5</span><span class="hl-2"> },</span><br/><span class="hl-2">              { </span><span class="hl-6">seconds:</span><span class="hl-2"> </span><span class="hl-7">30</span><span class="hl-2"> },</span><br/><span class="hl-2">              { </span><span class="hl-6">minutes:</span><span class="hl-2"> </span><span class="hl-7">10</span><span class="hl-2"> },</span><br/><span class="hl-2">              { </span><span class="hl-6">hours:</span><span class="hl-2"> </span><span class="hl-7">3</span><span class="hl-2"> },</span><br/><span class="hl-2">            ],</span><br/><br/><span class="hl-2">            </span><span class="hl-0">// Optional. Use this to prevent removal of entities above a given</span><br/><span class="hl-2">            </span><span class="hl-0">// percentage. This can be helpful if a data source is flaky and</span><br/><span class="hl-2">            </span><span class="hl-0">// sometimes returns a successful status, but fewer than expected</span><br/><span class="hl-2">            </span><span class="hl-0">// assets to add or maintain in the catalog.</span><br/><span class="hl-2">            </span><span class="hl-6">rejectRemovalsAbovePercentage:</span><span class="hl-2"> </span><span class="hl-7">5</span><span class="hl-2">,</span><br/><br/><span class="hl-2">            </span><span class="hl-0">// Optional. Similar to rejectRemovalsAbovePercentage, except it</span><br/><span class="hl-2">            </span><span class="hl-0">// applies to complete, 100% failure of a data source. If true,</span><br/><span class="hl-2">            </span><span class="hl-0">// a data source that returns a successful status but does not</span><br/><span class="hl-2">            </span><span class="hl-0">// provide any assets to turn into entities will have its empty</span><br/><span class="hl-2">            </span><span class="hl-0">// data set rejected.</span><br/><span class="hl-2">            </span><span class="hl-6">rejectEmptySourceCollections:</span><span class="hl-2"> </span><span class="hl-3">true</span><span class="hl-2">,</span><br/><span class="hl-2">          };</span><br/><br/><span class="hl-2">          </span><span class="hl-6">incrementalBuilder</span><span class="hl-2">.</span><span class="hl-1">addProvider</span><span class="hl-2">({</span><br/><span class="hl-2">            </span><span class="hl-6">provider:</span><span class="hl-2"> </span><span class="hl-6">myEntityProvider</span><span class="hl-2">,</span><br/><span class="hl-2">            </span><span class="hl-6">options</span><span class="hl-2">,</span><br/><span class="hl-2">          });</span><br/><span class="hl-2">        },</span><br/><span class="hl-2">      });</span><br/><span class="hl-2">    },</span><br/><span class="hl-2">  });</span>
</code><button type="button">Copy</button></pre>

<p>That's it!!!</p>
<h2 id="error-handling" class="tsd-anchor-link">Error handling<a href="#error-handling" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>If <code>around</code> or <code>next</code> methods throw an error, the error will show up in logs and it'll trigger the Incremental Entity Provider to try again after a back-off period. It'll keep trying until it reaches the last back-off attempt, at which point it will cancel the current ingestion and start over. You don't need to do anything special to handle the retry logic.</p>
</section><details class="tsd-panel-group tsd-member-group tsd-accordion" open><summary class="tsd-accordion-summary" data-key="section-Interfaces"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg><h2>Interfaces</h2></summary><dl class="tsd-member-summaries"><dt class="tsd-member-summary" id="incrementalentityprovider"><span class="tsd-member-summary-name"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Interface"><use href="../assets/icons.svg#icon-256"></use></svg><a href="../interfaces/_backstage_plugin-catalog-backend-module-incremental-ingestion.IncrementalEntityProvider.html">IncrementalEntityProvider</a><a href="#incrementalentityprovider" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></span></dt><dd class="tsd-member-summary"></dd><dt class="tsd-member-summary" id="incrementalentityprovideroptions"><span class="tsd-member-summary-name"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Interface"><use href="../assets/icons.svg#icon-256"></use></svg><a href="../interfaces/_backstage_plugin-catalog-backend-module-incremental-ingestion.IncrementalEntityProviderOptions.html">IncrementalEntityProviderOptions</a><a href="#incrementalentityprovideroptions" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></span></dt><dd class="tsd-member-summary"></dd><dt class="tsd-member-summary" id="incrementalingestionproviderextensionpoint"><span class="tsd-member-summary-name"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Interface"><use href="../assets/icons.svg#icon-256"></use></svg><a href="../interfaces/_backstage_plugin-catalog-backend-module-incremental-ingestion.IncrementalIngestionProviderExtensionPoint.html">IncrementalIngestionProviderExtensionPoint</a><a href="#incrementalingestionproviderextensionpoint" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></span></dt><dd class="tsd-member-summary"></dd></dl></details><details class="tsd-panel-group tsd-member-group tsd-accordion" open><summary class="tsd-accordion-summary" data-key="section-Type Aliases"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg><h2>Type Aliases</h2></summary><dl class="tsd-member-summaries"><dt class="tsd-member-summary" id="entityiteratorresult"><span class="tsd-member-summary-name"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Type Alias"><use href="../assets/icons.svg#icon-2097152"></use></svg><a href="../types/_backstage_plugin-catalog-backend-module-incremental-ingestion.EntityIteratorResult.html">EntityIteratorResult</a><a href="#entityiteratorresult" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></span></dt><dd class="tsd-member-summary"></dd><dt class="tsd-member-summary" id="incrementalentityeventresult"><span class="tsd-member-summary-name"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Type Alias"><use href="../assets/icons.svg#icon-2097152"></use></svg><a href="../types/_backstage_plugin-catalog-backend-module-incremental-ingestion.IncrementalEntityEventResult.html">IncrementalEntityEventResult</a><a href="#incrementalentityeventresult" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></span></dt><dd class="tsd-member-summary"></dd></dl></details><details class="tsd-panel-group tsd-member-group tsd-accordion" open><summary class="tsd-accordion-summary" data-key="section-Variables"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg><h2>Variables</h2></summary><dl class="tsd-member-summaries"><dt class="tsd-member-summary" id="default"><span class="tsd-member-summary-name"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Variable"><use href="../assets/icons.svg#icon-32"></use></svg><a href="../variables/_backstage_plugin-catalog-backend-module-incremental-ingestion.default.html">default</a><a href="#default" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></span></dt><dd class="tsd-member-summary"></dd><dt class="tsd-member-summary" id="incrementalingestionprovidersextensionpoint"><span class="tsd-member-summary-name"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Variable"><use href="../assets/icons.svg#icon-32"></use></svg><a href="../variables/_backstage_plugin-catalog-backend-module-incremental-ingestion.incrementalIngestionProvidersExtensionPoint.html">incrementalIngestionProvidersExtensionPoint</a><a href="#incrementalingestionprovidersextensionpoint" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></span></dt><dd class="tsd-member-summary"></dd></dl></details></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg><h3>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg><h3>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#"><span></span></a><ul><li><a href="#why-did-we-create-it"><span>Why did we create it?</span></a></li><li><a href="#requirements"><span>Requirements</span></a></li><li><a href="#installation"><span>Installation</span></a></li><li><a href="#administrative-routes"><span>Administrative <wbr/>Routes</span></a></li><li><a href="#writing-an-incremental-entity-provider"><span>Writing an <wbr/>Incremental <wbr/>Entity <wbr/>Provider</span></a></li><li><a href="#adding-an-incremental-entity-provider-to-the-catalog"><span>Adding an <wbr/>Incremental <wbr/>Entity <wbr/>Provider to the catalog</span></a></li><li><a href="#error-handling"><span>Error handling</span></a></li></ul><details open class="tsd-accordion tsd-page-navigation-section"><summary class="tsd-accordion-summary" data-key="section-Interfaces"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Interfaces</summary><div><a href="#incrementalentityprovider"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Interface"><use href="../assets/icons.svg#icon-256"></use></svg><span>Incremental<wbr/>Entity<wbr/>Provider</span></a><a href="#incrementalentityprovideroptions"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Interface"><use href="../assets/icons.svg#icon-256"></use></svg><span>Incremental<wbr/>Entity<wbr/>Provider<wbr/>Options</span></a><a href="#incrementalingestionproviderextensionpoint"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Interface"><use href="../assets/icons.svg#icon-256"></use></svg><span>Incremental<wbr/>Ingestion<wbr/>Provider<wbr/>Extension<wbr/>Point</span></a></div></details><details open class="tsd-accordion tsd-page-navigation-section"><summary class="tsd-accordion-summary" data-key="section-Type Aliases"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Type Aliases</summary><div><a href="#entityiteratorresult"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Type Alias"><use href="../assets/icons.svg#icon-2097152"></use></svg><span>Entity<wbr/>Iterator<wbr/>Result</span></a><a href="#incrementalentityeventresult"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Type Alias"><use href="../assets/icons.svg#icon-2097152"></use></svg><span>Incremental<wbr/>Entity<wbr/>Event<wbr/>Result</span></a></div></details><details open class="tsd-accordion tsd-page-navigation-section"><summary class="tsd-accordion-summary" data-key="section-Variables"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Variables</summary><div><a href="#default"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Variable"><use href="../assets/icons.svg#icon-32"></use></svg><span>default</span></a><a href="#incrementalingestionprovidersextensionpoint"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Variable"><use href="../assets/icons.svg#icon-32"></use></svg><span>incremental<wbr/>Ingestion<wbr/>Providers<wbr/>Extension<wbr/>Point</span></a></div></details></div></details></div><div class="site-menu"><nav id="tsd-sidebar-links" class="tsd-navigation"><a href="https://backstage.io/docs" class="tsd-nav-link">Docs</a><a href="https://github.com/backstage/backstage" class="tsd-nav-link">Github</a></nav><nav class="tsd-navigation"><a href="../modules.html">Backstage</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
