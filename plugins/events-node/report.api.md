## API Report File for "@backstage/plugin-events-node"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts
import { AuthService } from '@backstage/backend-plugin-api';
import { DiscoveryService } from '@backstage/backend-plugin-api';
import { LifecycleService } from '@backstage/backend-plugin-api';
import { LoggerService } from '@backstage/backend-plugin-api';
import { ServiceFactory } from '@backstage/backend-plugin-api';
import { ServiceRef } from '@backstage/backend-plugin-api';

// @public
export class DefaultEventsService implements EventsService {
  // (undocumented)
  static create(options: { logger: LoggerService }): DefaultEventsService;
  forPlugin(
    pluginId: string,
    options?: {
      discovery: DiscoveryService;
      logger: LoggerService;
      auth: AuthService;
      lifecycle: LifecycleService;
    },
  ): EventsService;
  // (undocumented)
  publish(params: EventParams): Promise<void>;
  // (undocumented)
  subscribe(options: EventsServiceSubscribeOptions): Promise<void>;
}

// @public @deprecated
export interface EventBroker {
  publish(params: EventParams): Promise<void>;
  subscribe(
    ...subscribers: Array<EventSubscriber | Array<EventSubscriber>>
  ): void;
}

// @public (undocumented)
export interface EventParams<TPayload = unknown> {
  eventPayload: TPayload;
  metadata?: Record<string, string | string[] | undefined>;
  topic: string;
}

// @public @deprecated
export interface EventPublisher {
  // @deprecated (undocumented)
  setEventBroker(eventBroker: EventBroker): Promise<void>;
}

// @public
export abstract class EventRouter {
  protected constructor(options: { events: EventsService; topics: string[] });
  // (undocumented)
  protected abstract determineDestinationTopic(
    params: EventParams,
  ): string | undefined;
  // (undocumented)
  protected abstract getSubscriberId(): string;
  // (undocumented)
  onEvent(params: EventParams): Promise<void>;
  subscribe(): Promise<void>;
}

// @public
export interface EventsService {
  publish(params: EventParams): Promise<void>;
  subscribe(options: EventsServiceSubscribeOptions): Promise<void>;
}

// @public (undocumented)
export type EventsServiceEventHandler = (params: EventParams) => Promise<void>;

// @public (undocumented)
export const eventsServiceFactory: ServiceFactory<
  EventsService,
  'plugin',
  'singleton'
>;

// @public
export const eventsServiceRef: ServiceRef<EventsService, 'plugin', 'singleton'>;

// @public (undocumented)
export type EventsServiceSubscribeOptions = {
  id: string;
  topics: string[];
  onEvent: EventsServiceEventHandler;
};

// @public @deprecated
export interface EventSubscriber {
  // @deprecated
  onEvent(params: EventParams): Promise<void>;
  // @deprecated
  supportsEventTopics(): string[];
}

// @public (undocumented)
export interface HttpPostIngressOptions {
  // (undocumented)
  topic: string;
  // (undocumented)
  validator?: RequestValidator;
}

// @public (undocumented)
export interface RequestDetails {
  body: unknown;
  headers: Record<string, string | string[] | undefined>;
}

// @public
export interface RequestRejectionDetails {
  // (undocumented)
  payload: unknown;
  // (undocumented)
  status: number;
}

// @public
export interface RequestValidationContext {
  reject(details?: Partial<RequestRejectionDetails>): void;
}

// @public
export type RequestValidator = (
  request: RequestDetails,
  context: RequestValidationContext,
) => Promise<void>;

// @public
export abstract class SubTopicEventRouter extends EventRouter {
  protected constructor(options: { events: EventsService; topic: string });
  // (undocumented)
  protected determineDestinationTopic(params: EventParams): string | undefined;
  // (undocumented)
  protected abstract determineSubTopic(params: EventParams): string | undefined;
}

// Warnings were encountered during analysis:
//
// src/api/DefaultEventsService.d.ts:16:5 - (ae-undocumented) Missing documentation for "create".
// src/api/DefaultEventsService.d.ts:31:5 - (ae-undocumented) Missing documentation for "publish".
// src/api/DefaultEventsService.d.ts:32:5 - (ae-undocumented) Missing documentation for "subscribe".
// src/api/EventParams.d.ts:4:1 - (ae-undocumented) Missing documentation for "EventParams".
// src/api/EventPublisher.d.ts:15:5 - (ae-undocumented) Missing documentation for "setEventBroker".
// src/api/EventRouter.d.ts:18:5 - (ae-undocumented) Missing documentation for "getSubscriberId".
// src/api/EventRouter.d.ts:19:5 - (ae-undocumented) Missing documentation for "determineDestinationTopic".
// src/api/EventRouter.d.ts:26:5 - (ae-undocumented) Missing documentation for "onEvent".
// src/api/EventsService.d.ts:26:1 - (ae-undocumented) Missing documentation for "EventsServiceSubscribeOptions".
// src/api/EventsService.d.ts:37:1 - (ae-undocumented) Missing documentation for "EventsServiceEventHandler".
// src/api/SubTopicEventRouter.d.ts:18:5 - (ae-undocumented) Missing documentation for "determineSubTopic".
// src/api/SubTopicEventRouter.d.ts:19:5 - (ae-undocumented) Missing documentation for "determineDestinationTopic".
// src/api/http/HttpPostIngressOptions.d.ts:5:1 - (ae-undocumented) Missing documentation for "HttpPostIngressOptions".
// src/api/http/HttpPostIngressOptions.d.ts:6:5 - (ae-undocumented) Missing documentation for "topic".
// src/api/http/HttpPostIngressOptions.d.ts:7:5 - (ae-undocumented) Missing documentation for "validator".
// src/api/http/validation/RequestDetails.d.ts:4:1 - (ae-undocumented) Missing documentation for "RequestDetails".
// src/api/http/validation/RequestRejectionDetails.d.ts:8:5 - (ae-undocumented) Missing documentation for "status".
// src/api/http/validation/RequestRejectionDetails.d.ts:9:5 - (ae-undocumented) Missing documentation for "payload".
// src/service.d.ts:10:22 - (ae-undocumented) Missing documentation for "eventsServiceFactory".
```
