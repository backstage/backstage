## API Report File for "@backstage/plugin-kubernetes-node"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts
import { AuthenticationStrategy as AuthenticationStrategy_2 } from '@backstage/plugin-kubernetes-node';
import { BackstageCredentials } from '@backstage/backend-plugin-api';
import { CustomResource as CustomResource_2 } from '@backstage/plugin-kubernetes-node';
import { CustomResourceMatcher } from '@backstage/plugin-kubernetes-common';
import { Entity } from '@backstage/catalog-model';
import type express from 'express';
import { ExtensionPoint } from '@backstage/backend-plugin-api';
import { FetchResponse } from '@backstage/plugin-kubernetes-common';
import { JsonObject } from '@backstage/types';
import { KubernetesClustersSupplier as KubernetesClustersSupplier_2 } from '@backstage/plugin-kubernetes-node';
import { KubernetesFetcher as KubernetesFetcher_2 } from '@backstage/plugin-kubernetes-node';
import { KubernetesFetchError } from '@backstage/plugin-kubernetes-common';
import { KubernetesObjectsProvider as KubernetesObjectsProvider_2 } from '@backstage/plugin-kubernetes-node';
import { KubernetesRequestAuth } from '@backstage/plugin-kubernetes-common';
import { KubernetesServiceLocator as KubernetesServiceLocator_2 } from '@backstage/plugin-kubernetes-node';
import { LoggerService } from '@backstage/backend-plugin-api';
import { ObjectsByEntityResponse } from '@backstage/plugin-kubernetes-common';
import { ObjectToFetch as ObjectToFetch_2 } from '@backstage/plugin-kubernetes-node';

// @public (undocumented)
export interface AuthenticationStrategy {
  // (undocumented)
  getCredential(
    clusterDetails: ClusterDetails,
    authConfig: KubernetesRequestAuth,
  ): Promise<KubernetesCredential>;
  // (undocumented)
  presentAuthMetadata(authMetadata: AuthMetadata): AuthMetadata;
  // (undocumented)
  validateCluster(authMetadata: AuthMetadata): Error[];
}

// @public
export type AuthMetadata = Record<string, string>;

// @public (undocumented)
export interface ClusterDetails {
  // (undocumented)
  authMetadata: AuthMetadata;
  // (undocumented)
  caData?: string | undefined;
  // (undocumented)
  caFile?: string | undefined;
  customResources?: CustomResourceMatcher[];
  dashboardApp?: string;
  dashboardParameters?: JsonObject;
  dashboardUrl?: string;
  name: string;
  skipMetricsLookup?: boolean;
  // (undocumented)
  skipTLSVerify?: boolean;
  title?: string;
  // (undocumented)
  url: string;
}

// @public (undocumented)
export interface CustomResource extends ObjectToFetch {
  // (undocumented)
  objectType: 'customresources';
}

// @public (undocumented)
export interface CustomResourcesByEntity extends KubernetesObjectsByEntity {
  // (undocumented)
  customResources: CustomResourceMatcher[];
}

// @public (undocumented)
export interface FetchResponseWrapper {
  // (undocumented)
  errors: KubernetesFetchError[];
  // (undocumented)
  responses: FetchResponse[];
}

// @public
export interface KubernetesAuthStrategyExtensionPoint {
  // (undocumented)
  addAuthStrategy(key: string, strategy: AuthenticationStrategy_2): void;
}

// @public
export const kubernetesAuthStrategyExtensionPoint: ExtensionPoint<KubernetesAuthStrategyExtensionPoint>;

// @public
export interface KubernetesClustersSupplier {
  getClusters(options: {
    credentials: BackstageCredentials;
  }): Promise<ClusterDetails[]>;
}

// @public
export interface KubernetesClusterSupplierExtensionPoint {
  // (undocumented)
  addClusterSupplier(
    clusterSupplier:
      | KubernetesClustersSupplier_2
      | KubernetesClusterSupplierFactory,
  ): void;
}

// @public
export const kubernetesClusterSupplierExtensionPoint: ExtensionPoint<KubernetesClusterSupplierExtensionPoint>;

// @public
export type KubernetesClusterSupplierFactory = (opts: {
  getDefault: () => Promise<KubernetesClustersSupplier_2>;
}) => Promise<KubernetesClustersSupplier_2>;

// @public
export type KubernetesCredential =
  | {
      type: 'bearer token';
      token: string;
    }
  | {
      type: 'x509 client certificate';
      cert: string;
      key: string;
    }
  | {
      type: 'anonymous';
    };

// @public
export interface KubernetesFetcher {
  // (undocumented)
  fetchObjectsForService(
    params: ObjectFetchParams,
  ): Promise<FetchResponseWrapper>;
  // (undocumented)
  fetchPodMetricsByNamespaces(
    clusterDetails: ClusterDetails,
    credential: KubernetesCredential,
    namespaces: Set<string>,
    labelSelector?: string,
  ): Promise<FetchResponseWrapper>;
}

// @public
export interface KubernetesFetcherExtensionPoint {
  // (undocumented)
  addFetcher(fetcher: KubernetesFetcher_2 | KubernetesFetcherFactory): void;
}

// @public
export const kubernetesFetcherExtensionPoint: ExtensionPoint<KubernetesFetcherExtensionPoint>;

// @public
export type KubernetesFetcherFactory = (opts: {
  getDefault: () => Promise<KubernetesFetcher_2>;
}) => Promise<KubernetesFetcher_2>;

// @public (undocumented)
export interface KubernetesObjectsByEntity {
  // (undocumented)
  auth: KubernetesRequestAuth;
  // (undocumented)
  entity: Entity;
}

// @public (undocumented)
export interface KubernetesObjectsProvider {
  // (undocumented)
  getCustomResourcesByEntity(
    customResourcesByEntity: CustomResourcesByEntity,
    options: {
      credentials: BackstageCredentials;
    },
  ): Promise<ObjectsByEntityResponse>;
  // (undocumented)
  getKubernetesObjectsByEntity(
    kubernetesObjectsByEntity: KubernetesObjectsByEntity,
    options: {
      credentials: BackstageCredentials;
    },
  ): Promise<ObjectsByEntityResponse>;
}

// @public
export interface KubernetesObjectsProviderExtensionPoint {
  // (undocumented)
  addObjectsProvider(
    provider: KubernetesObjectsProvider_2 | KubernetesObjectsProviderFactory,
  ): void;
}

// @public
export const kubernetesObjectsProviderExtensionPoint: ExtensionPoint<KubernetesObjectsProviderExtensionPoint>;

// @public
export type KubernetesObjectsProviderFactory = (opts: {
  getDefault: () => Promise<KubernetesObjectsProvider_2>;
  clusterSupplier: KubernetesClustersSupplier_2;
  serviceLocator: KubernetesServiceLocator_2;
  fetcher: KubernetesFetcher_2;
  customResources: CustomResource_2[];
  objectTypesToFetch?: ObjectToFetch_2[];
  authStrategy: AuthenticationStrategy_2;
}) => Promise<KubernetesObjectsProvider_2>;

// @public (undocumented)
export type KubernetesObjectTypes =
  | 'pods'
  | 'services'
  | 'configmaps'
  | 'deployments'
  | 'limitranges'
  | 'resourcequotas'
  | 'replicasets'
  | 'horizontalpodautoscalers'
  | 'jobs'
  | 'cronjobs'
  | 'ingresses'
  | 'customresources'
  | 'statefulsets'
  | 'daemonsets'
  | 'secrets';

// @public
export interface KubernetesRouterExtensionPoint {
  // (undocumented)
  addRouter(router: KubernetesRouterFactory): void;
}

// @public
export const kubernetesRouterExtensionPoint: ExtensionPoint<KubernetesRouterExtensionPoint>;

// @public
export type KubernetesRouterFactory = (opts: {
  getDefault: () => express.Router;
  objectsProvider: KubernetesObjectsProvider_2;
  clusterSupplier: KubernetesClustersSupplier_2;
  authStrategyMap: {
    [key: string]: AuthenticationStrategy_2;
  };
}) => express.Router;

// @public
export interface KubernetesServiceLocator {
  // (undocumented)
  getClustersByEntity(
    entity: Entity,
    requestContext: ServiceLocatorRequestContext,
  ): Promise<{
    clusters: ClusterDetails[];
  }>;
}

// @public
export interface KubernetesServiceLocatorExtensionPoint {
  // (undocumented)
  addServiceLocator(
    serviceLocator:
      | KubernetesServiceLocator_2
      | KubernetesServiceLocatorFactory,
  ): void;
}

// @public
export const kubernetesServiceLocatorExtensionPoint: ExtensionPoint<KubernetesServiceLocatorExtensionPoint>;

// @public
export type KubernetesServiceLocatorFactory = (opts: {
  getDefault: () => Promise<KubernetesServiceLocator_2>;
  clusterSupplier: KubernetesClustersSupplier_2;
}) => Promise<KubernetesServiceLocator_2>;

// @public (undocumented)
export interface ObjectFetchParams {
  // (undocumented)
  clusterDetails: ClusterDetails;
  // (undocumented)
  credential: KubernetesCredential;
  // (undocumented)
  customResources: CustomResource[];
  // (undocumented)
  labelSelector?: string;
  // (undocumented)
  namespace?: string;
  // (undocumented)
  objectTypesToFetch: Set<ObjectToFetch>;
  // (undocumented)
  serviceId: string;
}

// @public (undocumented)
export interface ObjectToFetch {
  // (undocumented)
  apiVersion: string;
  // (undocumented)
  group: string;
  // (undocumented)
  objectType: KubernetesObjectTypes;
  // (undocumented)
  plural: string;
}

// @public (undocumented)
export type PinnipedClientCerts = {
  key: string;
  cert: string;
  expirationTimestamp: string;
};

// @public (undocumented)
export class PinnipedHelper {
  constructor(logger: LoggerService);
  // (undocumented)
  tokenCredentialRequest(
    clusterDetails: ClusterDetails,
    pinnipedParams: PinnipedParameters,
  ): Promise<PinnipedClientCerts>;
}

// @public (undocumented)
export type PinnipedParameters = {
  clusterScopedIdToken: string;
  authenticator: {
    apiGroup: string;
    kind: string;
    name: string;
  };
  tokenCredentialRequest?: {
    apiGroup?: string;
  };
};

// @public (undocumented)
export interface ServiceLocatorRequestContext {
  // (undocumented)
  credentials: BackstageCredentials;
  // (undocumented)
  customResources: CustomResourceMatcher[];
  // (undocumented)
  objectTypesToFetch: Set<ObjectToFetch>;
}
```
