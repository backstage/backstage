/*! For license information please see 4812e370.d95bd0c9.js.LICENSE.txt */
"use strict";(self.webpackChunkbackstage_microsite=self.webpackChunkbackstage_microsite||[]).push([[783683],{830086:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>r,contentTitle:()=>o,default:()=>h,frontMatter:()=>s,metadata:()=>c,toc:()=>l});var i=t(474848),a=t(28453);const s={id:"index",title:"Getting Started",description:"How to get started with the notifications and signals"},o=void 0,c={id:"notifications/index",title:"Getting Started",description:"How to get started with the notifications and signals",source:"@site/../docs/notifications/index.md",sourceDirName:"notifications",slug:"/notifications/",permalink:"/docs/next/notifications/",draft:!1,unlisted:!1,editUrl:"https://github.com/backstage/backstage/edit/master/docs/notifications/index.md",tags:[],version:"current",frontMatter:{id:"index",title:"Getting Started",description:"How to get started with the notifications and signals"},sidebar:"docs",previous:{title:"Proxy",permalink:"/docs/next/features/kubernetes/proxy"},next:{title:"Processors",permalink:"/docs/next/notifications/processors"}},r={},l=[{value:"Upgrade to the latest version of Backstage",id:"upgrade-to-the-latest-version-of-backstage",level:3},{value:"About notifications",id:"about-notifications",level:2},{value:"Installation",id:"installation",level:2},{value:"Add Notifications Backend",id:"add-notifications-backend",level:3},{value:"Add Notifications Frontend",id:"add-notifications-frontend",level:3},{value:"Optional: Add Signals",id:"optional-add-signals",level:3},{value:"Optional: Add Signals Backend",id:"optional-add-signals-backend",level:4},{value:"Optional: Signals Frontend",id:"optional-signals-frontend",level:4},{value:"User-specific notification settings",id:"user-specific-notification-settings",level:3},{value:"Automatic notification cleanup",id:"automatic-notification-cleanup",level:3},{value:"Scaffolder Action",id:"scaffolder-action",level:2},{value:"Basic Example",id:"basic-example",level:3},{value:"Additional info",id:"additional-info",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:'The Backstage Notifications System provides a way for plugins and external services to send notifications to Backstage users.\nThese notifications are displayed in the dedicated page of the Backstage frontend UI or by frontend plugins per specific scenarios.\nAdditionally, notifications can be sent to external channels (like email) via "processors" implemented within plugins.'}),"\n",(0,i.jsx)(n.p,{children:"Notifications can be optionally extended with the signals plugin, which provides a push mechanism to ensure users receive notifications immediately."}),"\n",(0,i.jsx)(n.h3,{id:"upgrade-to-the-latest-version-of-backstage",children:"Upgrade to the latest version of Backstage"}),"\n",(0,i.jsxs)(n.p,{children:["To ensure your version of Backstage has all the latest notifications and signals related functionality, it\u2019s important to upgrade to the latest version. The ",(0,i.jsx)(n.a,{href:"https://backstage.github.io/upgrade-helper/",children:"Backstage upgrade helper"})," is a great tool to help ensure that you\u2019ve made all the necessary changes during the upgrade!"]}),"\n",(0,i.jsx)(n.h2,{id:"about-notifications",children:"About notifications"}),"\n",(0,i.jsx)(n.p,{children:"Notifications are messages sent to either individual users or groups.\nThey are not intended for inter-process communication of any kind."}),"\n",(0,i.jsx)(n.p,{children:"There are two basic types of notifications:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Broadcast"}),": Messages sent to all users of Backstage."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Entity"}),": Messages delivered to specific listed entities, such as Users or Groups."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Example of use-cases:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"System-wide announcements or alerts"}),"\n",(0,i.jsx)(n.li,{children:"Notifications for component owners, e.g. build failures, successful deployments, new vulnerabilities"}),"\n",(0,i.jsx)(n.li,{children:"Notifications for individuals, e.g. updates you have subscribed to, new required training courses"}),"\n",(0,i.jsx)(n.li,{children:"Notifications pertaining to a particular entity in the catalog: A notification might apply to an entity and the owning team."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsxs)(n.p,{children:["As of the ",(0,i.jsx)(n.code,{children:"1.42.0"})," release of Backstage, Notifications and Signals are installed as part of the default ",(0,i.jsx)(n.code,{children:"@backstage/create-app"})," instance which means you won't need to follow the installations steps outlined here. The only exception to this is adding the ",(0,i.jsx)(n.a,{href:"#user-specific-notification-settings",children:"Notifications tab to User Settings"})," to allow managing these settings."]})}),"\n",(0,i.jsx)(n.p,{children:"The following sections will walk you through the installation of the various parts of the Backstage Notification System."}),"\n",(0,i.jsx)(n.h3,{id:"add-notifications-backend",children:"Add Notifications Backend"}),"\n",(0,i.jsx)(n.p,{children:"First we need to add the backend package:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",metastring:'title="From your Backstage root directory"',children:"yarn --cwd packages/backend add @backstage/plugin-notifications-backend\n"})}),"\n",(0,i.jsx)(n.p,{children:"Then we need to add it to our backend:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",metastring:'title="packages/backend/src/index.ts"',children:"const backend = createBackend();\n// ...\nbackend.add(import('@backstage/plugin-notifications-backend'));\n"})}),"\n",(0,i.jsx)(n.h3,{id:"add-notifications-frontend",children:"Add Notifications Frontend"}),"\n",(0,i.jsx)(n.p,{children:"First we need to add the frontend package:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",metastring:'title="From your Backstage root directory"',children:"yarn --cwd packages/app add @backstage/plugin-notifications\n"})}),"\n",(0,i.jsx)(n.p,{children:"To add the notifications main menu, add the following:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",metastring:'title="packages/app/src/components/Root/Root.tsx"',children:"import { NotificationsSidebarItem } from '@backstage/plugin-notifications';\n\n<SidebarPage>\n  <Sidebar>\n    <SidebarGroup>\n      // ...\n      <NotificationsSidebarItem />\n    </SidebarGroup>\n  </Sidebar>\n</SidebarPage>;\n"})}),"\n",(0,i.jsx)(n.p,{children:"Also add the route to notifications:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",metastring:'title="packages/app/src/App.tsx"',children:"import { NotificationsPage } from '@backstage/plugin-notifications';\n\n<FlatRoutes>\n  // ...\n  <Route path=\"/notifications\" element={<NotificationsPage />} />\n</FlatRoutes>;\n"})}),"\n",(0,i.jsx)(n.h3,{id:"optional-add-signals",children:"Optional: Add Signals"}),"\n",(0,i.jsx)(n.p,{children:"The use of signals is optional but improves the user experience."}),"\n",(0,i.jsx)(n.h4,{id:"optional-add-signals-backend",children:"Optional: Add Signals Backend"}),"\n",(0,i.jsx)(n.p,{children:"Add signals to your backend by first adding the backend package:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",metastring:'title="From your Backstage root directory"',children:"yarn --cwd packages/backend add @backstage/plugin-signals-backend\n"})}),"\n",(0,i.jsx)(n.p,{children:"Then add the signals plugin to your backend:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",metastring:'title="packages/backend/src/index.ts"',children:"const backend = createBackend();\n// ...\nbackend.add(import('@backstage/plugin-signals-backend'));\n"})}),"\n",(0,i.jsx)(n.h4,{id:"optional-signals-frontend",children:"Optional: Signals Frontend"}),"\n",(0,i.jsx)(n.p,{children:"Start with adding the frontend package:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",metastring:'title="From your Backstage root directory"',children:"yarn --cwd packages/app add @backstage/plugin-signals\n"})}),"\n",(0,i.jsxs)(n.p,{children:["To install the plugin, add the ",(0,i.jsx)(n.code,{children:"SignalsDisplay"})," to your app root:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",metastring:'title="packages/app/src/App.tsx"',children:"import { SignalsDisplay } from '@backstage/plugin-signals';\n\nexport default app.createRoot(\n  <>\n    <AlertDisplay transientTimeoutMs={2500} />\n    <OAuthRequestDialog />\n    {/* highlight-add-next-line */}\n    <SignalsDisplay />\n    <AppRouter>\n      <VisitListener />\n      <Root>{routes}</Root>\n    </AppRouter>\n  </>,\n);\n"})}),"\n",(0,i.jsx)(n.p,{children:"If the signals plugin is properly configured, it will be automatically discovered by the notifications plugin and used."}),"\n",(0,i.jsx)(n.h3,{id:"user-specific-notification-settings",children:"User-specific notification settings"}),"\n",(0,i.jsxs)(n.p,{children:["The notifications plugin provides a way for users to manage their notification settings. To enable this, you must\nadd the ",(0,i.jsx)(n.code,{children:"UserNotificationSettingsCard"})," to your frontend."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",metastring:'title="packages/app/src/App.tsx"',children:'<Route path="/settings" element={<UserSettingsPage />}>\n  <SettingsLayout.Route path="/advanced" title="Advanced">\n    <AdvancedSettings />\n  </SettingsLayout.Route>\n  <SettingsLayout.Route path="/notifications" title="Notifications">\n    <UserNotificationSettingsCard\n      originNames={{ \'plugin:scaffolder\': \'Scaffolder\' }}\n    />\n  </SettingsLayout.Route>\n</Route>\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Notification Settings",src:t(479923).A+"",width:"2880",height:"1644"})}),"\n",(0,i.jsx)(n.p,{children:"You can customize the origin names shown in the UI by passing an object where the keys are the origins and the values are the names you want to show in the UI."}),"\n",(0,i.jsx)(n.p,{children:"Each notification processor will receive its own row in the settings page, where the user can enable or disable notifications from that processor."}),"\n",(0,i.jsx)(n.h3,{id:"automatic-notification-cleanup",children:"Automatic notification cleanup"}),"\n",(0,i.jsx)(n.p,{children:"Notifications are deleted automatically after a certain period of time to prevent the database from growing indefinitely\nand to keep the user interface clean. The default retention period is set to 1 year, meaning that notifications older\nthan that will be deleted automatically."}),"\n",(0,i.jsxs)(n.p,{children:["The retention period can be configured by setting the ",(0,i.jsx)(n.code,{children:"notifications.retention"})," in the ",(0,i.jsx)(n.code,{children:"app-config.yaml"})," file."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"notifications:\n  retention: 1y\n"})}),"\n",(0,i.jsx)(n.p,{children:"If the retention is set to false, notifications will not be automatically deleted."}),"\n",(0,i.jsx)(n.h2,{id:"scaffolder-action",children:"Scaffolder Action"}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsxs)(n.p,{children:["As of the ",(0,i.jsx)(n.code,{children:"1.42.0"})," release of Backstage, the Notifications Scaffolder action is installed as part of the default ",(0,i.jsx)(n.code,{children:"@backstage/create-app"})," instance which means you won't need to follow the installations steps outlined here. Feel free to skip to the ",(0,i.jsx)(n.a,{href:"#basic-example",children:"Basic Example"}),"."]})}),"\n",(0,i.jsx)(n.p,{children:"There is also a Scaffolder action that you can use to send a notification as part of your Software Template."}),"\n",(0,i.jsx)(n.p,{children:"First we need to add the backend package:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",metastring:'title="From your Backstage root directory"',children:"yarn --cwd packages/backend add @backstage/plugin-scaffolder-backend-module-notifications\n"})}),"\n",(0,i.jsx)(n.p,{children:"Then we need to add it to our backend:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",metastring:'title="packages/backend/src/index.ts"',children:"const backend = createBackend();\n// ...\nbackend.add(\n  import('@backstage/plugin-scaffolder-backend-module-notifications'),\n);\n"})}),"\n",(0,i.jsx)(n.h3,{id:"basic-example",children:"Basic Example"}),"\n",(0,i.jsx)(n.p,{children:'Here\'s an example of how you can use it in your Software Template, more details and examples can be found in the "Installed actions" screen in your Backstage instances:'}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",metastring:'title="template.yaml"',children:"steps:\n  - id: notify\n    name: Notify\n    action: notification:send\n    input:\n      recipients: entity\n      entityRefs:\n        - user:default/guest\n      title: 'Template executed'\n      info: 'Your template has been executed'\n      severity: 'normal'\n"})}),"\n",(0,i.jsxs)(n.p,{children:["The example above would send a notification to the Guest user (",(0,i.jsx)(n.code,{children:"user:default/guest"}),")"]}),"\n",(0,i.jsx)(n.h2,{id:"additional-info",children:"Additional info"}),"\n",(0,i.jsxs)(n.p,{children:["An example of a backend plugin sending notifications can be found in the ",(0,i.jsxs)(n.a,{href:"https://github.com/backstage/backstage/tree/master/plugins/scaffolder-backend-module-notifications",children:[(0,i.jsx)(n.code,{children:"@backstage/plugin-scaffolder-backend-module-notifications"})," package"]}),"."]}),"\n",(0,i.jsx)(n.p,{children:"Sources of the notifications and signals plugins:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://github.com/backstage/backstage/blob/master/plugins/notifications",children:"notifications"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://github.com/backstage/backstage/blob/master/plugins/notifications-backend",children:"notifications-backend"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://github.com/backstage/backstage/blob/master/plugins/notifications-common",children:"notifications-common"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://github.com/backstage/backstage/blob/master/plugins/notifications-node",children:"notifications-node"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://github.com/backstage/backstage/blob/master/plugins/signals-backend",children:"signals-backend"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://github.com/backstage/backstage/blob/master/plugins/signals",children:"signals"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://github.com/backstage/backstage/blob/master/plugins/signals-node",children:"signals-node"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://github.com/backstage/backstage/blob/master/plugins/signals-react",children:"signals-react"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},221020:(e,n,t)=>{var i=t(296540),a=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,c=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,r={key:!0,ref:!0,__self:!0,__source:!0};function l(e,n,t){var i,s={},l=null,d=null;for(i in void 0!==t&&(l=""+t),void 0!==n.key&&(l=""+n.key),void 0!==n.ref&&(d=n.ref),n)o.call(n,i)&&!r.hasOwnProperty(i)&&(s[i]=n[i]);if(e&&e.defaultProps)for(i in n=e.defaultProps)void 0===s[i]&&(s[i]=n[i]);return{$$typeof:a,type:e,key:l,ref:d,props:s,_owner:c.current}}n.Fragment=s,n.jsx=l,n.jsxs=l},474848:(e,n,t)=>{e.exports=t(221020)},479923:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/notificationSettings-d99ca2bad0e80205edf90c51daa80968.png"},28453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>c});var i=t(296540);const a={},s=i.createContext(a);function o(e){const n=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);