"use strict";(self.webpackChunkbackstage_microsite=self.webpackChunkbackstage_microsite||[]).push([["68807"],{536201(e,s,t){t.r(s),t.d(s,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>n,toc:()=>c});var n=t(669875),o=t(474848),i=t(28453);let r={id:"v1.46.0",title:"v1.46.0",description:"Backstage Release v1.46.0"},a,d={},c=[{value:"Highlights",id:"highlights",level:2},{value:"<strong>BREAKING:</strong> Updated supported Node.js versions to 22 and 24",id:"breaking-updated-supported-nodejs-versions-to-22-and-24",level:3},{value:"<strong>BREAKING:</strong> Switched modules to <code>ES2020</code> and resolution mode to <code>bundler</code>",id:"breaking-switched-modules-to-es2020-and-resolution-mode-to-bundler",level:3},{value:"<strong>BREAKING:</strong> Moving toward updating <code>jest</code> and its DOM",id:"breaking-moving-toward-updating-jest-and-its-dom",level:3},{value:"<strong>BREAKING:</strong> Now using correct configuration options for Valkey",id:"breaking-now-using-correct-configuration-options-for-valkey",level:3},{value:"<strong>BREAKING:</strong> Techdocs addon test utils removed explicit <code>screen</code>",id:"breaking-techdocs-addon-test-utils-removed-explicit-screen",level:3},{value:"<strong>BREAKING:</strong> Backstage-UI advances!",id:"breaking-backstage-ui-advances",level:3},{value:"Simplified route compatibility",id:"simplified-route-compatibility",level:3},{value:"Support for Bitbucket Cloud OAuth",id:"support-for-bitbucket-cloud-oauth",level:3},{value:"New Catalog actions",id:"new-catalog-actions",level:3},{value:"New <code>RepoOwnerPicker</code> for Scaffolder",id:"new-repoownerpicker-for-scaffolder",level:3},{value:"Security Fixes",id:"security-fixes",level:2},{value:"Upgrade path",id:"upgrade-path",level:2},{value:"Links and References",id:"links-and-references",level:2}];function l(e){let s={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(s.p,{children:["These are the release notes for the v1.46.0 release of ",(0,o.jsx)(s.a,{href:"https://backstage.io/",children:"Backstage"}),"."]}),"\n",(0,o.jsx)(s.p,{children:"A huge thanks to the whole team of maintainers and contributors as well as the amazing Backstage Community for the hard work in getting this release developed and done."}),"\n",(0,o.jsx)(s.h2,{id:"highlights",children:"Highlights"}),"\n",(0,o.jsx)(s.p,{children:"To begin with, this release has a few important framework level updates."}),"\n",(0,o.jsxs)(s.h3,{id:"breaking-updated-supported-nodejs-versions-to-22-and-24",children:[(0,o.jsx)(s.strong,{children:"BREAKING:"})," Updated supported Node.js versions to 22 and 24"]}),"\n",(0,o.jsxs)(s.p,{children:["This release moves up the supported Node.js versions to 22 and 24, according to our ",(0,o.jsx)(s.a,{href:"https://backstage.io/docs/overview/versioning-policy#nodejs-releases",children:"versioning policy"}),". As part of this change, we are also setting the compilation targets to ES2023, which lines up with the supported Node.js versions."]}),"\n",(0,o.jsxs)(s.p,{children:["The default TypeScript ",(0,o.jsx)(s.code,{children:"target"})," compiler option is however left at ES2022. This is because older versions of TypeScript will error if they see an unsupported value, even if an override is set in your local ",(0,o.jsx)(s.code,{children:"tsconfig.json"}),". You can still choose to set the TypeScript ",(0,o.jsx)(s.code,{children:"target"})," to either ",(0,o.jsx)(s.code,{children:"ES2023"})," or even ",(0,o.jsx)(s.code,{children:"ES2024"})," in your own ",(0,o.jsx)(s.code,{children:"tsconfig.json"})," if you prefer."]}),"\n",(0,o.jsxs)(s.h3,{id:"breaking-switched-modules-to-es2020-and-resolution-mode-to-bundler",children:[(0,o.jsx)(s.strong,{children:"BREAKING:"})," Switched modules to ",(0,o.jsx)(s.code,{children:"ES2020"})," and resolution mode to ",(0,o.jsx)(s.code,{children:"bundler"})]}),"\n",(0,o.jsxs)(s.p,{children:["Now that the ecosystem has had some time to mature and adapt, we have finally switched over the default module resolution mode to ",(0,o.jsx)(s.code,{children:"bundler"})," instead of ",(0,o.jsx)(s.code,{children:"node"}),". The ",(0,o.jsx)(s.code,{children:"module"})," setting was also changed to ",(0,o.jsx)(s.code,{children:"ES2022"}),"."]}),"\n",(0,o.jsxs)(s.p,{children:["You ",(0,o.jsx)(s.em,{children:"may"})," need to bump some dependencies as part of this change, or fix imports in code. The most common source of this is that type checking will now consider the ",(0,o.jsx)(s.code,{children:"exports"})," field in ",(0,o.jsx)(s.code,{children:"package.json"})," when resolving imports. This in turn can break older versions of packages that had incompatible ",(0,o.jsx)(s.code,{children:"exports"})," fields. Generally these issues will have already been fixed in the upstream packages, but if you depend on old versions or unmaintained packages, you may still notice some effects of this."]}),"\n",(0,o.jsxs)(s.p,{children:["You might be tempted to use ",(0,o.jsx)(s.code,{children:"--skipLibCheck"})," to hide issues due to this change, but it will weaken the type safety of your project. If you run into a large number of issues and want to keep the old behavior, you can reset the ",(0,o.jsx)(s.code,{children:"moduleResolution"})," and ",(0,o.jsx)(s.code,{children:"module"})," settings of your own ",(0,o.jsx)(s.code,{children:"tsconfig.json"})," file to ",(0,o.jsx)(s.code,{children:"node"})," and ",(0,o.jsx)(s.code,{children:"ESNext"})," respectively. But keep in mind that the ",(0,o.jsx)(s.code,{children:"node"})," option will be removed in future versions of TypeScript."]}),"\n",(0,o.jsxs)(s.p,{children:["A future version of Backstage will make these new settings mandatory, as we move to rely on the ",(0,o.jsx)(s.code,{children:"exports"})," field for type resolution in packages, rather than the ",(0,o.jsx)(s.code,{children:"typesVersions"})," field."]}),"\n",(0,o.jsxs)(s.h3,{id:"breaking-moving-toward-updating-jest-and-its-dom",children:[(0,o.jsx)(s.strong,{children:"BREAKING:"})," Moving toward updating ",(0,o.jsx)(s.code,{children:"jest"})," and its DOM"]}),"\n",(0,o.jsxs)(s.p,{children:["The ",(0,o.jsx)(s.code,{children:"jest"})," test framework used to be a builtin dependency of the Backstage CLI. In this release, it has been made into a peer dependency to allow for easy upgrades to newer versions as you see fit."]}),"\n",(0,o.jsxs)(s.p,{children:["If you run tests using the Backstage CLI, you must therefore add Jest and its environment dependencies as ",(0,o.jsx)(s.code,{children:"devDependencies"})," in your project root ",(0,o.jsx)(s.code,{children:"package.json"})," when you upgrade."]}),"\n",(0,o.jsxs)(s.p,{children:["You can choose to install either Jest 29 or Jest 30. The built-in Jest version before this change was Jest 29, however, we recommend that you switch to Jest 30. Upgrading will solve the ",(0,o.jsx)(s.code,{children:"Could not parse CSS stylesheet"})," errors, allow you to use MSW v2 in web packages, and ensure that you remain compatible with future versions of the Backstage CLI. Support for Jest 29 is temporary, with the purpose of allowing you to upgrade at your own pace, but it will eventually be removed."]}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.strong,{children:"Jest 29"}),": Install ",(0,o.jsx)(s.code,{children:"jest@^29"})," and ",(0,o.jsx)(s.code,{children:"jest-environment-jsdom@^29"})," in your root ",(0,o.jsx)(s.code,{children:"package.json"}),". No migration needed, but you may see ",(0,o.jsx)(s.code,{children:"Could not parse CSS stylesheet"})," warnings/errors when testing components from ",(0,o.jsx)(s.code,{children:"@backstage/ui"})," or other packages using CSS ",(0,o.jsx)(s.code,{children:"@layer"})," declarations."]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.strong,{children:"Jest 30"}),": Install ",(0,o.jsx)(s.code,{children:"jest@^30"}),", ",(0,o.jsx)(s.code,{children:"@types/jest@^30"}),", ",(0,o.jsx)(s.code,{children:"@jest/environment-jsdom-abstract@^30"}),", and ",(0,o.jsx)(s.code,{children:"jsdom@^27"})," in your root ",(0,o.jsx)(s.code,{children:"package.json"}),". Fixes the stylesheet parsing warnings/errors, but requires migration steps."]}),"\n"]}),"\n",(0,o.jsxs)(s.p,{children:["See the ",(0,o.jsx)(s.a,{href:"https://backstage.io/docs/tutorials/jest30-migration",children:"Jest 30 migration guide"})," for detailed migration instructions."]}),"\n",(0,o.jsxs)(s.h3,{id:"breaking-now-using-correct-configuration-options-for-valkey",children:[(0,o.jsx)(s.strong,{children:"BREAKING:"})," Now using correct configuration options for Valkey"]}),"\n",(0,o.jsx)(s.p,{children:"If you are using Valkey as your backend cache provider, take note. It used to piggyback on the Redis configuration format, but that was not quite correct. So its config options have been updated to better match its capabilities."}),"\n",(0,o.jsxs)(s.p,{children:["So if you use Valkey, you need to upgrade your ",(0,o.jsx)(s.code,{children:"app-config.yaml"}),":"]}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-diff",children:"backend:\n  cache:\n    store: valkey\n    connection: ...\n    client:\n-     namespace: 'my-app'\n-     keyPrefixSeparator: ':'\n+     keyPrefix: 'my-app:'\n-     clearBatchSize: 1000\n-     useUnlink: false\n"})}),"\n",(0,o.jsxs)(s.p,{children:["Contributed by ",(0,o.jsx)(s.a,{href:"https://github.com/benjidotsh",children:"@benjidotsh"})," in ",(0,o.jsx)(s.a,{href:"https://github.com/backstage/backstage/pull/31497",children:"#31497"})]}),"\n",(0,o.jsxs)(s.h3,{id:"breaking-techdocs-addon-test-utils-removed-explicit-screen",children:[(0,o.jsx)(s.strong,{children:"BREAKING:"})," Techdocs addon test utils removed explicit ",(0,o.jsx)(s.code,{children:"screen"})]}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.code,{children:"TechdocsAddonTester.renderWithEffects()"})," used to return a ",(0,o.jsx)(s.code,{children:"screen"})," that you could use for things like ",(0,o.jsx)(s.code,{children:"getByText"}),". In order to support moving to newer versions of ",(0,o.jsx)(s.code,{children:"@testing-library"}),", we have removed this, and you should import and use the normal ",(0,o.jsx)(s.code,{children:"screen"})," from ",(0,o.jsx)(s.code,{children:"@testing-library/react"})," instead."]}),"\n",(0,o.jsxs)(s.p,{children:["However: that ",(0,o.jsx)(s.code,{children:"screen"})," can\u2019t see inside the shadow DOM, which TechDocs uses. So if your tests need to look inside shadow DOM, you must install ",(0,o.jsx)(s.code,{children:"shadow-dom-testing-library"})," and use its ",(0,o.jsx)(s.code,{children:"screen"})," which provides special shadow-DOM queries, such as ",(0,o.jsx)(s.code,{children:"getByShadowText"})," instead of `getByText."]}),"\n",(0,o.jsx)(s.p,{children:"Example:"}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-tsx",children:"import { screen } from 'shadow-dom-testing-library';\n// ... render the addon ...\nawait TechDocsAddonTester.buildAddonsInTechDocs([<AnAddon />])\n  .withDom(<body>TEST_CONTENT</body>)\n  .renderWithEffects();\nexpect(screen.getByShadowText('TEST_CONTENT')).toBeInTheDocument();\n"})}),"\n",(0,o.jsxs)(s.h3,{id:"breaking-backstage-ui-advances",children:[(0,o.jsx)(s.strong,{children:"BREAKING:"})," Backstage-UI advances!"]}),"\n",(0,o.jsxs)(s.p,{children:["Again, Backstage-UI has a bunch of updates! One of them is breaking: If you were using the ",(0,o.jsx)(s.code,{children:"Cell"})," component with text-specific props (",(0,o.jsx)(s.code,{children:"title"})," etc), you should now instead use the ",(0,o.jsx)(s.code,{children:"CellText"})," component for that. Plain ",(0,o.jsx)(s.code,{children:"Cell"})," is now meant to be used with generic child elements instead."]}),"\n",(0,o.jsx)(s.h3,{id:"simplified-route-compatibility",children:"Simplified route compatibility"}),"\n",(0,o.jsxs)(s.p,{children:["If you are partway through a migration to the New Frontend System, you may enjoy the fact that the ",(0,o.jsx)(s.code,{children:"useApp"})," and ",(0,o.jsx)(s.code,{children:"useRouteRef"})," hooks now are forwards compatible with NFS. Along with the previous route reference changes this means that there is no longer a need to use ",(0,o.jsx)(s.code,{children:"compatWrapper"})," from ",(0,o.jsx)(s.code,{children:"@backstage/core-compat-api"})," to make code based on ",(0,o.jsx)(s.code,{children:"@backstage/core-plugin-api"})," compatible with ",(0,o.jsx)(s.code,{children:"@backstage/frontend-plugin-api"})," APIs."]}),"\n",(0,o.jsx)(s.h3,{id:"support-for-bitbucket-cloud-oauth",children:"Support for Bitbucket Cloud OAuth"}),"\n",(0,o.jsx)(s.p,{children:"Support for Bitbucket Cloud OAuth has been added - which was much welcome. This introduces an alternative authentication method using a workspace OAuth consumer, alongside App Passwords (deprecated) and API tokens. OAuth does not require a bot or service account and avoids token expiry issues."}),"\n",(0,o.jsx)(s.p,{children:"As part of this change, some breaking changes were made to low level auth getter functions, such that they now return a promise instead of a plain value."}),"\n",(0,o.jsxs)(s.p,{children:["Contributed by ",(0,o.jsx)(s.a,{href:"https://github.com/jksmth",children:"@jksmth"})," in ",(0,o.jsx)(s.a,{href:"https://github.com/backstage/backstage/pull/31848",children:"#31848"})]}),"\n",(0,o.jsx)(s.h3,{id:"new-catalog-actions",children:"New Catalog actions"}),"\n",(0,o.jsxs)(s.p,{children:["There are two new MCP-usable actions on the block for registering and unregistering entities: ",(0,o.jsx)(s.code,{children:"catalog:register-entity"})," and ",(0,o.jsx)(s.code,{children:"catalog:unregister-entity"}),"."]}),"\n",(0,o.jsxs)(s.p,{children:["Contributed by ",(0,o.jsx)(s.a,{href:"https://github.com/gabemontero",children:"@gabemontero"})," in ",(0,o.jsx)(s.a,{href:"https://github.com/backstage/backstage/pull/32042",children:"#32042"})]}),"\n",(0,o.jsxs)(s.h3,{id:"new-repoownerpicker-for-scaffolder",children:["New ",(0,o.jsx)(s.code,{children:"RepoOwnerPicker"})," for Scaffolder"]}),"\n",(0,o.jsx)(s.p,{children:"A new field extension for selecting an organization or owner for a particular repository has been shipped! Currently, this only supports GitHub autocomplete, but contributions welcome in making this available for other providers!"}),"\n",(0,o.jsxs)(s.p,{children:["Contributed by ",(0,o.jsx)(s.a,{href:"https://github.com/benjidotsh",children:"@benjidotsh"})," in ",(0,o.jsx)(s.a,{href:"https://github.com/backstage/backstage/pull/32105",children:"#32105"})]}),"\n",(0,o.jsx)(s.h2,{id:"security-fixes",children:"Security Fixes"}),"\n",(0,o.jsx)(s.p,{children:"This release does not contain any security fixes."}),"\n",(0,o.jsx)(s.h2,{id:"upgrade-path",children:"Upgrade path"}),"\n",(0,o.jsxs)(s.p,{children:["We recommend that you keep your Backstage project up to date with this latest release. For more guidance on how to upgrade, check out the documentation for ",(0,o.jsx)(s.a,{href:"https://backstage.io/docs/getting-started/keeping-backstage-updated",children:"keeping Backstage updated"}),"."]}),"\n",(0,o.jsx)(s.h2,{id:"links-and-references",children:"Links and References"}),"\n",(0,o.jsx)(s.p,{children:"Below you can find a list of links and references to help you learn about and start using this new release."}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.a,{href:"https://backstage.io/",children:"Backstage official website"}),", ",(0,o.jsx)(s.a,{href:"https://backstage.io/docs/",children:"documentation"}),", and ",(0,o.jsx)(s.a,{href:"https://backstage.io/docs/getting-started/",children:"getting started guide"})]}),"\n",(0,o.jsx)(s.li,{children:(0,o.jsx)(s.a,{href:"https://github.com/backstage/backstage",children:"GitHub repository"})}),"\n",(0,o.jsxs)(s.li,{children:["Backstage's ",(0,o.jsx)(s.a,{href:"https://backstage.io/docs/overview/versioning-policy",children:"versioning and support policy"})]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.a,{href:"https://discord.gg/backstage-687207715902193673",children:"Community Discord"})," for discussions and support"]}),"\n",(0,o.jsx)(s.li,{children:(0,o.jsx)(s.a,{href:"https://github.com/backstage/backstage/tree/master/docs/releases/v1.46.0-changelog.md",children:"Changelog"})}),"\n",(0,o.jsxs)(s.li,{children:["Backstage ",(0,o.jsx)(s.a,{href:"https://backstage.io/demos",children:"Demos"}),", ",(0,o.jsx)(s.a,{href:"https://backstage.io/blog",children:"Blog"}),", ",(0,o.jsx)(s.a,{href:"https://backstage.io/docs/overview/roadmap",children:"Roadmap"})," and ",(0,o.jsx)(s.a,{href:"https://backstage.io/plugins",children:"Plugins"})]}),"\n"]}),"\n",(0,o.jsxs)(s.p,{children:["Sign up for our ",(0,o.jsx)(s.a,{href:"https://spoti.fi/backstagenewsletter",children:"newsletter"})," if you want to be informed about what is happening in the world of Backstage."]})]})}function h(e={}){let{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,o.jsx)(s,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},28453(e,s,t){t.d(s,{R:()=>r,x:()=>a});var n=t(296540);let o={},i=n.createContext(o);function r(e){let s=n.useContext(i);return n.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),n.createElement(i.Provider,{value:s},e.children)}},669875(e){e.exports=JSON.parse('{"id":"releases/v1.46.0","title":"v1.46.0","description":"Backstage Release v1.46.0","source":"@site/../docs/releases/v1.46.0.md","sourceDirName":"releases","slug":"/releases/v1.46.0","permalink":"/docs/next/releases/v1.46.0","draft":false,"unlisted":false,"editUrl":"https://github.com/backstage/backstage/edit/master/docs/releases/v1.46.0.md","tags":[],"version":"current","frontMatter":{"id":"v1.46.0","title":"v1.46.0","description":"Backstage Release v1.46.0"},"sidebar":"releases","previous":{"title":"v1.47.0","permalink":"/docs/next/releases/v1.47.0"},"next":{"title":"v1.45.0","permalink":"/docs/next/releases/v1.45.0"}}')}}]);