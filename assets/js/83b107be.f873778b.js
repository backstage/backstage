"use strict";(self.webpackChunkbackstage_microsite=self.webpackChunkbackstage_microsite||[]).push([["3036"],{541648(e,n,t){t.r(n),t.d(n,{assets:()=>r,contentTitle:()=>d,default:()=>p,frontMatter:()=>s,metadata:()=>a,toc:()=>l});var a=t(432645),o=t(474848),i=t(28453);let s={id:"installation",title:"Datadog RUM Installation",sidebar_label:"Installation",description:"Adding Datadog Real User Monitoring (RUM) to Your App"},d,r={},l=[];function c(e){let n={a:"a",admonition:"admonition",code:"code",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.p,{children:"Datadog Real User Monitoring (RUM) allows you to visualize and analyze the\nreal-time performance and user journeys of your application's individual users.\nThis is an option to profile and monitor the user experience of your Backstage\ninstallation."}),"\n",(0,o.jsxs)(n.p,{children:["There is a basic ",(0,o.jsx)(n.a,{href:"https://docs.datadoghq.com/real_user_monitoring/",children:"Datadog RUM"}),"\nintegration built into Backstage. You can enable it by adding the following to\nyour ",(0,o.jsx)(n.code,{children:"app-config.yaml"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:"app:\n  datadogRum:\n    clientToken: '123456789'\n    applicationId: qwerty\n  #   site: datadoghq.eu\n  #   env: 'staging'\n  #   sessionSampleRate: 100\n  #   sessionReplaySampleRate: 0\n"})}),"\n",(0,o.jsxs)(n.p,{children:["If your ",(0,o.jsx)(n.a,{href:"https://github.com/backstage/backstage/blob/e0506af8fc54074a160fb91c83d6cae8172d3bb3/app-config.yaml#L5",children:(0,o.jsx)(n.code,{children:"app-config.yaml"})})," file does not have this configuration, you may have to adjust your ",(0,o.jsx)(n.a,{href:"https://github.com/backstage/backstage/blob/e0506af8fc54074a160fb91c83d6cae8172d3bb3/packages/app/public/index.html#L69",children:(0,o.jsx)(n.code,{children:"packages/app/public/index.html"})})," to include the Datadog RUM ",(0,o.jsx)(n.code,{children:"init()"})," section manually."]}),"\n",(0,o.jsx)(n.p,{children:"Please note that the env value MUST be specified at build time"}),"\n",(0,o.jsxs)(n.admonition,{type:"note",children:[(0,o.jsxs)(n.p,{children:["In case after a proper configuration, the events still are not being captured: Copy and paste this section in to your ",(0,o.jsx)(n.code,{children:"packages/app/public/index.html"})," under the ",(0,o.jsx)(n.code,{children:"<head>"})," tag."]}),(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-html",children:"<% if (config.has('app.datadogRum')) { %>\n<script>\n  (function (h, o, u, n, d) {\n    h = h[d] = h[d] || {\n      q: [],\n      onReady: function (c) {\n        h.q.push(c);\n      },\n    };\n    d = o.createElement(u);\n    d.async = 1;\n    d.src = n;\n    n = o.getElementsByTagName(u)[0];\n    n.parentNode.insertBefore(d, n);\n  })(\n    window,\n    document,\n    'script',\n    'https://www.datadoghq-browser-agent.com/datadog-rum-v3.js',\n    'DD_RUM',\n  );\n  DD_RUM.onReady(function () {\n    DD_RUM.init({\n      clientToken: '<%= config.getString(\"app.datadogRum.clientToken\") %>',\n      applicationId: '<%= config.getString(\"app.datadogRum.applicationId\") %>',\n      site: '<%= config.getOptionalString(\"app.datadogRum.site\") || \"datadoghq.com\" %>',\n      service: 'backstage',\n      env: '<%= config.getString(\"app.datadogRum.env\") %>',\n      sampleRate:\n        '<%= config.getOptionalNumber(\"app.datadogRum.sessionSampleRate\") || 100 %>',\n      sessionReplaySampleRate:\n        '<%= config.getOptionalNumber(\"app.datadogRum.sessionReplaySampleRate\") || 0 %>',\n      trackInteractions: true,\n    });\n  });\n<\/script>\n<% } %>\n"})}),(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.code,{children:"clientToken"})," and ",(0,o.jsx)(n.code,{children:"applicationId"})," are generated from the Datadog RUM page\nfollowing\n",(0,o.jsx)(n.a,{href:"https://docs.datadoghq.com/real_user_monitoring/browser/",children:"these instructions"}),"."]}),(0,o.jsx)(n.p,{children:"There are two optional arguments:"}),(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"site"}),": The Datadog site of your organization; defaults to ",(0,o.jsx)(n.code,{children:"datadoghq.com"})]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"env"}),": The application environment for Datadog events (no default)"]}),"\n"]})]})]})}function p(e={}){let{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},28453(e,n,t){t.d(n,{R:()=>s,x:()=>d});var a=t(296540);let o={},i=a.createContext(o);function s(e){let n=a.useContext(i);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),a.createElement(i.Provider,{value:n},e.children)}},432645(e){e.exports=JSON.parse('{"id":"integrations/datadog-rum/installation","title":"Datadog RUM Installation","description":"Adding Datadog Real User Monitoring (RUM) to Your App","source":"@site/versioned_docs/version-stable/integrations/datadog-rum/installation.md","sourceDirName":"integrations/datadog-rum","slug":"/integrations/datadog-rum/installation","permalink":"/docs/integrations/datadog-rum/installation","draft":false,"unlisted":false,"editUrl":"https://github.com/backstage/backstage/edit/master/docs/integrations/datadog-rum/installation.md","tags":[],"version":"stable","frontMatter":{"id":"installation","title":"Datadog RUM Installation","sidebar_label":"Installation","description":"Adding Datadog Real User Monitoring (RUM) to Your App"},"sidebar":"docs","previous":{"title":"Datadog","permalink":"/docs/datadog/generated-index"},"next":{"title":"Gerrit","permalink":"/docs/gerrit/generated-index"}}')}}]);