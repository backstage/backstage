"use strict";(self.webpackChunkbackstage_microsite=self.webpackChunkbackstage_microsite||[]).push([["11336"],{583370(e,t,n){n.r(t),n.d(t,{assets:()=>r,contentTitle:()=>c,default:()=>p,frontMatter:()=>o,metadata:()=>a,toc:()=>l});var a=n(83251),s=n(474848),i=n(28453);let o={id:"root-instance-metadata",title:"Root Instance Metadata Service",sidebar_label:"Root Instance Metadata",description:"Documentation for the Root Instance Metadata service"},c,r={},l=[{value:"Using the service",id:"using-the-service",level:2},{value:"Dynamic plugin registration",id:"dynamic-plugin-registration",level:2}];function d(e){let t={admonition:"admonition",code:"code",h2:"h2",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.p,{children:"The root instance metadata service provides information about the running Backstage backend instance. Currently, it provides a list of all installed backend plugins."}),"\n",(0,s.jsx)(t.admonition,{title:"Note",type:"note",children:(0,s.jsx)(t.p,{children:"The root instance metadata service only provides information about the specific Backstage instance you're running on. In more complex deployments with multiple Backstage instances, this service will not provide a complete list of all plugins across all instances."})}),"\n",(0,s.jsx)(t.h2,{id:"using-the-service",children:"Using the service"}),"\n",(0,s.jsxs)(t.p,{children:["The following example shows how to use the root instance metadata service in your ",(0,s.jsx)(t.code,{children:"example"})," backend plugin to access the list of installed backend plugins."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:"import {\n  coreServices,\n  createBackendPlugin,\n} from '@backstage/backend-plugin-api';\n\ncreateBackendPlugin({\n  pluginId: 'example',\n  register(env) {\n    env.registerInit({\n      deps: {\n        instanceMetadata: coreServices.rootInstanceMetadata,\n      },\n      async init({ instanceMetadata }) {\n        const plugins = instanceMetadata.getInstalledPlugins();\n        console.log('Installed plugins:', plugins);\n      },\n    });\n  },\n});\n"})}),"\n",(0,s.jsx)(t.h2,{id:"dynamic-plugin-registration",children:"Dynamic plugin registration"}),"\n",(0,s.jsxs)(t.p,{children:["The root instance metadata service picks up plugins that are registered at start time through a ",(0,s.jsx)(t.code,{children:"backend.start()"})," call. You need to restart the running backend instance to pick up newly installed plugins."]})]})}function p(e={}){let{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},28453(e,t,n){n.d(t,{R:()=>o,x:()=>c});var a=n(296540);let s={},i=a.createContext(s);function o(e){let t=a.useContext(i);return a.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),a.createElement(i.Provider,{value:t},e.children)}},83251(e){e.exports=JSON.parse('{"id":"backend-system/core-services/root-instance-metadata","title":"Root Instance Metadata Service","description":"Documentation for the Root Instance Metadata service","source":"@site/versioned_docs/version-stable/backend-system/core-services/root-instance-metadata.md","sourceDirName":"backend-system/core-services","slug":"/backend-system/core-services/root-instance-metadata","permalink":"/docs/backend-system/core-services/root-instance-metadata","draft":false,"unlisted":false,"editUrl":"https://github.com/backstage/backstage/edit/master/docs/backend-system/core-services/root-instance-metadata.md","tags":[],"version":"stable","frontMatter":{"id":"root-instance-metadata","title":"Root Instance Metadata Service","sidebar_label":"Root Instance Metadata","description":"Documentation for the Root Instance Metadata service"},"sidebar":"docs","previous":{"title":"Root Http Router","permalink":"/docs/backend-system/core-services/root-http-router"},"next":{"title":"Root Lifecycle","permalink":"/docs/backend-system/core-services/root-lifecycle"}}')}}]);