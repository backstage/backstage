/*! For license information please see 538cc5f0.b57866b7.js.LICENSE.txt */
"use strict";(self.webpackChunkbackstage_microsite=self.webpackChunkbackstage_microsite||[]).push([[844326],{521942:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>c});var t=i(474848),s=i(28453);const o={id:"discovery",title:"GitHub Discovery",sidebar_label:"Discovery",description:"Automatically discovering catalog entities from repositories in a GitHub organization or App"},a=void 0,r={id:"integrations/github/discovery",title:"GitHub Discovery",description:"Automatically discovering catalog entities from repositories in a GitHub organization or App",source:"@site/versioned_docs/version-stable/integrations/github/discovery.md",sourceDirName:"integrations/github",slug:"/integrations/github/discovery",permalink:"/docs/integrations/github/discovery",draft:!1,unlisted:!1,editUrl:"https://github.com/backstage/backstage/edit/master/docs/integrations/github/discovery.md",tags:[],version:"stable",frontMatter:{id:"discovery",title:"GitHub Discovery",sidebar_label:"Discovery",description:"Automatically discovering catalog entities from repositories in a GitHub organization or App"},sidebar:"docs",previous:{title:"Locations",permalink:"/docs/integrations/github/locations"},next:{title:"Org Data",permalink:"/docs/integrations/github/org"}},l={},c=[{value:"GitHub Provider",id:"github-provider",level:2},{value:"Installation",id:"installation",level:2},{value:"Events Support",id:"events-support",level:2},{value:"Prerequisites",id:"prerequisites",level:3},{value:"Configure Webhooks in GitHub",id:"configure-webhooks-in-github",level:4},{value:"Install and Configure GitHub Events Module",id:"install-and-configure-github-events-module",level:4},{value:"Events Setup using HTTP endpoint",id:"events-setup-using-http-endpoint",level:3},{value:"Events Setup using AWS SQS module",id:"events-setup-using-aws-sqs-module",level:3},{value:"Events Setup using Google Pub/Sub module",id:"events-setup-using-google-pubsub-module",level:3},{value:"Configuration",id:"configuration",level:2},{value:"GitHub API Rate Limits",id:"github-api-rate-limits",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.admonition,{type:"info",children:(0,t.jsxs)(n.p,{children:["This documentation is written for ",(0,t.jsx)(n.a,{href:"/docs/backend-system/",children:"the new backend system"})," which is the default since Backstage ",(0,t.jsx)(n.a,{href:"/docs/releases/v1.24.0",children:"version 1.24"}),". If you are still on the old backend system, you may want to read ",(0,t.jsx)(n.a,{href:"https://github.com/backstage/backstage/blob/v1.37.0/docs/integrations/github/discovery--old.md",children:"its own article"})," instead, and ",(0,t.jsx)(n.a,{href:"/docs/backend-system/building-backends/migrating",children:"consider migrating"}),"!"]})}),"\n",(0,t.jsx)(n.h2,{id:"github-provider",children:"GitHub Provider"}),"\n",(0,t.jsx)(n.p,{children:"The GitHub integration has a discovery provider for discovering catalog\nentities within a GitHub organization or App. The provider will crawl the GitHub\norganization or App and register entities matching the configured path. This can be\nuseful as an alternative to static locations or manually adding things to the\ncatalog. This is the preferred method for ingesting entities into the catalog."}),"\n",(0,t.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,t.jsxs)(n.p,{children:["You will have to add the GitHub Entity provider to your backend as it is not installed by default, therefore you have to add a\ndependency on ",(0,t.jsx)(n.code,{children:"@backstage/plugin-catalog-backend-module-github"})," to your backend\npackage."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",metastring:'title="From your Backstage root directory"',children:"yarn --cwd packages/backend add @backstage/plugin-catalog-backend-module-github\n"})}),"\n",(0,t.jsx)(n.p,{children:"And then update your backend by adding the following line:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",metastring:'title="packages/backend/src/index.ts"',children:"backend.add(import('@backstage/plugin-catalog-backend'));\n/* highlight-add-start */\nbackend.add(import('@backstage/plugin-catalog-backend-module-github'));\n"})}),"\n",(0,t.jsx)(n.h2,{id:"events-support",children:"Events Support"}),"\n",(0,t.jsxs)(n.p,{children:["The catalog module for GitHub comes with events support enabled. This will make it subscribe to its relevant topics (",(0,t.jsx)(n.code,{children:"github.push"}),", ",(0,t.jsx)(n.code,{children:"github.repository"}),") and expects these events to be published via the ",(0,t.jsx)(n.code,{children:"EventsService"}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,t.jsx)(n.p,{children:"There are two Prerequisites to use the builtin events support:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Creating a webhook in GitHub"}),"\n",(0,t.jsxs)(n.li,{children:["Installing and configuring ",(0,t.jsx)(n.code,{children:"@backstage/plugin-events-backend-module-github"})]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"configure-webhooks-in-github",children:"Configure Webhooks in GitHub"}),"\n",(0,t.jsxs)(n.p,{children:["You can check the official docs to ",(0,t.jsx)(n.a,{href:"https://docs.github.com/en/developers/webhooks-and-events/webhooks/creating-webhooks",children:"configure your webhook"})," and to ",(0,t.jsx)(n.a,{href:"https://docs.github.com/en/developers/webhooks-and-events/webhooks/securing-your-webhooks",children:"secure your request"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["The webhook(s) will need to be configured to react to ",(0,t.jsx)(n.code,{children:"push"})," and ",(0,t.jsx)(n.code,{children:"repository"})," events."]}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsxs)(n.p,{children:["To receive the ",(0,t.jsx)(n.code,{children:"repository.transferred"})," event, the new owner account must have the GitHub App installed, and the App must be subscribed to ",(0,t.jsx)(n.code,{children:"repository"})," events. This event is only sent to the account where the ownership is transferred."]})}),"\n",(0,t.jsxs)(n.p,{children:['When creating the webhook in GitHub the "Payload URL" will looks something along these lines: ',(0,t.jsx)(n.code,{children:"https://<your-intance-name>/api/events/http/github"}),' and the "Content Type" should be ',(0,t.jsx)(n.code,{children:"application/json"}),"."]}),"\n",(0,t.jsx)(n.p,{children:"The GitHub Webhooks UI will send a trial event to validate it can connect when you save your new Webhook. It is possible to retry this trial event if it fails and you want to send it again. Additionally there is a Recent Deliveries tab you can use to validate that the events are being fired should you need to do any later troubleshooting."}),"\n",(0,t.jsx)(n.h4,{id:"install-and-configure-github-events-module",children:"Install and Configure GitHub Events Module"}),"\n",(0,t.jsxs)(n.p,{children:["In order to use the built-in events support you'll need to install and configure ",(0,t.jsx)(n.code,{children:"@backstage/plugin-events-backend-module-github"}),". This module will route received events from the generic topic ",(0,t.jsx)(n.code,{children:"github"})," to more specific ones based on the event type (e.g., ",(0,t.jsx)(n.code,{children:"github.push"}),"). These more specific events are what the builtin events support is expecting."]}),"\n",(0,t.jsx)(n.p,{children:"First we need to add the package:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",metastring:'title="from your Backstage root directory"',children:"yarn --cwd packages/backend add @backstage/plugin-events-backend-module-github\n"})}),"\n",(0,t.jsx)(n.p,{children:"Then we need to add it to your backend:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",metastring:'title="in packages/backend/src/index.ts"',children:"backend.add(import('@backstage/plugin-events-backend'));\n/* highlight-add-start */\nbackend.add(import('@backstage/plugin-events-backend-module-github'));\n/* highlight-add-end */\n"})}),"\n",(0,t.jsx)(n.p,{children:"Finally you will want to configure it:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",metastring:'title="app-config.yaml',children:"events:\n  modules:\n    github:\n      webhookSecret: ${GITHUB_WEBHOOK_SECRET}\n"})}),"\n",(0,t.jsx)(n.p,{children:"Though this last step is technically optional, you'll want to include it to be sure the events being received are from GitHub and not from an external bad actor."}),"\n",(0,t.jsxs)(n.p,{children:["The value of ",(0,t.jsx)(n.code,{children:"${GITHUB_WEBHOOK_SECRET}"})," in this example would be the same that you used when creating the webhook on GitHub."]}),"\n",(0,t.jsx)(n.h3,{id:"events-setup-using-http-endpoint",children:"Events Setup using HTTP endpoint"}),"\n",(0,t.jsxs)(n.p,{children:["Using the HTTP endpoint for events just requires adding some additional configuration to your ",(0,t.jsx)(n.code,{children:"app-config.yaml"})," as it is a built in feature of the Events backend, here's what that would look like:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",metastring:'title="app-config.yaml',children:"events:\n  http:\n    topics:\n      - github\n"})}),"\n",(0,t.jsxs)(n.p,{children:["This will then expose an endpoint like this: ",(0,t.jsx)(n.a,{href:"http://localhost/api/events/http/github",children:"http://localhost/api/events/http/github"})]}),"\n",(0,t.jsx)(n.h3,{id:"events-setup-using-aws-sqs-module",children:"Events Setup using AWS SQS module"}),"\n",(0,t.jsx)(n.p,{children:"Alternatively to using the HTTP endpoint you can use the AWS SQS module, here's how."}),"\n",(0,t.jsx)(n.p,{children:"First we need to add the package:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",metastring:'title="from your Backstage root directory"',children:"yarn --cwd packages/backend add @backstage/plugins-events-backend-module-aws-sqs\n"})}),"\n",(0,t.jsx)(n.p,{children:"Then we need to add it to your backend:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",metastring:'title="in packages/backend/src/index.ts"',children:"backend.add(import('@backstage/plugin-events-backend'));\nbackend.add(import('@backstage/plugin-events-backend-module-github'));\n/* highlight-add-start */\nbackend.add(import('@backstage/plugins-events-backend-module-aws-sqs'));\n/* highlight-add-end */\n"})}),"\n",(0,t.jsx)(n.p,{children:"Finally you will want to configure it:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",metastring:'title="app-config.yaml',children:"events:\n  modules:\n    awsSqs:\n      awsSqsConsumingEventPublisher:\n        topics:\n          github:\n            queue:\n              url: 'https://sqs.us-east-2.amazonaws.com/123456789012/MyQueue'\n              region: us-east-2\n"})}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsxs)(n.a,{href:"https://github.com/backstage/backstage/blob/master/plugins/events-backend-module-aws-sqs/README.md#configuration",children:["AWS SQS module ",(0,t.jsx)(n.code,{children:"README"})]})," has more details on the configuration options, the example above includes on the required options."]}),"\n",(0,t.jsx)(n.h3,{id:"events-setup-using-google-pubsub-module",children:"Events Setup using Google Pub/Sub module"}),"\n",(0,t.jsx)(n.p,{children:"Alternatively to using the HTTP endpoint you can use the Google Pub/Sub module, here's how."}),"\n",(0,t.jsx)(n.p,{children:"First we need to add the package:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",metastring:'title="from your Backstage root directory"',children:"yarn --cwd packages/backend add @backstage/plugin-events-backend-module-google-pubsub\n"})}),"\n",(0,t.jsx)(n.p,{children:"Then we need to add it to your backend:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",metastring:'title="in packages/backend/src/index.ts"',children:"backend.add(import('@backstage/plugin-events-backend'));\nbackend.add(import('@backstage/plugin-events-backend-module-github'));\n/* highlight-add-start */\nbackend.add(import('@backstage/plugin-events-backend-module-google-pubsub'));\n/* highlight-add-end */\n"})}),"\n",(0,t.jsx)(n.p,{children:"Finally you will want to configure it:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",metastring:'title="app-config.yaml',children:"events:\n  modules:\n    googlePubSub:\n      googlePubSubConsumingEventPublisher:\n        subscriptions:\n          # A unique key for your subscription, to be used in logging and metrics\n          mySubscription:\n            # The fully qualified name of the subscription\n            subscriptionName: 'projects/my-google-project/subscriptions/github-enterprise-events'\n            # The event system topic to transfer to. This can also be just a plain string\n            targetTopic: 'github.{{ event.attributes.x-github-event }}'\n"})}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsxs)(n.a,{href:"https://github.com/backstage/backstage/blob/master/plugins/events-backend-module-google-pubsub/README.md#configuration",children:["Google Pub/Sub module ",(0,t.jsx)(n.code,{children:"README"})]})," has more details on the configuration options, the example above includes on the required options."]}),"\n",(0,t.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,t.jsxs)(n.p,{children:["To use the discovery provider, you'll need a GitHub integration\n",(0,t.jsx)(n.a,{href:"/docs/integrations/github/locations",children:"set up"})," with either a ",(0,t.jsx)(n.a,{href:"/docs/getting-started/config/authentication",children:"Personal Access Token"})," or ",(0,t.jsx)(n.a,{href:"/docs/integrations/github/github-apps",children:"GitHub Apps"}),". For Personal Access Tokens you should pay attention to the ",(0,t.jsx)(n.a,{href:"https://backstage.io/docs/integrations/github/locations/#token-scopes",children:"required scopes"}),", where you will need at least the ",(0,t.jsx)(n.code,{children:"repo"})," scope for reading components. For GitHub Apps you will need to grant it the ",(0,t.jsx)(n.a,{href:"https://backstage.io/docs/integrations/github/github-apps#app-permissions",children:"required permissions"})," instead, where you will need at least the ",(0,t.jsx)(n.code,{children:"Contents: Read-only"})," permissions for reading components."]}),"\n",(0,t.jsxs)(n.p,{children:["Then you can add a ",(0,t.jsx)(n.code,{children:"github"})," config to the catalog providers configuration:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"catalog:\n  providers:\n    github:\n      # the provider ID can be any camelCase string\n      providerId:\n        organization: 'backstage' # string\n        catalogPath: '/catalog-info.yaml' # string\n        filters:\n          branch: 'main' # string\n          repository: '.*' # Regex\n        schedule: # same options as in SchedulerServiceTaskScheduleDefinition\n          # supports cron, ISO duration, \"human duration\" as used in code\n          frequency: { minutes: 30 }\n          # supports ISO duration, \"human duration\" as used in code\n          timeout: { minutes: 3 }\n      customProviderId:\n        organization: 'new-org' # string\n        catalogPath: '/custom/path/catalog-info.yaml' # string\n        filters: # optional filters\n          branch: 'develop' # optional string\n          repository: '.*' # optional Regex\n      wildcardProviderId:\n        organization: 'new-org' # string\n        catalogPath: '/groups/**/*.yaml' # this will search all folders for files that end in .yaml\n        filters: # optional filters\n          branch: 'develop' # optional string\n          repository: '.*' # optional Regex\n      topicProviderId:\n        organization: 'backstage' # string\n        catalogPath: '/catalog-info.yaml' # string\n        filters:\n          branch: 'main' # string\n          repository: '.*' # Regex\n          topic: 'backstage-exclude' # optional string\n      topicFilterProviderId:\n        organization: 'backstage' # string\n        catalogPath: '/catalog-info.yaml' # string\n        filters:\n          branch: 'main' # string\n          repository: '.*' # Regex\n          topic:\n            include: ['backstage-include'] # optional array of strings\n            exclude: ['experiments'] # optional array of strings\n      validateLocationsExist:\n        organization: 'backstage' # string\n        catalogPath: '/catalog-info.yaml' # string\n        filters:\n          branch: 'main' # string\n          repository: '.*' # Regex\n        validateLocationsExist: true # optional boolean\n      visibilityProviderId:\n        organization: 'backstage' # string\n        catalogPath: '/catalog-info.yaml' # string\n        filters:\n          visibility:\n            - public\n            - internal\n      enterpriseProviderId:\n        host: ghe.example.net\n        organization: 'backstage' # string\n        catalogPath: '/catalog-info.yaml' # string\n"})}),"\n",(0,t.jsx)(n.p,{children:"This provider supports multiple organizations and apps via unique provider IDs."}),"\n",(0,t.jsx)(n.admonition,{title:"Note",type:"note",children:(0,t.jsxs)(n.p,{children:["It is possible but certainly not recommended to skip the provider ID level.\nIf you do so, ",(0,t.jsx)(n.code,{children:"default"})," will be used as provider ID."]})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"catalogPath"})})," ",(0,t.jsx)(n.em,{children:"(optional)"}),":\nDefault: ",(0,t.jsx)(n.code,{children:"/catalog-info.yaml"}),".\nPath where to look for ",(0,t.jsx)(n.code,{children:"catalog-info.yaml"})," files.\nYou can use wildcards - ",(0,t.jsx)(n.code,{children:"*"}),", ",(0,t.jsx)(n.code,{children:"**"})," or a glob pattern supported by ",(0,t.jsx)(n.a,{href:"https://github.com/isaacs/minimatch",children:(0,t.jsx)(n.code,{children:"minimatch"})})," - to search the path and/or the filename.\nWildcards cannot be used if the ",(0,t.jsx)(n.code,{children:"validateLocationsExist"})," option is set to ",(0,t.jsx)(n.code,{children:"true"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"filters"})})," ",(0,t.jsx)(n.em,{children:"(optional)"}),":\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"branch"})})," ",(0,t.jsx)(n.em,{children:"(optional)"}),":\nString used to filter results based on the branch name. Branch name cannot have any slash (",(0,t.jsx)(n.code,{children:"/"}),") characters.\nDefaults to the default Branch of the repository."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"repository"})})," ",(0,t.jsx)(n.em,{children:"(optional)"}),":\nRegular expression used to filter results based on the repository name."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"topic"})})," ",(0,t.jsx)(n.em,{children:"(optional)"}),":\nBoth of the filters below may be used at the same time but the exclusion filter has the highest priority.\nIn the example above, a repository with the ",(0,t.jsx)(n.code,{children:"backstage-include"})," topic would still be excluded\nif it were also carrying the ",(0,t.jsx)(n.code,{children:"experiments"})," topic.\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"include"})})," ",(0,t.jsx)(n.em,{children:"(optional)"}),":\nAn array of strings used to filter in results based on their associated GitHub topics.\nIf configured, only repositories with one (or more) topic(s) present in the inclusion filter will be ingested"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"exclude"})})," ",(0,t.jsx)(n.em,{children:"(optional)"}),":\nAn array of strings used to filter out results based on their associated GitHub topics.\nIf configured, all repositories ",(0,t.jsx)(n.em,{children:"except"})," those with one (or more) topics(s) present in the exclusion filter will be ingested."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"visibility"})})," ",(0,t.jsx)(n.em,{children:"(optional)"}),":\nAn array of strings used to filter results based on their visibility. Available options are ",(0,t.jsx)(n.code,{children:"private"}),", ",(0,t.jsx)(n.code,{children:"internal"}),", ",(0,t.jsx)(n.code,{children:"public"}),". If configured (non empty), only repositories with visibility present in the filter will be ingested"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"allowArchived"})})," ",(0,t.jsx)(n.em,{children:"(optional)"}),":\nWhether to include archived repositories. Defaults to ",(0,t.jsx)(n.code,{children:"false"}),"."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"host"})})," ",(0,t.jsx)(n.em,{children:"(optional)"}),":\nThe hostname of your GitHub Enterprise instance. It must match a host defined in ",(0,t.jsx)(n.a,{href:"/docs/integrations/github/locations",children:"integrations.github"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"organization"})})," ",(0,t.jsxs)(n.em,{children:["(required, unless ",(0,t.jsx)(n.code,{children:"app"})," is set)"]}),":\nName of your organization account/workspace.\nIf you want to add multiple organizations, you need to add one provider config each or specify ",(0,t.jsx)(n.code,{children:"app"})," instead."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"app"})})," ",(0,t.jsxs)(n.em,{children:["(required, unless ",(0,t.jsx)(n.code,{children:"organization"})," is set)"]}),":\nID of your GitHub App."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"validateLocationsExist"})})," ",(0,t.jsx)(n.em,{children:"(optional)"}),":\nWhether to validate locations that exist before emitting them.\nThis option avoids generating locations for catalog info files that do not exist in the source repository.\nDefaults to ",(0,t.jsx)(n.code,{children:"false"}),".\nDue to limitations in the GitHub API's ability to query for repository objects, this option cannot be used in\nconjunction with wildcards in the ",(0,t.jsx)(n.code,{children:"catalogPath"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"schedule"})}),":\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"frequency"})}),":\nHow often you want the task to run. The system does its best to avoid overlapping invocations."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"timeout"})}),":\nThe maximum amount of time that a single task invocation can take."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"initialDelay"})})," ",(0,t.jsx)(n.em,{children:"(optional)"}),":\nThe amount of time that should pass before the first invocation happens."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"scope"})})," ",(0,t.jsx)(n.em,{children:"(optional)"}),":\n",(0,t.jsx)(n.code,{children:"'global'"})," or ",(0,t.jsx)(n.code,{children:"'local'"}),". Sets the scope of concurrency control."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"github-api-rate-limits",children:"GitHub API Rate Limits"}),"\n",(0,t.jsxs)(n.p,{children:["GitHub ",(0,t.jsx)(n.a,{href:"https://docs.github.com/en/rest/overview/resources-in-the-rest-api#rate-limiting",children:"rate limits"})," API requests to 5,000 per hour (or more for Enterprise\naccounts). The snippet below refreshes the Backstage catalog data every 35 minutes, which issues an API request for each discovered location."]}),"\n",(0,t.jsxs)(n.p,{children:["If your requests are too frequent then you may get throttled by\nrate limiting. You can change the refresh frequency of the catalog in your ",(0,t.jsx)(n.code,{children:"app-config.yaml"})," file by controlling the ",(0,t.jsx)(n.code,{children:"schedule"}),"."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"schedule:\n  frequency: { minutes: 35 }\n  timeout: { minutes: 3 }\n"})}),"\n",(0,t.jsxs)(n.p,{children:["More information about scheduling can be found on the ",(0,t.jsx)(n.a,{href:"https://backstage.io/docs/reference/backend-plugin-api.schedulerservicetaskscheduledefinition",children:"SchedulerServiceTaskScheduleDefinition"})," page."]}),"\n",(0,t.jsxs)(n.p,{children:["Alternatively, or additionally, you can configure ",(0,t.jsx)(n.a,{href:"/docs/integrations/github/github-apps",children:"github-apps"})," authentication\nwhich carries a much higher rate limit at GitHub."]}),"\n",(0,t.jsx)(n.p,{children:"This is true for any method of adding GitHub entities to the catalog, but\nespecially easy to hit with automatic discovery."})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},221020:(e,n,i)=>{var t=i(296540),s=Symbol.for("react.element"),o=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,r=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,n,i){var t,o={},c=null,d=null;for(t in void 0!==i&&(c=""+i),void 0!==n.key&&(c=""+n.key),void 0!==n.ref&&(d=n.ref),n)a.call(n,t)&&!l.hasOwnProperty(t)&&(o[t]=n[t]);if(e&&e.defaultProps)for(t in n=e.defaultProps)void 0===o[t]&&(o[t]=n[t]);return{$$typeof:s,type:e,key:c,ref:d,props:o,_owner:r.current}}n.Fragment=o,n.jsx=c,n.jsxs=c},474848:(e,n,i)=>{e.exports=i(221020)},28453:(e,n,i)=>{i.d(n,{R:()=>a,x:()=>r});var t=i(296540);const s={},o=t.createContext(s);function a(e){const n=t.useContext(o);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);