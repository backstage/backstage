/*! For license information please see eca948f1.08403704.js.LICENSE.txt */
"use strict";(self.webpackChunkbackstage_microsite=self.webpackChunkbackstage_microsite||[]).push([[285234],{686863:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>h,frontMatter:()=>o,metadata:()=>a,toc:()=>d});var s=t(474848),i=t(28453);const o={id:"v1.40.0",title:"v1.40.0",description:"Backstage Release v1.40.0"},r=void 0,a={id:"releases/v1.40.0",title:"v1.40.0",description:"Backstage Release v1.40.0",source:"@site/../docs/releases/v1.40.0.md",sourceDirName:"releases",slug:"/releases/v1.40.0",permalink:"/docs/next/releases/v1.40.0",draft:!1,unlisted:!1,editUrl:"https://github.com/backstage/backstage/edit/master/docs/releases/v1.40.0.md",tags:[],version:"current",frontMatter:{id:"v1.40.0",title:"v1.40.0",description:"Backstage Release v1.40.0"},sidebar:"releases",previous:{title:"v1.41.0",permalink:"/docs/next/releases/v1.41.0"},next:{title:"v1.39.0",permalink:"/docs/next/releases/v1.39.0"}},c={},d=[{value:"Highlights",id:"highlights",level:2},{value:"Scaffolder 2.0 Breaking Changes",id:"scaffolder-20-breaking-changes",level:3},{value:"Actions Registry",id:"actions-registry",level:3},{value:"TechDocs deep linking",id:"techdocs-deep-linking",level:3},{value:"Catalog modules Breaking Changes",id:"catalog-modules-breaking-changes",level:3},{value:"New Module drop: <code>@backstage/plugin-events-backend-module-kafka</code>",id:"new-module-drop-backstageplugin-events-backend-module-kafka",level:3},{value:"New lint rule added",id:"new-lint-rule-added",level:3},{value:"CLI: movement toward <code>rspack</code>",id:"cli-movement-toward-rspack",level:3},{value:"Backend rate limiting",id:"backend-rate-limiting",level:3},{value:"New Frontend System plugin info",id:"new-frontend-system-plugin-info",level:3},{value:"Notifications retention",id:"notifications-retention",level:3},{value:"Lots of i18n work",id:"lots-of-i18n-work",level:3},{value:"Canon steams ahead",id:"canon-steams-ahead",level:3},{value:"Security Fixes",id:"security-fixes",level:2},{value:"Upgrade path",id:"upgrade-path",level:2},{value:"Links and References",id:"links-and-references",level:2}];function l(e){const n={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.p,{children:["These are the release notes for the v1.40.0 release of ",(0,s.jsx)(n.a,{href:"https://backstage.io/",children:"Backstage"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"A huge thanks to the whole team of maintainers and contributors as well as the amazing Backstage Community for the hard work in getting this release developed and done."}),"\n",(0,s.jsx)(n.h2,{id:"highlights",children:"Highlights"}),"\n",(0,s.jsx)(n.h3,{id:"scaffolder-20-breaking-changes",children:"Scaffolder 2.0 Breaking Changes"}),"\n",(0,s.jsxs)(n.p,{children:["The deprecated legacy action formats have been removed and replaced with the new native ",(0,s.jsx)(n.code,{children:"zod"})," formats."]}),"\n",(0,s.jsxs)(n.p,{children:["This also cleaned up some deprecated ",(0,s.jsx)(n.code,{children:"logStream"})," and ",(0,s.jsx)(n.code,{children:"WinstonLogger"})," usages in the old patterns."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"// really old legacy json schema\ncreateTemplateAction<{ repoUrl: string }, { repoOutput: string }>({\n  id: 'test',\n  schema: {\n    input: {\n      type: 'object'\n      required: ['repoUrl']\n      properties: {\n        repoUrl: {\n          type: 'string',\n          description: 'repository url description'\n        }\n      }\n    }\n  }\n});\n\n// old zod method\ncreateTemplateAction({\n  id: 'test'\n  schema: {\n    input: {\n      repoUrl: z.string({ description: 'repository url description' })\n    }\n  }\n})\n\n// new method:\ncreateTemplateAction({\n  id: 'test',\n  schema: {\n    input: {\n      repoUrl: z => z.string({ description: 'repository url description' })\n    }\n  }\n})\n\n"})}),"\n",(0,s.jsxs)(n.admonition,{type:"note",children:[(0,s.jsxs)(n.p,{children:["As the new ",(0,s.jsx)(n.code,{children:"zod"})," format is more strict if there are any additional properties in your Software Template YAML where you define your action it will trigger an ",(0,s.jsx)(n.code,{children:"InputError"}),". Here is an exact example for reference:"]}),(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:'"InputError: Invalid input passed to action publish:github, instance is not allowed to have the additional property "allowedHosts"'}),"\n"]}),(0,s.jsx)(n.p,{children:"To fix these you will simply need to remove the extra property details in your Software Template YAML where you define your action."})]}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"scaffolder-backend"})," plugin has been converted to being New Backend System only, which means a lot of the public API has been cleaned up."]}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"createRouter"})," and ",(0,s.jsx)(n.code,{children:"createBuiltinActions"})," have been removed as they were only used in the legacy backend system."]}),"\n",(0,s.jsxs)(n.p,{children:["A lot of deprecated types which were re-exported in the ",(0,s.jsx)(n.code,{children:"-backend"})," package from ",(0,s.jsx)(n.code,{children:"-common"})," and ",(0,s.jsx)(n.code,{children:"-node"})," have been removed, and can be fixed by importing them from the correct package."]}),"\n",(0,s.jsxs)(n.p,{children:["The deprecated ",(0,s.jsx)(n.code,{children:"copyWithoutRender"})," option has been removed from ",(0,s.jsx)(n.code,{children:"fetch:template"})," and should be renamed to ",(0,s.jsx)(n.code,{children:"copyWithoutTemplating"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["The re-exported action creators from the provider packages such as ",(0,s.jsx)(n.code,{children:"createPublishAzureAction"})," and ",(0,s.jsx)(n.code,{children:"createPublishGithubAction"})," should now be imported from the provider modules themselves."]}),"\n",(0,s.jsxs)(n.p,{children:["As always you can head over the latest changelogs for ",(0,s.jsx)(n.a,{href:"https://github.com/backstage/backstage/blob/master/plugins/scaffolder-backend/CHANGELOG.md",children:(0,s.jsx)(n.code,{children:"@backstage/plugin-scaffolder-backend"})})," and ",(0,s.jsx)(n.a,{href:"https://github.com/backstage/backstage/blob/master/plugins/scaffolder-node/CHANGELOG.md",children:(0,s.jsx)(n.code,{children:"@backstage/plugin-scaffolder-node"})}),"\nfor more detailed information."]}),"\n",(0,s.jsxs)(n.p,{children:["There\u2019s also a number of new deprecation for types which are currently exported from ",(0,s.jsx)(n.code,{children:"plugin-scaffolder-node"}),". We\u2019re going to be looking at re-working the Scaffolder architecture in the future, so we\u2019re going to be removing these types in a future version to iterate on the new API surfaces. Stay tuned for more updates!"]}),"\n",(0,s.jsx)(n.h3,{id:"actions-registry",children:"Actions Registry"}),"\n",(0,s.jsxs)(n.p,{children:["We\u2019ve added two new ",(0,s.jsx)(n.code,{children:"alpha"})," services which can be used to define distributed Actions across Backstage. Plugins can use the ",(0,s.jsx)(n.code,{children:"ActionsRegistry"})," to define actions that are automatically installed with their associated plugin."]}),"\n",(0,s.jsxs)(n.p,{children:["On top of this Actions Registry is a new ",(0,s.jsx)(n.code,{children:"mcp-actions"})," backend plugin, which will surface these actions as tools as an MCP server. This can be used to expose plugin Actions with your favourite AI tools, such as Cursor, Claude or ChatGPT."]}),"\n",(0,s.jsxs)(n.p,{children:["You can find out more information about the ",(0,s.jsx)(n.code,{children:"ActionsRegistry"})," and MCP integration in ",(0,s.jsx)(n.a,{href:"https://github.com/backstage/backstage/issues/30218",children:"this RFC"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"We\u2019re actively working on this area, therefore it\u2019s currently highly experimental and could be subject to breaking changes in future releases. However we\u2019d really appreciate some feedback if you want to try and create some Actions for your plugins and surface them in an MCP server!"}),"\n",(0,s.jsx)(n.p,{children:"In the next release we\u2019ll be looking to integrate these Actions with the Scaffolder allowing you to call these actions from a template."}),"\n",(0,s.jsx)(n.h3,{id:"techdocs-deep-linking",children:"TechDocs deep linking"}),"\n",(0,s.jsxs)(n.p,{children:["Introduced ",(0,s.jsx)(n.code,{children:"backstage.io/techdocs-entity-path"})," annotation which allows deep linking into other TechDocs in conjunction with ",(0,s.jsx)(n.code,{children:"backstage.io/techdocs-entity"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["Contributed by ",(0,s.jsx)(n.a,{href:"https://github.com/csuich2",children:"@csuich2"})," in ",(0,s.jsx)(n.a,{href:"https://github.com/backstage/backstage/pull/29760",children:"#29760"})]}),"\n",(0,s.jsx)(n.h3,{id:"catalog-modules-breaking-changes",children:"Catalog modules Breaking Changes"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"BitbucketCloudEntityProvider"})," now accepts a ",(0,s.jsx)(n.code,{children:"CatalogService"})," instead of ",(0,s.jsx)(n.code,{children:"CatalogApi"})]}),"\n",(0,s.jsxs)(n.li,{children:["User and Group discovery for GitLab will default to ingesting all users in sub groups that belong to the specified root group in config. Disable by setting ",(0,s.jsx)(n.code,{children:"restrictUsersToGroup: true"})," in app-config under your module settings."]}),"\n"]}),"\n",(0,s.jsxs)(n.h3,{id:"new-module-drop-backstageplugin-events-backend-module-kafka",children:["New Module drop: ",(0,s.jsx)(n.code,{children:"@backstage/plugin-events-backend-module-kafka"})]}),"\n",(0,s.jsxs)(n.p,{children:["The module introduces the ",(0,s.jsx)(n.code,{children:"KafkaConsumerClient"})," which creates a Kafka client used to establish consumer connections. It also provides the ",(0,s.jsx)(n.code,{children:"KafkaConsumingEventPublisher"}),", a consumer that subscribes to configured Kafka topics and publishes received messages to the Backstage events service where Backstage plugins can access them."]}),"\n",(0,s.jsxs)(n.p,{children:["Contributed by ",(0,s.jsx)(n.a,{href:"https://github.com/Jonas-Beck",children:"@Jonas-Beck"})," in ",(0,s.jsx)(n.a,{href:"https://github.com/backstage/backstage/pull/29315",children:"#29315"})]}),"\n",(0,s.jsx)(n.h3,{id:"new-lint-rule-added",children:"New lint rule added"}),"\n",(0,s.jsxs)(n.p,{children:["A new lint rule ",(0,s.jsx)(n.code,{children:"@backstage/no-mixed-plugin-imports"})," was added to the defaults. This enforces rules that were always true but until now were implicit: that you should not import across frontend and backend package boundaries, isomorphic packages should not import non-isomorphic, etc."]}),"\n",(0,s.jsx)(n.p,{children:"This rule is initially only set at a warning level, to give you some time to react. You may see warnings appear in your build output that were not there before - do pay attention to them, because they may expose some issues that you had not yet noticed."}),"\n",(0,s.jsx)(n.p,{children:"We intend to make this rule be at an error level in a future release."}),"\n",(0,s.jsxs)(n.p,{children:["The rule has an option ",(0,s.jsx)(n.code,{children:"excludedTargetPackages"})," that lets you opt out of enforcement in specific packages. You can put something like this in your root ",(0,s.jsx)(n.code,{children:".eslintrc.js"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"module.exports = {\n  root: true,\n  plugins: ['@spotify', 'react', 'testing-library', '@backstage'],\n  rules: {\n    '@backstage/no-mixed-plugin-imports': [\n      'error', // if you want to opt in to strict checks early\n      {\n        excludedTargetPackages: [\n          '@internal/plugin-foo',\n          // ...\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Contributed by ",(0,s.jsx)(n.a,{href:"https://github.com/drodil",children:"@drodil"})," in ",(0,s.jsx)(n.a,{href:"https://github.com/backstage/backstage/pull/30227",children:"#30227"})]}),"\n",(0,s.jsxs)(n.h3,{id:"cli-movement-toward-rspack",children:["CLI: movement toward ",(0,s.jsx)(n.code,{children:"rspack"})]}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"BACKSTAGE_CLI_EXPERIMENTAL_BUILD_CACHE"})," flag has been removed entirely. If you were using this flag, we encourage you to switch to ",(0,s.jsx)(n.code,{children:"EXPERIMENTAL_RSPACK"})," instead. In the near future, we hope to make ",(0,s.jsx)(n.code,{children:"rspack"})," the default out of the box."]}),"\n",(0,s.jsxs)(n.p,{children:["While making these changes, the experimental ",(0,s.jsx)(n.code,{children:"FORCE_REACT_DEVELOPMENT"})," flag was removed as well."]}),"\n",(0,s.jsx)(n.h3,{id:"backend-rate-limiting",children:"Backend rate limiting"}),"\n",(0,s.jsx)(n.p,{children:"The backend system now has builtin support for rate limiting of incoming requests, both for your entire backends and on a per-plugin basis. It can use different backing stores for its state, and in-memory and redis is currently implemented out of the box."}),"\n",(0,s.jsxs)(n.p,{children:["You can read more about this opt-in feature in ",(0,s.jsx)(n.a,{href:"https://backstage.io/docs/backend-system/core-services/http-router",children:"the documentation"})," for the HTTP router service."]}),"\n",(0,s.jsxs)(n.p,{children:["Contributed by ",(0,s.jsx)(n.a,{href:"https://github.com/drodil",children:"@drodil"})," in ",(0,s.jsx)(n.a,{href:"https://github.com/backstage/backstage/pull/28708",children:"#28708"})]}),"\n",(0,s.jsx)(n.h3,{id:"new-frontend-system-plugin-info",children:"New Frontend System plugin info"}),"\n",(0,s.jsx)(n.p,{children:"Plugins in the new frontend system can now expose rich, extensible metadata about themselves. This data is accessible at runtime inside your app. This is for example useful for adding contact and support information, and much more - and you can even overlay your own data on top of what is provided by open-source plugins."}),"\n",(0,s.jsxs)(n.p,{children:["You can read more about this in the ",(0,s.jsx)(n.a,{href:"https://backstage.io/docs/frontend-system/architecture/app",children:"frontend app"})," and ",(0,s.jsx)(n.a,{href:"https://backstage.io/docs/frontend-system/architecture/plugins",children:"plugin"})," architecture documentation."]}),"\n",(0,s.jsx)(n.h3,{id:"notifications-retention",children:"Notifications retention"}),"\n",(0,s.jsxs)(n.p,{children:["Notifications that are stored by the notifications backend plugin now have a default retention of one year before being deleted. This helps keep the storage size in check over time. You can override this using the ",(0,s.jsx)(n.code,{children:"notifications.retention"})," duration setting in your app-config."]}),"\n",(0,s.jsxs)(n.p,{children:["Contributed by ",(0,s.jsx)(n.a,{href:"https://github.com/drodil",children:"@drodil"})," in ",(0,s.jsx)(n.a,{href:"https://github.com/backstage/backstage/pull/30206",children:"#30206"})]}),"\n",(0,s.jsx)(n.h3,{id:"lots-of-i18n-work",children:"Lots of i18n work"}),"\n",(0,s.jsx)(n.p,{children:"A bunch of work was done to enable i18n (translations) in several plugins! This affected at least the following:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"core components"}),"\n",(0,s.jsx)(n.li,{children:"the org plugin"}),"\n",(0,s.jsx)(n.li,{children:"the catalog import plugin"}),"\n",(0,s.jsx)(n.li,{children:"the home plugin"}),"\n",(0,s.jsx)(n.li,{children:"the search plugin"}),"\n",(0,s.jsx)(n.li,{children:"the user settings plugin"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["Contributed by ",(0,s.jsx)(n.a,{href:"https://github.com/mario-mui",children:"@mario-mui"})]}),"\n",(0,s.jsx)(n.h3,{id:"canon-steams-ahead",children:"Canon steams ahead"}),"\n",(0,s.jsx)(n.p,{children:"While it\u2019s still early days, we still want to call out that the canon design system work steams ahead with various controls added and improvements made. Hang tight!"}),"\n",(0,s.jsx)(n.h2,{id:"security-fixes",children:"Security Fixes"}),"\n",(0,s.jsx)(n.p,{children:"This release does not contain any security fixes."}),"\n",(0,s.jsx)(n.h2,{id:"upgrade-path",children:"Upgrade path"}),"\n",(0,s.jsxs)(n.p,{children:["We recommend that you keep your Backstage project up to date with this latest release. For more guidance on how to upgrade, check out the documentation for ",(0,s.jsx)(n.a,{href:"https://backstage.io/docs/getting-started/keeping-backstage-updated",children:"keeping Backstage updated"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"links-and-references",children:"Links and References"}),"\n",(0,s.jsx)(n.p,{children:"Below you can find a list of links and references to help you learn about and start using this new release."}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://backstage.io/",children:"Backstage official website"}),", ",(0,s.jsx)(n.a,{href:"https://backstage.io/docs/",children:"documentation"}),", and ",(0,s.jsx)(n.a,{href:"https://backstage.io/docs/getting-started/",children:"getting started guide"})]}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://github.com/backstage/backstage",children:"GitHub repository"})}),"\n",(0,s.jsxs)(n.li,{children:["Backstage's ",(0,s.jsx)(n.a,{href:"https://backstage.io/docs/overview/versioning-policy",children:"versioning and support policy"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://discord.gg/backstage-687207715902193673",children:"Community Discord"})," for discussions and support"]}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://github.com/backstage/backstage/tree/master/docs/releases/v1.40.0-changelog.md",children:"Changelog"})}),"\n",(0,s.jsxs)(n.li,{children:["Backstage ",(0,s.jsx)(n.a,{href:"https://backstage.io/demos",children:"Demos"}),", ",(0,s.jsx)(n.a,{href:"https://backstage.io/blog",children:"Blog"}),", ",(0,s.jsx)(n.a,{href:"https://backstage.io/docs/overview/roadmap",children:"Roadmap"})," and ",(0,s.jsx)(n.a,{href:"https://backstage.io/plugins",children:"Plugins"})]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["Sign up for our ",(0,s.jsx)(n.a,{href:"https://info.backstage.spotify.com/newsletter_subscribe",children:"newsletter"})," if you want to be informed about what is happening in the world of Backstage."]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},221020:(e,n,t)=>{var s=t(296540),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,a=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function d(e,n,t){var s,o={},d=null,l=null;for(s in void 0!==t&&(d=""+t),void 0!==n.key&&(d=""+n.key),void 0!==n.ref&&(l=n.ref),n)r.call(n,s)&&!c.hasOwnProperty(s)&&(o[s]=n[s]);if(e&&e.defaultProps)for(s in n=e.defaultProps)void 0===o[s]&&(o[s]=n[s]);return{$$typeof:i,type:e,key:d,ref:l,props:o,_owner:a.current}}n.Fragment=o,n.jsx=d,n.jsxs=d},474848:(e,n,t)=>{e.exports=t(221020)},28453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>a});var s=t(296540);const i={},o=s.createContext(i);function r(e){const n=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);