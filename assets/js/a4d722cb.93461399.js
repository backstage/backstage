"use strict";(self.webpackChunkbackstage_microsite=self.webpackChunkbackstage_microsite||[]).push([["95325"],{839400(e,t,n){n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>c});var s=n(776406),i=n(474848),a=n(28453);let o={id:"v1.39.0",title:"v1.39.0",description:"Backstage Release v1.39.0"},r,l={},c=[{value:"Highlights",id:"highlights",level:2},{value:"<strong>BREAKING</strong>: Removals of Old Backend System support",id:"breaking-removals-of-old-backend-system-support",level:3},{value:"<strong>BREAKING</strong>: <code>CodeOwnersProcessor</code> removed from built-in processors",id:"breaking-codeownersprocessor-removed-from-built-in-processors",level:3},{value:"Deprecating React 17",id:"deprecating-react-17",level:3},{value:"Scheduler Service REST API",id:"scheduler-service-rest-api",level:3},{value:"Canon 0.4.0",id:"canon-040",level:3},{value:"Omitting ownership claims in issued identity tokens",id:"omitting-ownership-claims-in-issued-identity-tokens",level:3},{value:"JSX elements in I18n interpolation",id:"jsx-elements-in-i18n-interpolation",level:3},{value:"Built-in sign-in fallback for users not in the catalog",id:"built-in-sign-in-fallback-for-users-not-in-the-catalog",level:3},{value:"Improved compatibility for Yarn plugin",id:"improved-compatibility-for-yarn-plugin",level:3},{value:"Federated Credentials for Azure DevOps integration",id:"federated-credentials-for-azure-devops-integration",level:3},{value:"Valkey support for cache service",id:"valkey-support-for-cache-service",level:3},{value:"Custom AuthConnector implementations",id:"custom-authconnector-implementations",level:3},{value:"Security Fixes",id:"security-fixes",level:2},{value:"Upgrade path",id:"upgrade-path",level:2},{value:"Links and References",id:"links-and-references",level:2}];function d(e){let t={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(t.p,{children:["These are the release notes for the v1.39.0 release of ",(0,i.jsx)(t.a,{href:"https://backstage.io/",children:"Backstage"}),"."]}),"\n",(0,i.jsx)(t.p,{children:"A huge thanks to the whole team of maintainers and contributors as well as the amazing Backstage Community for the hard work in getting this release developed and done."}),"\n",(0,i.jsx)(t.h2,{id:"highlights",children:"Highlights"}),"\n",(0,i.jsxs)(t.h3,{id:"breaking-removals-of-old-backend-system-support",children:[(0,i.jsx)(t.strong,{children:"BREAKING"}),": Removals of Old Backend System support"]}),"\n",(0,i.jsx)(t.p,{children:"We are gradually removing support for the old backend system from plugins and modules. In this release, the following backend features no longer support the old backend system:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.code,{children:"auth-backend"})}),"\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.code,{children:"catalog-backend"})}),"\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.code,{children:"permission-backend"})}),"\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.code,{children:"catalog-backend-module-incremental-ingestion"})}),"\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.code,{children:"catalog-backend-module-unprocessed"})}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:"If you have already migrated to the new backend system, you will not be required to do any code changes, except perhaps removing the /alpha suffix on your imports if you had that."}),"\n",(0,i.jsx)(t.p,{children:"If you have not yet migrated, now would be a great time to do so."}),"\n",(0,i.jsxs)(t.p,{children:["Note that for the ",(0,i.jsx)(t.code,{children:"@backstage/plugin-catalog-backend"}),", this necessitated a major semantic version bump. The others are on version 0.x still and received a minor level bump. If you are using the Backstage yarn plugin, you will get on the new versions automatically. If you do not, you may want to bump your dependency ranges (to e.g. ^2.0.0 for the major bumps) for these to ensure that you keep getting the most recent updates."]}),"\n",(0,i.jsxs)(t.p,{children:["Along with the major bump, most of the previously already deprecated exports were finally removed as well from these packages. There are a bit too many to list here, but as an example, some of the old deprecated exports from the Catalog backend have been available from their new home in ",(0,i.jsx)(t.code,{children:"@backstage/plugin-catalog-node"})," instead."]}),"\n",(0,i.jsxs)(t.p,{children:["An upshot of these changes is that we have nearly entirely eliminated the usage of the old ",(0,i.jsx)(t.code,{children:"@backstage/backend-common"})," package. We hope to get rid of the very final remnants of it as soon as possible."]}),"\n",(0,i.jsxs)(t.h3,{id:"breaking-codeownersprocessor-removed-from-built-in-processors",children:[(0,i.jsx)(t.strong,{children:"BREAKING"}),": ",(0,i.jsx)(t.code,{children:"CodeOwnersProcessor"})," removed from built-in processors"]}),"\n",(0,i.jsxs)(t.p,{children:["As part of the major bump of the catalog backend the ",(0,i.jsx)(t.code,{children:"CodeOwnersProcessor"})," has been removed from the set of default processors, because it's quite expensive to run and has vague semantics. You need to update your backend to add it to the ",(0,i.jsx)(t.code,{children:"catalogProcessingExtensionPoint"})," if you wish to continue using it."]}),"\n",(0,i.jsx)(t.h3,{id:"deprecating-react-17",children:"Deprecating React 17"}),"\n",(0,i.jsxs)(t.p,{children:["React 17 is now deprecated and the Backstage CLI will warn if you are using it. Please follow the ",(0,i.jsx)(t.a,{href:"https://backstage.io/docs/tutorials/react18-migration/",children:"migration guide"})," to upgrade to React 18."]}),"\n",(0,i.jsx)(t.h3,{id:"scheduler-service-rest-api",children:"Scheduler Service REST API"}),"\n",(0,i.jsxs)(t.p,{children:["The core scheduler service now comes with its own REST API that you can use to list and trigger tasks. For more information, see the ",(0,i.jsx)(t.a,{href:"https://backstage.io/docs/backend-system/core-services/scheduler",children:"scheduler service documentation"}),"."]}),"\n",(0,i.jsx)(t.h3,{id:"canon-040",children:"Canon 0.4.0"}),"\n",(0,i.jsxs)(t.p,{children:["Our new design system Canon has reached 0.4.0 in this release. You can read more about the changes in the ",(0,i.jsx)(t.a,{href:"https://canon.backstage.io/releases",children:"canon changelog"}),"."]}),"\n",(0,i.jsx)(t.h3,{id:"omitting-ownership-claims-in-issued-identity-tokens",children:"Omitting ownership claims in issued identity tokens"}),"\n",(0,i.jsxs)(t.p,{children:["The ",(0,i.jsx)(t.code,{children:"auth"})," plugin backend now supports omitting the ownership claims in issued Backstage identity tokens. By setting the ",(0,i.jsx)(t.code,{children:"auth.omitIdentityTokenOwnershipClaim"})," configuration flag the issued tokens will no longer contain the ",(0,i.jsx)(t.code,{children:"ent"})," claim that represents the ownership references of the user."]}),"\n",(0,i.jsxs)(t.p,{children:["The benefit of this new flag is that issued user tokens will be much smaller in size, but they will no longer be self-contained. This means that any consumers of the token that require access to the ownership claims now need to call the ",(0,i.jsx)(t.code,{children:"/api/auth/v1/userinfo"})," endpoint instead. Within the Backstage ecosystem this is done automatically, as clients will still receive the full set of claims during authentication, while plugin backends will need to use the ",(0,i.jsx)(t.code,{children:"UserInfoService"})," which already calls the user info endpoint if necessary."]}),"\n",(0,i.jsx)(t.p,{children:"When enabling this flag, it is important that any custom sign-in resolvers directly return the result of the sign-in method. For example, the following would not work:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-ts",children:"const { token } = await ctx.issueToken({\n  claims: { sub: entityRef, ent: [entityRef] },\n});\nreturn { token }; // WARNING: This will not work with the flag enabled\n"})}),"\n",(0,i.jsx)(t.p,{children:"Instead, the sign-in resolver should return the entire result:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-ts",children:"return ctx.issueToken({\n  claims: { sub: entityRef, ent: [entityRef] },\n});\n"})}),"\n",(0,i.jsx)(t.h3,{id:"jsx-elements-in-i18n-interpolation",children:"JSX elements in I18n interpolation"}),"\n",(0,i.jsx)(t.p,{children:"The internationalization APIs now transparently supports interpolation of JSX elements. If any of the provided replacements are a JSX element, the translation function will also return a JSX element where the parts are joined together in a fragment. This makes it much easier to include things like links in a message while keeping the translations flexible."}),"\n",(0,i.jsx)(t.h3,{id:"built-in-sign-in-fallback-for-users-not-in-the-catalog",children:"Built-in sign-in fallback for users not in the catalog"}),"\n",(0,i.jsxs)(t.p,{children:["It is sometimes useful to allow users to ",(0,i.jsx)(t.a,{href:"https://backstage.io/docs/auth/identity-resolver#sign-in-without-users-in-the-catalog",children:"sign-in without existing in the catalog"}),", even though care must be taken when allowing this. There is now a new ",(0,i.jsx)(t.code,{children:"dangerousEntityRefFallback"})," option for the ",(0,i.jsx)(t.code,{children:"signInWithCatalogUser"})," method that lets you supply a fallback user identity in case the catalog lookup returns an empty response, which makes it even easier to implement this pattern."]}),"\n",(0,i.jsxs)(t.p,{children:["In addition, many of the available auth provider modules now support a new ",(0,i.jsx)(t.code,{children:"dangerouslyAllowSignInWithoutUserInCatalog"})," configuration option that enables this using a provider-specific fallback."]}),"\n",(0,i.jsxs)(t.p,{children:["Contributed by ",(0,i.jsx)(t.a,{href:"https://github.com/JessicaJHee",children:"@JessicaJHee"})," in ",(0,i.jsx)(t.a,{href:"https://github.com/backstage/backstage/pull/28967",children:"#28967"})]}),"\n",(0,i.jsx)(t.h3,{id:"improved-compatibility-for-yarn-plugin",children:"Improved compatibility for Yarn plugin"}),"\n",(0,i.jsxs)(t.p,{children:["The yarn plugin will now add both ",(0,i.jsx)(t.code,{children:"npm:"})," and ",(0,i.jsx)(t.code,{children:"backstage:"})," ranges to lockfile entries, in order to ensure better compatibility with tools that parse the lockfile and ensure dependencies stay locked when building dist workspaces."]}),"\n",(0,i.jsx)(t.h3,{id:"federated-credentials-for-azure-devops-integration",children:"Federated Credentials for Azure DevOps integration"}),"\n",(0,i.jsx)(t.p,{children:"If you have configured your Azure DevOps organization to use Entra ID for authentication, you can now use federated credentials using a managed identity. This allows you to authenticate for an app registration without using a client secret. This is mostly useful when you have to authenticate against an Azure DevOps organization in a different Entra ID tenant, and effectively eliminates the need to manage and expose secrets for other tenants."}),"\n",(0,i.jsxs)(t.p,{children:["Contributed by ",(0,i.jsx)(t.a,{href:"https://github.com/sanderaernouts",children:"@sanderaernouts"})," in ",(0,i.jsx)(t.a,{href:"https://github.com/backstage/backstage/pull/28437",children:"#28437"})]}),"\n",(0,i.jsx)(t.h3,{id:"valkey-support-for-cache-service",children:"Valkey support for cache service"}),"\n",(0,i.jsxs)(t.p,{children:["The cache service implementation provided by ",(0,i.jsx)(t.code,{children:"@backstage/backend-defaults"})," now also supports Valkey as one of the configurable clients."]}),"\n",(0,i.jsxs)(t.p,{children:["Contributed by ",(0,i.jsx)(t.a,{href:"https://github.com/j1bulbul",children:"@j1bulbul"})," in ",(0,i.jsx)(t.a,{href:"https://github.com/backstage/backstage/pull/29762",children:"#29762"})]}),"\n",(0,i.jsx)(t.h3,{id:"custom-authconnector-implementations",children:"Custom AuthConnector implementations"}),"\n",(0,i.jsxs)(t.p,{children:["The frontend ",(0,i.jsx)(t.code,{children:"OAuth2"})," class now lets you provide a custom ",(0,i.jsx)(t.code,{children:"AuthConnector"})," implementation, which can be useful if you need to integrate with auth providers that take a bit more liberty in their OAuth implementation."]}),"\n",(0,i.jsxs)(t.p,{children:["Contributed by ",(0,i.jsx)(t.a,{href:"https://github.com/gusega",children:"@gusega"})," in ",(0,i.jsx)(t.a,{href:"https://github.com/backstage/backstage/pull/28004",children:"#28004"})]}),"\n",(0,i.jsx)(t.h2,{id:"security-fixes",children:"Security Fixes"}),"\n",(0,i.jsx)(t.p,{children:"This release does not contain any security fixes."}),"\n",(0,i.jsx)(t.h2,{id:"upgrade-path",children:"Upgrade path"}),"\n",(0,i.jsxs)(t.p,{children:["We recommend that you keep your Backstage project up to date with this latest release. For more guidance on how to upgrade, check out the documentation for ",(0,i.jsx)(t.a,{href:"https://backstage.io/docs/getting-started/keeping-backstage-updated",children:"keeping Backstage updated"}),"."]}),"\n",(0,i.jsx)(t.h2,{id:"links-and-references",children:"Links and References"}),"\n",(0,i.jsx)(t.p,{children:"Below you can find a list of links and references to help you learn about and start using this new release."}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.a,{href:"https://backstage.io/",children:"Backstage official website"}),", ",(0,i.jsx)(t.a,{href:"https://backstage.io/docs/",children:"documentation"}),", and ",(0,i.jsx)(t.a,{href:"https://backstage.io/docs/getting-started/",children:"getting started guide"})]}),"\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.a,{href:"https://github.com/backstage/backstage",children:"GitHub repository"})}),"\n",(0,i.jsxs)(t.li,{children:["Backstage's ",(0,i.jsx)(t.a,{href:"https://backstage.io/docs/overview/versioning-policy",children:"versioning and support policy"})]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.a,{href:"https://discord.gg/backstage-687207715902193673",children:"Community Discord"})," for discussions and support"]}),"\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.a,{href:"https://github.com/backstage/backstage/tree/master/docs/releases/v1.39.0-changelog.md",children:"Changelog"})}),"\n",(0,i.jsxs)(t.li,{children:["Backstage ",(0,i.jsx)(t.a,{href:"https://backstage.io/demos",children:"Demos"}),", ",(0,i.jsx)(t.a,{href:"https://backstage.io/blog",children:"Blog"}),", ",(0,i.jsx)(t.a,{href:"https://backstage.io/docs/overview/roadmap",children:"Roadmap"})," and ",(0,i.jsx)(t.a,{href:"https://backstage.io/plugins",children:"Plugins"})]}),"\n"]}),"\n",(0,i.jsxs)(t.p,{children:["Sign up for our ",(0,i.jsx)(t.a,{href:"https://spoti.fi/backstagenewsletter",children:"newsletter"})," if you want to be informed about what is happening in the world of Backstage."]})]})}function h(e={}){let{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},28453(e,t,n){n.d(t,{R:()=>o,x:()=>r});var s=n(296540);let i={},a=s.createContext(i);function o(e){let t=s.useContext(a);return s.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),s.createElement(a.Provider,{value:t},e.children)}},776406(e){e.exports=JSON.parse('{"id":"releases/v1.39.0","title":"v1.39.0","description":"Backstage Release v1.39.0","source":"@site/versioned_docs/version-stable/releases/v1.39.0.md","sourceDirName":"releases","slug":"/releases/v1.39.0","permalink":"/docs/releases/v1.39.0","draft":false,"unlisted":false,"editUrl":"https://github.com/backstage/backstage/edit/master/docs/releases/v1.39.0.md","tags":[],"version":"stable","frontMatter":{"id":"v1.39.0","title":"v1.39.0","description":"Backstage Release v1.39.0"},"sidebar":"releases","previous":{"title":"v1.40.0","permalink":"/docs/releases/v1.40.0"},"next":{"title":"v1.38.0","permalink":"/docs/releases/v1.38.0"}}')}}]);