"use strict";(self.webpackChunkbackstage_microsite=self.webpackChunkbackstage_microsite||[]).push([["85799"],{971751(e,t,n){n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>g,frontMatter:()=>r,metadata:()=>i,toc:()=>c});var i=n(615319),a=n(474848),o=n(28453);let r={id:"integrating-plugin-into-software-catalog",title:"Integrate into the Software Catalog",description:"How to integrate a plugin into software catalog"},s,l={},c=[{value:"Steps",id:"steps",level:2},{value:"Create a plugin",id:"create-a-plugin",level:3},{value:"Reading entities from within your plugin",id:"reading-entities-from-within-your-plugin",level:3},{value:"Import your plugin and embed in the entities page",id:"import-your-plugin-and-embed-in-the-entities-page",level:3}];function d(e){let t={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(t.blockquote,{children:["\n",(0,a.jsx)(t.p,{children:"This is an advanced use case and currently is an experimental feature. Expect\nAPI to change over time"}),"\n"]}),"\n",(0,a.jsx)(t.h2,{id:"steps",children:"Steps"}),"\n",(0,a.jsxs)(t.ol,{children:["\n",(0,a.jsx)(t.li,{children:(0,a.jsx)(t.a,{href:"#create-a-plugin",children:"Create a plugin"})}),"\n",(0,a.jsx)(t.li,{children:(0,a.jsx)(t.a,{href:"#reading-entities-from-within-your-plugin",children:"Reading entities from within your plugin"})}),"\n",(0,a.jsx)(t.li,{children:(0,a.jsx)(t.a,{href:"#import-your-plugin-and-embed-in-the-entities-page",children:"Import your plugin and embed in the entities page"})}),"\n"]}),"\n",(0,a.jsx)(t.h3,{id:"create-a-plugin",children:"Create a plugin"}),"\n",(0,a.jsxs)(t.p,{children:["Follow the ",(0,a.jsx)(t.a,{href:"/docs/next/plugins/create-a-plugin",children:"same process"})," as for standalone plugin. You\nshould have a separate package in a folder, which represents your plugin."]}),"\n",(0,a.jsx)(t.p,{children:"Example:"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{children:"$ yarn new\n# Select `frontend-plugin`\n> ? Enter an ID for the plugin [required] my-plugin\n> ? Enter the owner(s) of the plugin. If specified, this will be added to CODEOWNERS for the plugin path. [optional]\n\nCreating the plugin...\n"})}),"\n",(0,a.jsx)(t.h3,{id:"reading-entities-from-within-your-plugin",children:"Reading entities from within your plugin"}),"\n",(0,a.jsxs)(t.p,{children:["You can access the currently selected entity using the backstage api\n",(0,a.jsx)(t.a,{href:"https://backstage.io/api/stable/functions/_backstage_plugin-catalog-react.index.useEntity.html",children:(0,a.jsx)(t.code,{children:"useEntity"})}),". For example,"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-tsx",children:"import { useEntity } from '@backstage/plugin-catalog-react';\n\nexport const MyPluginEntityContent = () => {\n  const entity = useEntity();\n\n  // Do something with the entity data...\n};\n"})}),"\n",(0,a.jsxs)(t.p,{children:["Internally ",(0,a.jsx)(t.code,{children:"useEntity"})," makes use of\n",(0,a.jsxs)(t.a,{href:"https://18.react.dev/learn/passing-data-deeply-with-context",children:["react ",(0,a.jsx)(t.code,{children:"Contexts"})]}),". The entity context is\nprovided by the entity page into which your plugin will be embedded."]}),"\n",(0,a.jsx)(t.h3,{id:"import-your-plugin-and-embed-in-the-entities-page",children:"Import your plugin and embed in the entities page"}),"\n",(0,a.jsxs)(t.p,{children:["To begin, you will need to import your plugin in the entities page. Located at\n",(0,a.jsx)(t.code,{children:"packages/app/src/components/Catalog/EntityPage.tsx"})," from the root package of\nyour backstage app."]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-tsx",children:"import { MyPluginEntityContent } from '@backstage/plugin-my-plugin';\n"})}),"\n",(0,a.jsxs)(t.p,{children:["To add your component to the Entity view, you will need to modify the\n",(0,a.jsx)(t.code,{children:"packages/app/src/components/Catalog/EntityPage.tsx"}),". Depending on the needs of\nyour plugin, you may only care about certain kinds of\n",(0,a.jsx)(t.a,{href:"https://backstage.io/docs/features/software-catalog/descriptor-format",children:"entities"}),",\neach of which has its own\nelement for rendering. This\nfunctionality is handled by the ",(0,a.jsx)(t.code,{children:"EntitySwitch"})," component:"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-tsx",children:"export const entityPage = (\n  <EntitySwitch>\n    <EntitySwitch.Case if={isKind('component')} children={componentPage} />\n    <EntitySwitch.Case if={isKind('api')} children={apiPage} />\n    <EntitySwitch.Case if={isKind('group')} children={groupPage} />\n    <EntitySwitch.Case if={isKind('user')} children={userPage} />\n    <EntitySwitch.Case if={isKind('system')} children={systemPage} />\n    <EntitySwitch.Case if={isKind('domain')} children={domainPage} />\n\n    <EntitySwitch.Case>{defaultEntityPage}</EntitySwitch.Case>\n  </EntitySwitch>\n);\n"})}),"\n",(0,a.jsxs)(t.p,{children:["At this point, you will need to modify the specific page where you want your\ncomponent to appear. If you are extending the Software Catalog model you will\nneed to add a new case to the ",(0,a.jsx)(t.code,{children:"EntitySwitch"}),". For adding a plugin to an existing\ncomponent type, you modify the existing page. For example, if you want to add\nyour plugin to the ",(0,a.jsx)(t.code,{children:"systemPage"}),", you can add a new tab by adding an\n",(0,a.jsx)(t.code,{children:"EntityLayout.Route"})," such as below:"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-tsx",children:'const systemPage = (\n  <EntityLayout>\n    <EntityLayout.Route path="/" title="Overview">\n      <Grid container spacing={3} alignItems="stretch">\n        <Grid item md={6}>\n          <EntityAboutCard variant="gridItem" />\n        </Grid>\n        <Grid item md={6}>\n          <EntityHasComponentsCard variant="gridItem" />\n        </Grid>\n        <Grid item md={6}>\n          <EntityHasApisCard variant="gridItem" />\n        </Grid>\n        <Grid item md={6}>\n          <EntityHasResourcesCard variant="gridItem" />\n        </Grid>\n      </Grid>\n    </EntityLayout.Route>\n    <EntityLayout.Route path="/diagram" title="Diagram">\n      <EntityCatalogGraphCard variant="gridItem" height={400} />\n    </EntityLayout.Route>\n\n    {/* Adding a new tab to the system view */}\n    <EntityLayout.Route path="/your-custom-route" title="CustomTitle">\n      <MyPluginEntityContent />\n    </EntityLayout.Route>\n  </EntityLayout>\n);\n'})})]})}function g(e={}){let{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},28453(e,t,n){n.d(t,{R:()=>r,x:()=>s});var i=n(296540);let a={},o=i.createContext(a);function r(e){let t=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),i.createElement(o.Provider,{value:t},e.children)}},615319(e){e.exports=JSON.parse('{"id":"plugins/integrating-plugin-into-software-catalog","title":"Integrate into the Software Catalog","description":"How to integrate a plugin into software catalog","source":"@site/../docs/plugins/integrating-plugin-into-software-catalog.md","sourceDirName":"plugins","slug":"/plugins/integrating-plugin-into-software-catalog","permalink":"/docs/next/plugins/integrating-plugin-into-software-catalog","draft":false,"unlisted":false,"editUrl":"https://github.com/backstage/backstage/edit/master/docs/plugins/integrating-plugin-into-software-catalog.md","tags":[],"version":"current","frontMatter":{"id":"integrating-plugin-into-software-catalog","title":"Integrate into the Software Catalog","description":"How to integrate a plugin into software catalog"},"sidebar":"docs","previous":{"title":"Structure of a Plugin","permalink":"/docs/next/plugins/structure-of-a-plugin"},"next":{"title":"Integrating Search into a plugin","permalink":"/docs/next/plugins/integrating-search-into-plugins"}}')}}]);