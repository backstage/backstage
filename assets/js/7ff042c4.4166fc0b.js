"use strict";(self.webpackChunkbackstage_microsite=self.webpackChunkbackstage_microsite||[]).push([["74090"],{464736(e,t,n){n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>p,frontMatter:()=>r,metadata:()=>i,toc:()=>c});var i=n(100877),o=n(474848),s=n(28453);let r={id:"configuring",title:"Configuring Utility APIs",sidebar_label:"Configuring",description:"Configuring, extending, and overriding utility APIs"},a,l={},c=[{value:"Configuring",id:"configuring",level:2},{value:"Attaching extensions to inputs",id:"attaching-extensions-to-inputs",level:2},{value:"Replacing a Utility API implementation",id:"replacing-a-utility-api-implementation",level:2}];function d(e){let t={a:"a",code:"code",h2:"h2",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.p,{children:"Utility APIs are extensions and can therefore optionally be amended with configurability, as well as inputs that other extensions attach themselves to. This section describes how to make use of that as a consumer of such utility APIs."}),"\n",(0,o.jsx)(t.h2,{id:"configuring",children:"Configuring"}),"\n",(0,o.jsxs)(t.p,{children:["To configure your Utility API extension, first you'll need to know its ID. That ID is formed from the API ref ID; check ",(0,o.jsx)(t.a,{href:"/docs/frontend-system/architecture/naming-patterns",children:"the naming patterns docs"})," for details."]}),"\n",(0,o.jsxs)(t.p,{children:["Our example work API from ",(0,o.jsx)(t.a,{href:"/docs/frontend-system/utility-apis/creating",children:"the creating section"})," would have the ID ",(0,o.jsx)(t.code,{children:"api:plugin.example.work"}),". You configure it and all other extensions under the ",(0,o.jsx)(t.code,{children:"app.extensions"})," section of your app-config."]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-yaml",metastring:'title="in e.g. app-config.yaml or app-config.production.yaml"',children:"app:\n  extensions:\n    - api:plugin.example.work:\n        config:\n          goSlow: false\n    -  # ... other extensions\n"})}),"\n",(0,o.jsxs)(t.p,{children:["It's important to note that the ",(0,o.jsx)(t.code,{children:"extensions"})," are a list (mind the initial ",(0,o.jsx)(t.code,{children:"-"}),"), and that the ",(0,o.jsx)(t.code,{children:"api:plugin.example.work"})," entry is an object such that the ",(0,o.jsx)(t.code,{children:"config"})," key needs to be indented below it. If you do not get those two pieces right, the application may not start up correctly."]}),"\n",(0,o.jsxs)(t.p,{children:["The extension config schema will tell you what parameters it supports. Here we override the ",(0,o.jsx)(t.code,{children:"goSlow"})," extension config value, which replaces the default."]}),"\n",(0,o.jsx)(t.h2,{id:"attaching-extensions-to-inputs",children:"Attaching extensions to inputs"}),"\n",(0,o.jsxs)(t.p,{children:["Like with other extension types, you add input attachments to a Utility API by declaring the ",(0,o.jsx)(t.code,{children:"attachTo"})," section of that attachment to point to the Utility APIs ID and input name."]}),"\n",(0,o.jsxs)(t.p,{children:["Well written input-enabled extension often have extension creator functions that help you make such attachments. Those functions typically set the ",(0,o.jsx)(t.code,{children:"attachTo"})," section correctly on your behalf so that you don't have to figure them out."]}),"\n",(0,o.jsx)(t.h2,{id:"replacing-a-utility-api-implementation",children:"Replacing a Utility API implementation"}),"\n",(0,o.jsxs)(t.p,{children:["Like with other extension types, you replace Utility APIs with your own custom implementation using ",(0,o.jsx)(t.a,{href:"/docs/frontend-system/architecture/extension-overrides",children:"extension overrides"}),"."]}),"\n",(0,o.jsx)(t.p,{children:"Note that it is only possible to override a Utility API using a module for the plugin that originally provided the API. Attempting to override an API using a different plugin or module for a different plugin will result in a conflict error."}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-tsx",metastring:'title="in your app"',children:"/* highlight-add-start */\nimport { createFrontendModule } from '@backstage/frontend-plugin-api';\n\nclass CustomWorkImpl implements WorkApi {\n  /* ... */\n}\n\nconst workModule = createFrontendModule({\n  pluginId: 'work',\n  extensions: [\n    ApiBlueprint.make({\n      params: {\n        factory: createApiFactory({\n          api: workApiRef,\n          factory: () => new CustomWorkImpl(),\n        }),\n      },\n    }),\n  ],\n});\n/* highlight-add-end */\n\n// Remember to pass the overrides to your createApp\nexport default createApp({\n  features: [\n    // ... other features\n    /* highlight-add-next-line */\n    workModule,\n  ],\n});\n"})}),"\n",(0,o.jsxs)(t.p,{children:["In this example the overriding extension is kept minimal, but just like any other extension it can also have ",(0,o.jsx)(t.code,{children:"deps"}),", configurability, and inputs. Check out ",(0,o.jsx)(t.a,{href:"/docs/frontend-system/utility-apis/creating",children:"the Creating section"})," for more details about that."]}),"\n",(0,o.jsx)(t.p,{children:"When you create a replacement extension, in general you may want to mimic its extension config schema or input shapes where applicable. This makes it an easier thing to slot in to an app, since it'll be responding to extensibility the same way as the original one did."})]})}function p(e={}){let{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},28453(e,t,n){n.d(t,{R:()=>r,x:()=>a});var i=n(296540);let o={},s=i.createContext(o);function r(e){let t=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),i.createElement(s.Provider,{value:t},e.children)}},100877(e){e.exports=JSON.parse('{"id":"frontend-system/utility-apis/configuring","title":"Configuring Utility APIs","description":"Configuring, extending, and overriding utility APIs","source":"@site/versioned_docs/version-stable/frontend-system/utility-apis/04-configuring.md","sourceDirName":"frontend-system/utility-apis","slug":"/frontend-system/utility-apis/configuring","permalink":"/docs/frontend-system/utility-apis/configuring","draft":false,"unlisted":false,"editUrl":"https://github.com/backstage/backstage/edit/master/docs/frontend-system/utility-apis/04-configuring.md","tags":[],"version":"stable","sidebarPosition":4,"frontMatter":{"id":"configuring","title":"Configuring Utility APIs","sidebar_label":"Configuring","description":"Configuring, extending, and overriding utility APIs"},"sidebar":"docs","previous":{"title":"Consuming APIs","permalink":"/docs/frontend-system/utility-apis/consuming"},"next":{"title":"Backstage CLI","permalink":"/docs/backstage-cli/generated-index"}}')}}]);