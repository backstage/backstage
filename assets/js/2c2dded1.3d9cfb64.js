/*! For license information please see 2c2dded1.3d9cfb64.js.LICENSE.txt */
"use strict";(self.webpackChunkbackstage_microsite=self.webpackChunkbackstage_microsite||[]).push([[21544],{172870:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>i,contentTitle:()=>d,default:()=>l,frontMatter:()=>o,metadata:()=>c,toc:()=>a});var n=s(474848),r=s(28453);const o={id:"plugin-techdocs-addons-test-utils.techdocsaddontester.renderwitheffects",title:"TechDocsAddonTester.renderWithEffects()",description:"API reference for TechDocsAddonTester.renderWithEffects()"},d=void 0,c={id:"reference/plugin-techdocs-addons-test-utils.techdocsaddontester.renderwitheffects",title:"TechDocsAddonTester.renderWithEffects()",description:"API reference for TechDocsAddonTester.renderWithEffects()",source:"@site/versioned_docs/version-stable/reference/plugin-techdocs-addons-test-utils.techdocsaddontester.renderwitheffects.md",sourceDirName:"reference",slug:"/reference/plugin-techdocs-addons-test-utils.techdocsaddontester.renderwitheffects",permalink:"/docs/reference/plugin-techdocs-addons-test-utils.techdocsaddontester.renderwitheffects",draft:!1,unlisted:!1,editUrl:"https://github.com/backstage/backstage/edit/master/docs/reference/plugin-techdocs-addons-test-utils.techdocsaddontester.renderwitheffects.md",tags:[],version:"stable",frontMatter:{id:"plugin-techdocs-addons-test-utils.techdocsaddontester.renderwitheffects",title:"TechDocsAddonTester.renderWithEffects()",description:"API reference for TechDocsAddonTester.renderWithEffects()"}},i={},a=[{value:"Remarks",id:"remarks",level:2}];function h(e){const t={a:"a",code:"code",h2:"h2",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.a,{href:"/docs/reference/",children:"Home"})," > ",(0,n.jsx)(t.a,{href:"/docs/reference/plugin-techdocs-addons-test-utils",children:(0,n.jsx)(t.code,{children:"@backstage/plugin-techdocs-addons-test-utils"})})," > ",(0,n.jsx)(t.a,{href:"/docs/reference/plugin-techdocs-addons-test-utils.techdocsaddontester",children:(0,n.jsx)(t.code,{children:"TechDocsAddonTester"})})," > ",(0,n.jsx)(t.a,{href:"/docs/reference/plugin-techdocs-addons-test-utils.techdocsaddontester.renderwitheffects",children:(0,n.jsx)(t.code,{children:"renderWithEffects"})})]}),"\n",(0,n.jsx)(t.p,{children:"Render the Addon within a fully configured and mocked TechDocs reader."}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.strong,{children:"Signature:"})}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-typescript",children:"renderWithEffects(): Promise<{\n        shadowRoot: ShadowRoot | null;\n    }>;\n"})}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.strong,{children:"Returns:"})}),"\n",(0,n.jsx)(t.p,{children:"Promise<{ shadowRoot: ShadowRoot | null; }>"}),"\n",(0,n.jsx)(t.h2,{id:"remarks",children:"Remarks"}),"\n",(0,n.jsxs)(t.p,{children:["Note that to make assertions on the shadow dom, add a dependency on [the ",(0,n.jsx)(t.code,{children:"shadow-dom-testing-library"})," package](",(0,n.jsx)(t.a,{href:"https://github.com/konnorrogers/shadow-dom-testing-library/",children:"https://github.com/konnorrogers/shadow-dom-testing-library/"}),") and use its screen as follows:"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-ts",children:"import { screen } from 'shadow-dom-testing-library';\n\n// ... render the addon ...\nawait TechDocsAddonTester.buildAddonsInTechDocs([<AnAddon />])\n  .withDom(<body>TEST_CONTENT</body>)\n  .renderWithEffects();\n\nexpect(screen.getByShadowText('TEST_CONTENT')).toBeInTheDocument();\n"})}),"\n",(0,n.jsxs)(t.p,{children:["For items outside of the shadow dom, you can still use the regular screen from ",(0,n.jsx)(t.code,{children:"@testing-library/react"}),"."]}),"\n",(0,n.jsx)(t.p,{children:"Components using useEffect to perform an asynchronous action (such as fetch) must be rendered within an async act call to properly get the final state, even with mocked responses. This utility method makes the signature a bit cleaner, since act doesn't return the result of the evaluated function."})]})}function l(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(h,{...e})}):h(e)}},221020:(e,t,s)=>{var n=s(296540),r=Symbol.for("react.element"),o=Symbol.for("react.fragment"),d=Object.prototype.hasOwnProperty,c=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function a(e,t,s){var n,o={},a=null,h=null;for(n in void 0!==s&&(a=""+s),void 0!==t.key&&(a=""+t.key),void 0!==t.ref&&(h=t.ref),t)d.call(t,n)&&!i.hasOwnProperty(n)&&(o[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===o[n]&&(o[n]=t[n]);return{$$typeof:r,type:e,key:a,ref:h,props:o,_owner:c.current}}t.Fragment=o,t.jsx=a,t.jsxs=a},474848:(e,t,s)=>{e.exports=s(221020)},28453:(e,t,s)=>{s.d(t,{R:()=>d,x:()=>c});var n=s(296540);const r={},o=n.createContext(r);function d(e){const t=n.useContext(o);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:d(e.components),n.createElement(o.Provider,{value:t},e.children)}}}]);