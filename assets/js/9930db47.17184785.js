"use strict";(self.webpackChunkbackstage_microsite=self.webpackChunkbackstage_microsite||[]).push([["76274"],{825358(e,n,s){s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>i,metadata:()=>c,toc:()=>a});var c=s(298865),o=s(474848),t=s(28453);let i={id:"configuration",title:"TechDocs Configuration Options",description:"Reference documentation for configuring TechDocs using app-config.yaml"},r,l={},a=[{value:"Generator Configuration",id:"generator-configuration",level:2},{value:"Run In",id:"run-in",level:3},{value:"Docker Image",id:"docker-image",level:3},{value:"Pull Image",id:"pull-image",level:3},{value:"MkDocs Configuration",id:"mkdocs-configuration",level:3},{value:"Omit TechDocs Core Plugin",id:"omit-techdocs-core-plugin",level:4},{value:"Legacy Copy README to Index",id:"legacy-copy-readme-to-index",level:4},{value:"Default Plugins",id:"default-plugins",level:4},{value:"Builder Configuration",id:"builder-configuration",level:2},{value:"Publisher Configuration",id:"publisher-configuration",level:2},{value:"Publisher Type",id:"publisher-type",level:3},{value:"Local Storage",id:"local-storage",level:3},{value:"Publish Directory",id:"publish-directory",level:4},{value:"Google Cloud Storage",id:"google-cloud-storage",level:3},{value:"Bucket Name",id:"bucket-name",level:4},{value:"Bucket Root Path",id:"bucket-root-path",level:4},{value:"Credentials",id:"credentials",level:4},{value:"AWS S3",id:"aws-s3",level:3},{value:"Bucket Name",id:"bucket-name-1",level:4},{value:"Bucket Root Path",id:"bucket-root-path-1",level:4},{value:"Account ID",id:"account-id",level:4},{value:"Credentials",id:"credentials-1",level:4},{value:"Region",id:"region",level:4},{value:"Endpoint",id:"endpoint",level:4},{value:"HTTPS Proxy",id:"https-proxy",level:4},{value:"S3 Force Path Style",id:"s3-force-path-style",level:4},{value:"Server Side Encryption",id:"server-side-encryption",level:4},{value:"Azure Blob Storage",id:"azure-blob-storage",level:3},{value:"Container Name",id:"container-name",level:4},{value:"Connection String",id:"connection-string",level:4},{value:"Credentials",id:"credentials-2",level:4},{value:"Legacy Case Sensitive Triplet Paths",id:"legacy-case-sensitive-triplet-paths",level:2},{value:"Cache Configuration",id:"cache-configuration",level:2},{value:"TTL",id:"ttl",level:3},{value:"Read Timeout",id:"read-timeout",level:3}];function d(e){let n={a:"a",br:"br",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(n.p,{children:["Using the ",(0,o.jsx)(n.code,{children:"app-config.yaml"})," in the Backstage app, you can configure TechDocs using several options. This page serves as a reference to all the available configuration options for TechDocs."]}),"\n",(0,o.jsx)(n.h2,{id:"generator-configuration",children:"Generator Configuration"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"techdocs.generator"})," is used to configure how documentation sites are generated using MkDocs."]}),"\n",(0,o.jsx)(n.h3,{id:"run-in",children:"Run In"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.code,{children:"techdocs.generator.runIn"})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Options:"})," ",(0,o.jsx)(n.code,{children:"'docker'"})," or ",(0,o.jsx)(n.code,{children:"'local'"})]}),"\n",(0,o.jsx)(n.p,{children:"This determines how to run the generator - whether to spin up the techdocs-container docker image or to run mkdocs locally (assuming all the dependencies are taken care of)."}),"\n",(0,o.jsxs)(n.p,{children:["You want to change this to ",(0,o.jsx)(n.code,{children:"'local'"})," if you are running Backstage using your own custom Docker setup and want to avoid running into Docker in Docker situation. ",(0,o.jsx)(n.a,{href:"https://backstage.io/docs/features/techdocs/getting-started/#disabling-docker-in-docker-situation-optional",children:"Read more here"}),"."]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Example:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:"techdocs:\n  generator:\n    runIn: 'docker'\n"})}),"\n",(0,o.jsx)(n.h3,{id:"docker-image",children:"Docker Image"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.code,{children:"techdocs.generator.dockerImage"})}),"\n",(0,o.jsx)(n.p,{children:"(Optional) This can be used to control the docker image used during documentation generation. This can be useful if you want to use MkDocs plugins or other packages that are not included in the default techdocs-container (spotify/techdocs)."}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Note:"})," This setting is only used when ",(0,o.jsx)(n.code,{children:"techdocs.generator.runIn"})," is set to ",(0,o.jsx)(n.code,{children:"'docker'"}),"."]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Example:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:"techdocs:\n  generator:\n    runIn: 'docker'\n    dockerImage: 'spotify/techdocs'\n"})}),"\n",(0,o.jsx)(n.h3,{id:"pull-image",children:"Pull Image"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.code,{children:"techdocs.generator.pullImage"})}),"\n",(0,o.jsxs)(n.p,{children:["(Optional) This can be used to disable pulling the latest docker image by default. This can be useful when you are using a custom ",(0,o.jsx)(n.code,{children:"techdocs.generator.dockerImage"})," and you have a custom docker login requirement. For example, you need to login to AWS ECR to pull the docker image."]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Note:"})," Disabling this requires the docker image was pulled by other means before running the techdocs generator."]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Example:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:"techdocs:\n  generator:\n    runIn: 'docker'\n    dockerImage: 'custom-registry/techdocs'\n    pullImage: false\n"})}),"\n",(0,o.jsx)(n.h3,{id:"mkdocs-configuration",children:"MkDocs Configuration"}),"\n",(0,o.jsx)(n.h4,{id:"omit-techdocs-core-plugin",children:"Omit TechDocs Core Plugin"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.code,{children:"techdocs.generator.mkdocs.omitTechdocsCorePlugin"})}),"\n",(0,o.jsxs)(n.p,{children:["(Optional) This can be used to disable automatic addition of techdocs-core plugin to the mkdocs.yaml files. Defaults to ",(0,o.jsx)(n.code,{children:"false"}),", which means that the techdocs-core plugin is always added to the mkdocs file."]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Example:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:"techdocs:\n  generator:\n    mkdocs:\n      omitTechdocsCorePlugin: false\n"})}),"\n",(0,o.jsx)(n.h4,{id:"legacy-copy-readme-to-index",children:"Legacy Copy README to Index"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.code,{children:"techdocs.generator.mkdocs.legacyCopyReadmeMdToIndexMd"})}),"\n",(0,o.jsxs)(n.p,{children:["(Optional and not recommended) Configures the techdocs generator to attempt to ensure an index.md exists falling back to using ",(0,o.jsx)(n.code,{children:"<docs-dir>/README.md"})," or ",(0,o.jsx)(n.code,{children:"README.md"})," in case a default ",(0,o.jsx)(n.code,{children:"<docs-dir>/index.md"})," is not provided."]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Note:"})," ",(0,o.jsx)(n.a,{href:"https://www.mkdocs.org/user-guide/configuration/#edit_uri",children:"https://www.mkdocs.org/user-guide/configuration/#edit_uri"})," behavior will be broken in these scenarios."]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Example:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:"techdocs:\n  generator:\n    mkdocs:\n      legacyCopyReadmeMdToIndexMd: false\n"})}),"\n",(0,o.jsx)(n.h4,{id:"default-plugins",children:"Default Plugins"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.code,{children:"techdocs.generator.mkdocs.defaultPlugins"})}),"\n",(0,o.jsx)(n.p,{children:"(Optional) Configures the default plugins which should be added automatically to every mkdocs.yaml file. This simplifies the usage as e.g. styling plugins can be added once for all."}),"\n",(0,o.jsxs)(n.p,{children:["Make sure that the defined plugins are installed locally / in the Docker image. By default, only the techdocs-core plugin will be added (except if ",(0,o.jsx)(n.code,{children:"omitTechdocsCorePlugin: true"}),")."]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Example:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:"techdocs:\n  generator:\n    mkdocs:\n      defaultPlugins: ['techdocs-core']\n"})}),"\n",(0,o.jsx)(n.h2,{id:"builder-configuration",children:"Builder Configuration"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.code,{children:"techdocs.builder"})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Options:"})," ",(0,o.jsx)(n.code,{children:"'local'"})," or ",(0,o.jsx)(n.code,{children:"'external'"})]}),"\n",(0,o.jsx)(n.p,{children:"Using the default build strategy:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["If builder is set to ",(0,o.jsx)(n.code,{children:"'local'"})," and you open a TechDocs page, techdocs-backend will try to generate the docs, publish to storage and show the generated docs afterwards. This is the ",(0,o.jsx)(n.strong,{children:'"Basic"'})," setup of the TechDocs Architecture."]}),"\n",(0,o.jsxs)(n.li,{children:["If builder is set to ",(0,o.jsx)(n.code,{children:"'external'"})," (or anything other than ",(0,o.jsx)(n.code,{children:"'local'"}),"), techdocs-backend will only fetch the docs and will NOT try to generate and publish. In this case, we assume that docs are being built by an external process (e.g. in the CI/CD pipeline of the repository). This is the ",(0,o.jsx)(n.strong,{children:'"Recommended"'})," setup of the architecture."]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Note:"})," Custom build strategies may alter this behaviour."]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.a,{href:"https://backstage.io/docs/features/techdocs/architecture",children:'Read more about the "Basic" and "Recommended" setups'}),(0,o.jsx)(n.br,{}),"\n",(0,o.jsx)(n.a,{href:"https://backstage.io/docs/features/techdocs/concepts#techdocs-build-strategy",children:"Read more about build strategies"})]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Example:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:"techdocs:\n  builder: 'local'\n"})}),"\n",(0,o.jsx)(n.h2,{id:"publisher-configuration",children:"Publisher Configuration"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.code,{children:"techdocs.publisher"})}),"\n",(0,o.jsx)(n.p,{children:"This is used to configure the storage option, whether you want to use the local filesystem to store generated docs or you want to use external storage providers like Google Cloud Storage, AWS S3, etc."}),"\n",(0,o.jsx)(n.h3,{id:"publisher-type",children:"Publisher Type"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.code,{children:"techdocs.publisher.type"})}),"\n",(0,o.jsx)(n.p,{children:"This determines where generated documentation files are stored."}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Options:"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"'local'"})," - techdocs-backend will create a 'static' directory at its root to store generated documentation files"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"'googleGcs'"})," - techdocs-backend will use a Google Cloud Storage Bucket"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"'awsS3'"})," - techdocs-backend will use an Amazon Web Service (AWS) S3 bucket"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"'azureBlobStorage'"})," - techdocs-backend will use Azure Blob Storage"]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Example:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:"techdocs:\n  publisher:\n    type: 'local'\n"})}),"\n",(0,o.jsx)(n.h3,{id:"local-storage",children:"Local Storage"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.code,{children:"techdocs.publisher.local"})}),"\n",(0,o.jsx)(n.p,{children:"This is used to configure the local storage option."}),"\n",(0,o.jsxs)(n.p,{children:["Optional when ",(0,o.jsx)(n.code,{children:"techdocs.publisher.type"})," is set to ",(0,o.jsx)(n.code,{children:"'local'"}),"."]}),"\n",(0,o.jsx)(n.h4,{id:"publish-directory",children:"Publish Directory"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.code,{children:"techdocs.publisher.local.publishDirectory"})}),"\n",(0,o.jsx)(n.p,{children:"(Optional) This specifies where the generated documentation is stored."}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Example:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:"techdocs:\n  publisher:\n    type: 'local'\n    local:\n      publishDirectory: '/path/to/local/directory'\n"})}),"\n",(0,o.jsx)(n.h3,{id:"google-cloud-storage",children:"Google Cloud Storage"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.code,{children:"techdocs.publisher.googleGcs"})}),"\n",(0,o.jsx)(n.p,{children:"This is used to configure the Google Cloud Storage option."}),"\n",(0,o.jsxs)(n.p,{children:["Required when ",(0,o.jsx)(n.code,{children:"techdocs.publisher.type"})," is set to ",(0,o.jsx)(n.code,{children:"'googleGcs'"}),". Skip otherwise."]}),"\n",(0,o.jsx)(n.h4,{id:"bucket-name",children:"Bucket Name"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.code,{children:"techdocs.publisher.googleGcs.bucketName"})}),"\n",(0,o.jsx)(n.p,{children:"(Required) The Cloud Storage Bucket Name"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Example:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:"techdocs:\n  publisher:\n    type: 'googleGcs'\n    googleGcs:\n      bucketName: 'techdocs-storage'\n"})}),"\n",(0,o.jsx)(n.h4,{id:"bucket-root-path",children:"Bucket Root Path"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.code,{children:"techdocs.publisher.googleGcs.bucketRootPath"})}),"\n",(0,o.jsx)(n.p,{children:"(Optional) The Location in storage bucket to save files. If not set, the default location will be the root of the storage bucket."}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Example:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:"techdocs:\n  publisher:\n    type: 'googleGcs'\n    googleGcs:\n      bucketName: 'techdocs-storage'\n      bucketRootPath: '/docs'\n"})}),"\n",(0,o.jsx)(n.h4,{id:"credentials",children:"Credentials"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.code,{children:"techdocs.publisher.googleGcs.credentials"})}),"\n",(0,o.jsxs)(n.p,{children:["(Optional) An API key required to write to a storage bucket.\nIf missing ",(0,o.jsx)(n.code,{children:"GOOGLE_APPLICATION_CREDENTIALS"})," environment variable will be used. ",(0,o.jsx)(n.a,{href:"https://cloud.google.com/docs/authentication/production",children:"https://cloud.google.com/docs/authentication/production"})]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Example:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:"techdocs:\n  publisher:\n    type: 'googleGcs'\n    googleGcs:\n      bucketName: 'techdocs-storage'\n      credentials:\n        $file: '/path/to/google_application_credentials.json'\n"})}),"\n",(0,o.jsx)(n.h3,{id:"aws-s3",children:"AWS S3"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.code,{children:"techdocs.publisher.awsS3"})}),"\n",(0,o.jsx)(n.p,{children:"This is used to configure the AWS S3 option."}),"\n",(0,o.jsxs)(n.p,{children:["Required when ",(0,o.jsx)(n.code,{children:"techdocs.publisher.type"})," is set to ",(0,o.jsx)(n.code,{children:"'awsS3'"}),". Skip otherwise."]}),"\n",(0,o.jsx)(n.h4,{id:"bucket-name-1",children:"Bucket Name"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.code,{children:"techdocs.publisher.awsS3.bucketName"})}),"\n",(0,o.jsx)(n.p,{children:"(Required) The AWS S3 Bucket Name"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Example:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:"techdocs:\n  publisher:\n    type: 'awsS3'\n    awsS3:\n      bucketName: 'techdocs-storage'\n"})}),"\n",(0,o.jsx)(n.h4,{id:"bucket-root-path-1",children:"Bucket Root Path"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.code,{children:"techdocs.publisher.awsS3.bucketRootPath"})}),"\n",(0,o.jsx)(n.p,{children:"(Optional) The Location in storage bucket to save files. If not set, the default location will be the root of the storage bucket."}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Example:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:"techdocs:\n  publisher:\n    type: 'awsS3'\n    awsS3:\n      bucketName: 'techdocs-storage'\n      bucketRootPath: '/documentation'\n"})}),"\n",(0,o.jsx)(n.h4,{id:"account-id",children:"Account ID"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.code,{children:"techdocs.publisher.awsS3.accountId"})}),"\n",(0,o.jsxs)(n.p,{children:["The AWS account ID where the storage bucket is located. Credentials for the account ID must be configured in the ",(0,o.jsx)(n.code,{children:"aws"})," app config section. See the ",(0,o.jsx)(n.a,{href:"https://www.npmjs.com/package/@backstage/integration-aws-node",children:"integration-aws-node package"})," for details on how to configure credentials in the ",(0,o.jsx)(n.code,{children:"aws"})," app config section."]}),"\n",(0,o.jsx)(n.p,{children:"If account ID is not set and no credentials are set, environment variables or AWS config file will be used to authenticate."}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.a,{href:"https://www.npmjs.com/package/@aws-sdk/credential-provider-node",children:"https://www.npmjs.com/package/@aws-sdk/credential-provider-node"}),"\n",(0,o.jsx)(n.a,{href:"https://docs.aws.amazon.com/sdk-for-javascript/v3/developer-guide/setting-credentials-node.html",children:"https://docs.aws.amazon.com/sdk-for-javascript/v3/developer-guide/setting-credentials-node.html"})]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Example:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:"techdocs:\n  publisher:\n    type: 'awsS3'\n    awsS3:\n      bucketName: 'techdocs-storage'\n      accountId: ${TECHDOCS_AWSS3_ACCOUNT_ID}\n"})}),"\n",(0,o.jsx)(n.h4,{id:"credentials-1",children:"Credentials"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.code,{children:"techdocs.publisher.awsS3.credentials"})}),"\n",(0,o.jsxs)(n.p,{children:["(Optional) AWS credentials to use to write to the storage bucket. This configuration section is now ",(0,o.jsx)(n.strong,{children:"deprecated"}),". Configuring the account ID is now preferred, with credentials in the ",(0,o.jsx)(n.code,{children:"aws"})," app config section."]}),"\n",(0,o.jsx)(n.p,{children:"If credentials are not set and no account ID is set, environment variables or AWS config file will be used to authenticate."}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.a,{href:"https://www.npmjs.com/package/@aws-sdk/credential-provider-node",children:"https://www.npmjs.com/package/@aws-sdk/credential-provider-node"}),"\n",(0,o.jsx)(n.a,{href:"https://docs.aws.amazon.com/sdk-for-javascript/v3/developer-guide/setting-credentials-node.html",children:"https://docs.aws.amazon.com/sdk-for-javascript/v3/developer-guide/setting-credentials-node.html"})]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Example:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:"techdocs:\n  publisher:\n    type: 'awsS3'\n    awsS3:\n      bucketName: 'techdocs-storage'\n      credentials:\n        accessKeyId: ${TECHDOCS_AWSS3_ACCESS_KEY_ID_CREDENTIAL}\n        secretAccessKey: ${TECHDOCS_AWSS3_SECRET_ACCESS_KEY_CREDENTIAL}\n"})}),"\n",(0,o.jsx)(n.h4,{id:"region",children:"Region"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.code,{children:"techdocs.publisher.awsS3.region"})}),"\n",(0,o.jsxs)(n.p,{children:["(Optional) The AWS Region of the bucket.\nIf not set, ",(0,o.jsx)(n.code,{children:"AWS_REGION"})," environment variable or AWS config file will be used."]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.a,{href:"https://docs.aws.amazon.com/sdk-for-javascript/v3/developer-guide/setting-region.html",children:"https://docs.aws.amazon.com/sdk-for-javascript/v3/developer-guide/setting-region.html"})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Example:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:"techdocs:\n  publisher:\n    type: 'awsS3'\n    awsS3:\n      bucketName: 'techdocs-storage'\n      region: ${AWS_REGION}\n"})}),"\n",(0,o.jsx)(n.h4,{id:"endpoint",children:"Endpoint"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.code,{children:"techdocs.publisher.awsS3.endpoint"})}),"\n",(0,o.jsx)(n.p,{children:"(Optional) The Endpoint URI to send requests to.\nIf not set, the default endpoint is built from the configured region."}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.a,{href:"https://docs.aws.amazon.com/AWSJavaScriptSDK/v3/latest/clients/client-s3/interfaces/s3clientconfig.html#endpoint",children:"https://docs.aws.amazon.com/AWSJavaScriptSDK/v3/latest/clients/client-s3/interfaces/s3clientconfig.html#endpoint"})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Example:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:"techdocs:\n  publisher:\n    type: 'awsS3'\n    awsS3:\n      bucketName: 'techdocs-storage'\n      endpoint: ${AWS_ENDPOINT}\n"})}),"\n",(0,o.jsx)(n.h4,{id:"https-proxy",children:"HTTPS Proxy"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.code,{children:"techdocs.publisher.awsS3.httpsProxy"})}),"\n",(0,o.jsx)(n.p,{children:"(Optional) The HTTPS proxy to use for S3 Requests. Defaults to using no proxy. This allows docs to be published and read from behind a proxy."}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Example:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:"techdocs:\n  publisher:\n    type: 'awsS3'\n    awsS3:\n      bucketName: 'techdocs-storage'\n      httpsProxy: ${HTTPS_PROXY}\n"})}),"\n",(0,o.jsx)(n.h4,{id:"s3-force-path-style",children:"S3 Force Path Style"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.code,{children:"techdocs.publisher.awsS3.s3ForcePathStyle"})}),"\n",(0,o.jsxs)(n.p,{children:["(Optional) Whether to use path style URLs when communicating with S3. Defaults to ",(0,o.jsx)(n.code,{children:"false"}),". This allows providers like LocalStack, Minio and Wasabi (and possibly others) to be used to host tech docs."]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Example:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:"techdocs:\n  publisher:\n    type: 'awsS3'\n    awsS3:\n      bucketName: 'techdocs-storage'\n      s3ForcePathStyle: true\n"})}),"\n",(0,o.jsx)(n.h4,{id:"server-side-encryption",children:"Server Side Encryption"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.code,{children:"techdocs.publisher.awsS3.sse"})}),"\n",(0,o.jsx)(n.p,{children:"(Optional) AWS Server Side Encryption. Defaults to undefined. If not set, encrypted buckets will fail to publish."}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.a,{href:"https://docs.aws.amazon.com/AmazonS3/latest/userguide/specifying-s3-encryption.html",children:"https://docs.aws.amazon.com/AmazonS3/latest/userguide/specifying-s3-encryption.html"})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Options:"})," ",(0,o.jsx)(n.code,{children:"'aws:kms'"})," or ",(0,o.jsx)(n.code,{children:"'AES256'"})]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Example:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:"techdocs:\n  publisher:\n    type: 'awsS3'\n    awsS3:\n      bucketName: 'techdocs-storage'\n      sse: 'aws:kms'\n"})}),"\n",(0,o.jsx)(n.h3,{id:"azure-blob-storage",children:"Azure Blob Storage"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.code,{children:"techdocs.publisher.azureBlobStorage"})}),"\n",(0,o.jsxs)(n.p,{children:["Required when ",(0,o.jsx)(n.code,{children:"techdocs.publisher.type"})," is set to ",(0,o.jsx)(n.code,{children:"'azureBlobStorage'"}),". Skip otherwise."]}),"\n",(0,o.jsx)(n.h4,{id:"container-name",children:"Container Name"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.code,{children:"techdocs.publisher.azureBlobStorage.containerName"})}),"\n",(0,o.jsx)(n.p,{children:"(Required) Azure Blob Storage Container Name"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Example:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:"techdocs:\n  publisher:\n    type: 'azureBlobStorage'\n    azureBlobStorage:\n      containerName: 'techdocs-storage'\n"})}),"\n",(0,o.jsx)(n.h4,{id:"connection-string",children:"Connection String"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.code,{children:"techdocs.publisher.azureBlobStorage.connectionString"})}),"\n",(0,o.jsxs)(n.p,{children:["(Optional) Azure blob storage connection string. Can be useful for local testing through azurite. Defaults to undefined. If provided, takes higher priority, and ",(0,o.jsx)(n.code,{children:"techdocs.publisher.azureBlobStorage.credentials"})," will become irrelevant."]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Example:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:"techdocs:\n  publisher:\n    type: 'azureBlobStorage'\n    azureBlobStorage:\n      containerName: 'techdocs-storage'\n      connectionString: 'DefaultEndpointsProtocol=https;AccountName=...'\n"})}),"\n",(0,o.jsx)(n.h4,{id:"credentials-2",children:"Credentials"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.code,{children:"techdocs.publisher.azureBlobStorage.credentials"})}),"\n",(0,o.jsx)(n.p,{children:"(Required) An account name to write to a storage blob container."}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.a,{href:"https://docs.microsoft.com/en-us/rest/api/storageservices/authorize-with-shared-key",children:"https://docs.microsoft.com/en-us/rest/api/storageservices/authorize-with-shared-key"})}),"\n",(0,o.jsxs)(n.p,{children:["(Optional) An account key is required to write to a storage container. If missing, ",(0,o.jsx)(n.code,{children:"AZURE_TENANT_ID"}),", ",(0,o.jsx)(n.code,{children:"AZURE_CLIENT_ID"}),", ",(0,o.jsx)(n.code,{children:"AZURE_CLIENT_SECRET"})," environment variables will be used."]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.a,{href:"https://docs.microsoft.com/en-us/azure/storage/common/storage-auth?toc=/azure/storage/blobs/toc.json",children:"https://docs.microsoft.com/en-us/azure/storage/common/storage-auth?toc=/azure/storage/blobs/toc.json"})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Example:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:"techdocs:\n  publisher:\n    type: 'azureBlobStorage'\n    azureBlobStorage:\n      containerName: 'techdocs-storage'\n      credentials:\n        accountName: ${TECHDOCS_AZURE_BLOB_STORAGE_ACCOUNT_NAME}\n        accountKey: ${TECHDOCS_AZURE_BLOB_STORAGE_ACCOUNT_KEY}\n"})}),"\n",(0,o.jsx)(n.h2,{id:"legacy-case-sensitive-triplet-paths",children:"Legacy Case Sensitive Triplet Paths"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.code,{children:"techdocs.legacyUseCaseSensitiveTripletPaths"})}),"\n",(0,o.jsxs)(n.p,{children:["(Optional and not recommended) Prior to version [0.x.y] of TechDocs, docs sites could only be accessed over paths with case-sensitive entity triplets e.g. (namespace/Kind/name). If you are upgrading from an older version of TechDocs and are unable to perform the necessary migration of files in your external storage, you can set this value to ",(0,o.jsx)(n.code,{children:"true"})," to temporarily revert to the old, case-sensitive entity triplet behavior."]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Example:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:"techdocs:\n  legacyUseCaseSensitiveTripletPaths: false\n"})}),"\n",(0,o.jsx)(n.h2,{id:"cache-configuration",children:"Cache Configuration"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.code,{children:"techdocs.cache"})}),"\n",(0,o.jsxs)(n.p,{children:["(Optional) ",(0,o.jsx)(n.code,{children:"techdocs.cache"})," is only recommended when you've configured an external ",(0,o.jsx)(n.code,{children:"techdocs.publisher.type"})," above. Also requires ",(0,o.jsx)(n.code,{children:"backend.cache"})," to be configured with a valid cache store. Configure ",(0,o.jsx)(n.code,{children:"techdocs.cache.ttl"})," to enable caching of techdocs assets."]}),"\n",(0,o.jsx)(n.h3,{id:"ttl",children:"TTL"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.code,{children:"techdocs.cache.ttl"})}),"\n",(0,o.jsx)(n.p,{children:"Represents the number of milliseconds a statically built asset should stay cached. Cache invalidation is handled automatically by the frontend, which compares the build times in cached metadata vs. canonical storage, allowing long TTLs (e.g. 1 month/year)."}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Example:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:"techdocs:\n  cache:\n    ttl: 3600000\n"})}),"\n",(0,o.jsx)(n.h3,{id:"read-timeout",children:"Read Timeout"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.code,{children:"techdocs.cache.readTimeout"})}),"\n",(0,o.jsx)(n.p,{children:"(Optional) The time (in milliseconds) that the TechDocs backend will wait for a cache service to respond before continuing on as though the cached object was not found (e.g. when the cache service is unavailable). The default value is 1000."}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Example:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:"techdocs:\n  cache:\n    ttl: 3600000\n    readTimeout: 500\n"})})]})}function h(e={}){let{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},28453(e,n,s){s.d(n,{R:()=>i,x:()=>r});var c=s(296540);let o={},t=c.createContext(o);function i(e){let n=c.useContext(t);return c.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),c.createElement(t.Provider,{value:n},e.children)}},298865(e){e.exports=JSON.parse('{"id":"features/techdocs/configuration","title":"TechDocs Configuration Options","description":"Reference documentation for configuring TechDocs using app-config.yaml","source":"@site/versioned_docs/version-stable/features/techdocs/configuration.md","sourceDirName":"features/techdocs","slug":"/features/techdocs/configuration","permalink":"/docs/features/techdocs/configuration","draft":false,"unlisted":false,"editUrl":"https://github.com/backstage/backstage/edit/master/docs/features/techdocs/configuration.md","tags":[],"version":"stable","frontMatter":{"id":"configuration","title":"TechDocs Configuration Options","description":"Reference documentation for configuring TechDocs using app-config.yaml"},"sidebar":"docs","previous":{"title":"Creating and Publishing Documentation","permalink":"/docs/features/techdocs/creating-and-publishing"},"next":{"title":"Using Cloud Storage for TechDocs generated files","permalink":"/docs/features/techdocs/using-cloud-storage"}}')}}]);