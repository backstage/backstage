/*! For license information please see 549927c9.74807932.js.LICENSE.txt */
"use strict";(self.webpackChunkbackstage_microsite=self.webpackChunkbackstage_microsite||[]).push([[474547],{409553:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>i,metadata:()=>r,toc:()=>c});var s=n(474848),a=n(28453);const i={id:"software-templates-index",title:"Backstage Software Templates",sidebar_label:"Overview",description:"The Software Templates part of Backstage is a tool that can help you create Components inside Backstage"},o=void 0,r={id:"features/software-templates/software-templates-index",title:"Backstage Software Templates",description:"The Software Templates part of Backstage is a tool that can help you create Components inside Backstage",source:"@site/../docs/features/software-templates/index.md",sourceDirName:"features/software-templates",slug:"/features/software-templates/",permalink:"/docs/next/features/software-templates/",draft:!1,unlisted:!1,editUrl:"https://github.com/backstage/backstage/edit/master/docs/features/software-templates/index.md",tags:[],version:"current",frontMatter:{id:"software-templates-index",title:"Backstage Software Templates",sidebar_label:"Overview",description:"The Software Templates part of Backstage is a tool that can help you create Components inside Backstage"},sidebar:"docs",previous:{title:"FAQ",permalink:"/docs/next/features/software-catalog/faq"},next:{title:"Configuration",permalink:"/docs/next/features/software-templates/configuration"}},l={},c=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Getting Started",id:"getting-started",level:2},{value:"Choose a template",id:"choose-a-template",level:2},{value:"Review page",id:"review-page",level:2},{value:"Run the template",id:"run-the-template",level:2},{value:"Success",id:"success",level:2},{value:"Failure",id:"failure",level:2},{value:"View the Results",id:"view-the-results",level:2},{value:"Disable Register Existing Component button",id:"disable-register-existing-component-button",level:2},{value:"Template Task List",id:"template-task-list",level:2},{value:"Starting Over",id:"starting-over",level:2},{value:"Want to see it in action?",id:"want-to-see-it-in-action",level:2}];function d(e){const t={a:"a",admonition:"admonition",code:"code",h2:"h2",img:"img",p:"p",pre:"pre",strong:"strong",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.p,{children:"The Software Templates part of Backstage is a tool that can help you create\nComponents inside Backstage. By default, it has the ability to load skeletons of\ncode, template in some variables, and then publish the template to some\nlocations like GitHub or GitLab."}),"\n",(0,s.jsxs)(t.admonition,{title:"Important",type:"warning",children:[(0,s.jsxs)(t.p,{children:["When creating custom scaffolder actions, ",(0,s.jsx)(t.strong,{children:"use camelCase for action IDs"})," instead of kebab-case. Action IDs with dashes (like ",(0,s.jsx)(t.code,{children:"fetch-component-id"}),") will cause template expressions like ",(0,s.jsx)(t.code,{children:"${{ steps.fetch-component-id.output.componentId }}"})," to return ",(0,s.jsx)(t.code,{children:"NaN"})," because the dashes are evaluated as subtraction operators in JavaScript expressions."]}),(0,s.jsx)(t.admonition,{type:"note",children:(0,s.jsxs)(t.p,{children:["See the ",(0,s.jsx)(t.a,{href:"/docs/next/features/software-templates/writing-custom-actions#naming-conventions",children:"Writing Custom Actions guide"})," and ",(0,s.jsx)(t.a,{href:"/docs/next/features/software-templates/migrating-from-v1beta2-to-v1beta3#watch-out-for-dash-case",children:"Template Migration guide"})," for more details."]})})]}),"\n",(0,s.jsx)(t.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,s.jsxs)(t.admonition,{title:"Note",type:"note",children:[(0,s.jsxs)(t.p,{children:["If you're running Backstage with Node 20 or later, you'll need to pass the flag ",(0,s.jsx)(t.code,{children:"--no-node-snapshot"})," to Node in order to\nuse the templates feature.\nOne way to do this is to specify the ",(0,s.jsx)(t.code,{children:"NODE_OPTIONS"})," environment variable before starting Backstage:\n",(0,s.jsx)(t.code,{children:'export NODE_OPTIONS="${NODE_OPTIONS:-} --no-node-snapshot"'})]}),(0,s.jsxs)(t.p,{children:["It's important to append to the existing ",(0,s.jsx)(t.code,{children:"NODE_OPTIONS"})," value, if it's already set, rather than overwriting it, since some NodeJS Debugging tools may rely on this environment variable to work properly."]})]}),"\n",(0,s.jsxs)(t.p,{children:["These docs assume you have already gone over the ",(0,s.jsx)(t.a,{href:"../../getting-started",children:"Backstage Getting Started"})," section and you are able to run Backstage locally or it has been deployed somewhere."]}),"\n",(0,s.jsx)(t.h2,{id:"getting-started",children:"Getting Started"}),"\n",(0,s.jsxs)(t.p,{children:["Software Templates you have imported into Backstage can be found under ",(0,s.jsx)(t.code,{children:"/create"}),"."]}),"\n",(0,s.jsxs)(t.p,{children:["If you're running Backstage locally, this will be ",(0,s.jsx)(t.code,{children:"http://localhost:3000/create"}),"."]}),"\n",(0,s.jsx)(t.p,{children:"Once there, you should see something that looks similar to this:"}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"Create Image",src:n(257696).A+"",width:"3574",height:"2382"})}),"\n",(0,s.jsx)(t.h2,{id:"choose-a-template",children:"Choose a template"}),"\n",(0,s.jsx)(t.p,{children:"When you select a template that you want to create, you'll be taken to the next\npage which may or may not look different for each template. Each template can\nask for different input variables, and they are then passed to the templater\ninternally."}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"Enter some variables",src:n(810577).A+"",width:"3574",height:"2382"})}),"\n",(0,s.jsx)(t.p,{children:"Templates generally consist of a set of steps, and each step can have its own set of required or optional inputs, as you can see in the image below we are now prompted to input some Github repository information."}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"Enter Backstage vars",src:n(427088).A+"",width:"3574",height:"2382"})}),"\n",(0,s.jsx)(t.h2,{id:"review-page",children:"Review page"}),"\n",(0,s.jsx)(t.p,{children:"Before you run the template, you'll be taken to a summary page where you can verify the inputs you have provided before we run the template."}),"\n",(0,s.jsx)(t.p,{children:"This is a good time to double check that you have provided the correct information and allows you to go back and change any of the inputs if you need to."}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"Review",src:n(249092).A+"",width:"3574",height:"2382"})}),"\n",(0,s.jsx)(t.h2,{id:"run-the-template",children:"Run the template"}),"\n",(0,s.jsxs)(t.p,{children:["Once you are happy with the inputs you have provided, you can click on the ",(0,s.jsx)(t.code,{children:"Create"})," button to run the template."]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"Templating Running",src:n(959779).A+"",width:"3574",height:"2382"})}),"\n",(0,s.jsx)(t.h2,{id:"success",children:"Success"}),"\n",(0,s.jsx)(t.p,{children:"Once the template has finished running, you'll be taken to a success page where you can see the results of the template."}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"Templating Complete",src:n(771969).A+"",width:"3574",height:"2382"})}),"\n",(0,s.jsx)(t.h2,{id:"failure",children:"Failure"}),"\n",(0,s.jsx)(t.p,{children:"If it fails, you'll be able to click on each section to get the log from the\nstep that failed which can be helpful in debugging."}),"\n",(0,s.jsx)(t.p,{children:'You can also cancel the running process. Once you clicked on button "Cancel", the abort signal\nwill be sent to a task and all next steps won\'t be executed. The current step will be cancelled\nonly if it supports it.'}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"Templating failed",src:n(380427).A+"",width:"3574",height:"2382"})}),"\n",(0,s.jsx)(t.h2,{id:"view-the-results",children:"View the Results"}),"\n",(0,s.jsx)(t.p,{children:"Once the template has finished running, and from the screenshot above, when its successful, you are presented with two links, clicking on them will take you to the templated repository we created!"}),"\n",(0,s.jsx)(t.h2,{id:"disable-register-existing-component-button",children:"Disable Register Existing Component button"}),"\n",(0,s.jsxs)(t.p,{children:["There could be situations where you would like to disable the\n",(0,s.jsx)(t.code,{children:"Register Existing Component"})," button for your users."]}),"\n",(0,s.jsxs)(t.p,{children:["To do so, you need to explicitly disable the default route binding from the ",(0,s.jsx)(t.code,{children:"scaffolderPlugin.registerComponent"})," to the Catalog Import page."]}),"\n",(0,s.jsxs)(t.p,{children:["This can be done in ",(0,s.jsx)(t.code,{children:"backstage/packages/app/src/App.tsx"}),":"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-diff",children:" const app = createApp({\n   apis,\n   bindRoutes({ bind }) {\n     bind(scaffolderPlugin.externalRoutes, {\n+      registerComponent: false,\n-      registerComponent: catalogImportPlugin.routes.importPage,\n       viewTechDoc: techdocsPlugin.routes.docRoot,\n     });\n})\n"})}),"\n",(0,s.jsxs)(t.p,{children:["OR in ",(0,s.jsx)(t.code,{children:"app-config.yaml"}),":"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-yaml",children:"app:\n  routes:\n    bindings:\n      scaffolder.registerComponent: false\n"})}),"\n",(0,s.jsx)(t.p,{children:"After the change, you should no longer see the button."}),"\n",(0,s.jsx)(t.h2,{id:"template-task-list",children:"Template Task List"}),"\n",(0,s.jsx)(t.p,{children:'Each execution of a template is treated as a unique task, identifiable by its own unique ID. To view a list of previously executed template tasks, navigate to the "Create" page and access the "Task List" from the context menu (represented by the vertical ellipsis, or \'kebab menu\', icon in the upper right corner).'}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"Template Task List",src:n(674433).A+"",width:"3574",height:"2382"})}),"\n",(0,s.jsx)(t.h2,{id:"starting-over",children:"Starting Over"}),"\n",(0,s.jsx)(t.p,{children:'If you wish to re-run a previously executed template, navigate to the template tasks page. Locate the desired task and select the "Start Over" option from the context menu.'}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"Template Start Over",src:n(714746).A+"",width:"3574",height:"2382"})}),"\n",(0,s.jsx)(t.p,{children:"This action will initiate a new execution of the selected template, pre-populated with the same parameters as the previous run, but these parameters can be edited before re-execution."}),"\n",(0,s.jsx)(t.p,{children:'In the event of a failed template execution, the "Start Over" option can be used to re-execute the template. The parameters from the original run will be pre-filled, but they can be adjusted as needed before retrying the template.'}),"\n",(0,s.jsx)(t.h2,{id:"want-to-see-it-in-action",children:"Want to see it in action?"}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.a,{href:"https://demo.backstage.io/create",children:"Backstage Demo Site"})," has a template you are able to run, which is where the screenshots in this document were taken from!"]})]})}function h(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},221020:(e,t,n)=>{var s=n(296540),a=Symbol.for("react.element"),i=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,r=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var s,i={},c=null,d=null;for(s in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)o.call(t,s)&&!l.hasOwnProperty(s)&&(i[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===i[s]&&(i[s]=t[s]);return{$$typeof:a,type:e,key:c,ref:d,props:i,_owner:r.current}}t.Fragment=i,t.jsx=c,t.jsxs=c},474848:(e,t,n)=>{e.exports=n(221020)},771969:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/complete-e82b13784560cb6e66eb85422a1996a6.png"},257696:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/create-c63afe8be6e6a170284871288f8f6787.png"},380427:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/failed-d06f9942e66845b34c5e4c91ff14e680.png"},249092:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/review-805b3454e0f245966698f2420c4595d5.png"},959779:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/running-09ee520bf1476259bac7f6f7ba9f47da.png"},427088:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/template-picked-2-62a2b4933801178a0c8163348cb86c6d.png"},810577:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/template-picked-7b1f9f04f93e78f81a6eee811ce80c82.png"},714746:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/template-start-over-a8efe425c50f083316e8d4e5a1d97d60.png"},674433:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/template-task-list-489853eca6408e7c8f78fe823b335a29.png"},28453:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>r});var s=n(296540);const a={},i=s.createContext(a);function o(e){const t=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),s.createElement(i.Provider,{value:t},e.children)}}}]);